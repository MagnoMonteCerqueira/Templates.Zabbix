<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:41Z</date><groups><group><uuid>57b7ae836ca64446ba2c296389c009b7</uuid><name>Templates/Modules</name></group></groups><templates><template><uuid>fdcdd5810fba49928922a683d32aa76f</uuid><template>Linux filesystems by Zabbix agent</template><name>Linux filesystems by Zabbix agent</name><description>Template tooling version used: 0.41</description><groups><group><name>Templates/Modules</name></group></groups><discovery_rules><discovery_rule><uuid>1ec7965ad995437da2dc1f94749f3230</uuid><name>Mounted filesystem discovery</name><key>vfs.fs.discovery</key><delay>1h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>D</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><description>Discovery of file systems of different types.</description><item_prototypes><item_prototype><uuid>8d6496b8be814dc885a1efb42823ae4f</uuid><name>{#FSNAME}: Free inodes in %</name><key>vfs.fs.inode[{#FSNAME},pfree]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>26adf86d6dd741b48007577091d5902c</uuid><expression>min(/Linux filesystems by Zabbix agent/vfs.fs.inode[{#FSNAME},pfree],5m)&lt;{$VFS.FS.INODE.PFREE.MIN.CRIT:&quot;{#FSNAME}&quot;}</expression><name>{#FSNAME}: Running out of free inodes</name><event_name>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.CRIT:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Free inodes: {ITEM.LASTVALUE1}</opdata><priority>AVERAGE</priority><description>It may become impossible to write to disk if there are no index nodes left.
As symptoms, 'No space left on device' or 'Disk is full' errors may be seen even though free space is available.</description><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype><trigger_prototype><uuid>756b0126cc004f8d97f10384a4dc8587</uuid><expression>min(/Linux filesystems by Zabbix agent/vfs.fs.inode[{#FSNAME},pfree],5m)&lt;{$VFS.FS.INODE.PFREE.MIN.WARN:&quot;{#FSNAME}&quot;}</expression><name>{#FSNAME}: Running out of free inodes</name><event_name>{#FSNAME}: Running out of free inodes (free &lt; {$VFS.FS.INODE.PFREE.MIN.WARN:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Free inodes: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><description>It may become impossible to write to disk if there are no index nodes left.
As symptoms, 'No space left on device' or 'Disk is full' errors may be seen even though free space is available.</description><dependencies><dependency><name>{#FSNAME}: Running out of free inodes</name><expression>min(/Linux filesystems by Zabbix agent/vfs.fs.inode[{#FSNAME},pfree],5m)&lt;{$VFS.FS.INODE.PFREE.MIN.CRIT:&quot;{#FSNAME}&quot;}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>a39947b5a940441a961f685b430cd7e9</uuid><name>{#FSNAME}: Space utilization</name><key>vfs.fs.size[{#FSNAME},pused]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Space utilization in % for {#FSNAME}</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype><item_prototype><uuid>e6ce1925a65d4b1fa954ac55fcd39b04</uuid><name>{#FSNAME}: Total space</name><key>vfs.fs.size[{#FSNAME},total]</key><history>7d</history><units>B</units><description>Total space in Bytes</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype><item_prototype><uuid>74c773bffa8e41f2a3cd7abf0b710fcf</uuid><name>{#FSNAME}: Used space</name><key>vfs.fs.size[{#FSNAME},used]</key><history>7d</history><units>B</units><description>Used storage in Bytes</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>fb410c10bd59476dbe58e1ee179cd25f</uuid><expression>last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and
((last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;} or timeleft(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression><name>{#FSNAME}: Disk space is critically low</name><event_name>{#FSNAME}: Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>AVERAGE</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}.
 Second condition should be one of the following:
 - The disk free space is less than {$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;}.
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype><trigger_prototype><uuid>d66583735eb04973ac30d923533c4b0f</uuid><expression>last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;} and
((last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.WARN:&quot;{#FSNAME}&quot;} or timeleft(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression><name>{#FSNAME}: Disk space is low</name><event_name>{#FSNAME}: Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>WARNING</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}.
 Second condition should be one of the following:
 - The disk free space is less than {$VFS.FS.FREE.MIN.WARN:&quot;{#FSNAME}&quot;}.
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close><dependencies><dependency><name>{#FSNAME}: Disk space is critically low</name><expression>last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and
((last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;} or timeleft(/Linux filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><uuid>3ccd5c1a0e15489c9b57030ee634b8e3</uuid><name>{#FSNAME}: Disk space usage</name><width>600</width><height>340</height><type>PIE</type><show_3d>YES</show_3d><graph_items><graph_item><color>969696</color><calc_fnc>LAST</calc_fnc><type>GRAPH_SUM</type><item><host>Linux filesystems by Zabbix agent</host><key>vfs.fs.size[{#FSNAME},total]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><calc_fnc>LAST</calc_fnc><item><host>Linux filesystems by Zabbix agent</host><key>vfs.fs.size[{#FSNAME},used]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><overrides><override><name>Skip metadata collection for dynamic FS</name><step>1</step><filter><conditions><condition><macro>{#FSTYPE}</macro><value>^(btrfs|zfs)$</value><formulaid>A</formulaid></condition></conditions></filter><operations><operation><operationobject>ITEM_PROTOTYPE</operationobject><operator>LIKE</operator><value>inode</value><discover>NO_DISCOVER</discover></operation></operations></override></overrides></discovery_rule></discovery_rules><macros><macro><macro>{$VFS.FS.FREE.MIN.CRIT}</macro><value>5G</value><description>The critical threshold of the filesystem utilization.</description></macro><macro><macro>{$VFS.FS.FREE.MIN.WARN}</macro><value>10G</value><description>The warning threshold of the filesystem utilization.</description></macro><macro><macro>{$VFS.FS.FSNAME.MATCHES}</macro><value>.+</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description></macro><macro><macro>{$VFS.FS.FSNAME.NOT_MATCHES}</macro><value>^(/dev|/sys|/run|/proc|.+/shm$)</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description></macro><macro><macro>{$VFS.FS.FSTYPE.MATCHES}</macro><value>^(btrfs|ext2|ext3|ext4|reiser|xfs|ffs|ufs|jfs|jfs2|vxfs|hfs|apfs|refs|ntfs|fat32|zfs)$</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description></macro><macro><macro>{$VFS.FS.FSTYPE.NOT_MATCHES}</macro><value>^\s$</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level</description></macro><macro><macro>{$VFS.FS.INODE.PFREE.MIN.CRIT}</macro><value>10</value></macro><macro><macro>{$VFS.FS.INODE.PFREE.MIN.WARN}</macro><value>20</value></macro><macro><macro>{$VFS.FS.PUSED.MAX.CRIT}</macro><value>90</value></macro><macro><macro>{$VFS.FS.PUSED.MAX.WARN}</macro><value>80</value></macro></macros></template></templates></zabbix_export>
