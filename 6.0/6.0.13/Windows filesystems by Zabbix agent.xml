<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:42Z</date><groups><group><uuid>57b7ae836ca64446ba2c296389c009b7</uuid><name>Templates/Modules</name></group></groups><templates><template><uuid>cb28abff977b4b6eb34665ff2218163b</uuid><template>Windows filesystems by Zabbix agent</template><name>Windows filesystems by Zabbix agent</name><description>Template tooling version used: 0.41</description><groups><group><name>Templates/Modules</name></group></groups><discovery_rules><discovery_rule><uuid>f603eb3367ad4326a1f1ec7b9c14c07a</uuid><name>Mounted filesystem discovery</name><key>vfs.fs.discovery</key><delay>1h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.MATCHES}</value><formulaid>E</formulaid></condition><condition><macro>{#FSTYPE}</macro><value>{$VFS.FS.FSTYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>F</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$VFS.FS.FSNAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>D</formulaid></condition><condition><macro>{#FSDRIVETYPE}</macro><value>{$VFS.FS.FSDRIVETYPE.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#FSDRIVETYPE}</macro><value>{$VFS.FS.FSDRIVETYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><description>Discovery of file systems of different types.</description><item_prototypes><item_prototype><uuid>84c999eefbdd43319d0b992aff43f3c5</uuid><name>{#FSLABEL}({#FSNAME}): Space utilization</name><key>vfs.fs.size[{#FSNAME},pused]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Space utilization in % for {#FSNAME}</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype><item_prototype><uuid>a1661dae47c640be9cfa9e807e125ff3</uuid><name>{#FSLABEL}({#FSNAME}): Total space</name><key>vfs.fs.size[{#FSNAME},total]</key><history>7d</history><units>B</units><description>Total space in Bytes</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype><item_prototype><uuid>ed0c1057b2704ab098847ae62fec9064</uuid><name>{#FSLABEL}({#FSNAME}): Used space</name><key>vfs.fs.size[{#FSNAME},used]</key><history>7d</history><units>B</units><description>Used storage in Bytes</description><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>68544e02e3cc4d389269448f34ca66e1</uuid><expression>last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and
((last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;} or timeleft(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression><name>{#FSLABEL}({#FSNAME}): Disk space is critically low</name><event_name>{#FSLABEL}({#FSNAME}): Disk space is critically low (used &gt; {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>AVERAGE</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}.
 Second condition should be one of the following:
 - The disk free space is less than {$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;}.
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype><trigger_prototype><uuid>ba0e859e58c34107a792098cfe9d31a4</uuid><expression>last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;} and
((last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.WARN:&quot;{#FSNAME}&quot;} or timeleft(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression><name>{#FSLABEL}({#FSNAME}): Disk space is low</name><event_name>{#FSLABEL}({#FSNAME}): Disk space is low (used &gt; {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}%)</event_name><opdata>Space used: {ITEM.LASTVALUE3} of {ITEM.LASTVALUE2} ({ITEM.LASTVALUE1})</opdata><priority>WARNING</priority><description>Two conditions should match: First, space utilization should be above {$VFS.FS.PUSED.MAX.WARN:&quot;{#FSNAME}&quot;}.
 Second condition should be one of the following:
 - The disk free space is less than {$VFS.FS.FREE.MIN.WARN:&quot;{#FSNAME}&quot;}.
 - The disk will be full in less than 24 hours.</description><manual_close>YES</manual_close><dependencies><dependency><name>{#FSLABEL}({#FSNAME}): Disk space is critically low</name><expression>last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused])&gt;{$VFS.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and
((last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},total])-last(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},used]))&lt;{$VFS.FS.FREE.MIN.CRIT:&quot;{#FSNAME}&quot;} or timeleft(/Windows filesystems by Zabbix agent/vfs.fs.size[{#FSNAME},pused],1h,100)&lt;1d)</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><uuid>78d604a4bde244c38bcfbabd7ef5e09d</uuid><name>{#FSLABEL}({#FSNAME}): Disk space usage</name><width>600</width><height>340</height><type>PIE</type><show_3d>YES</show_3d><graph_items><graph_item><color>969696</color><calc_fnc>LAST</calc_fnc><type>GRAPH_SUM</type><item><host>Windows filesystems by Zabbix agent</host><key>vfs.fs.size[{#FSNAME},total]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>C80000</color><calc_fnc>LAST</calc_fnc><item><host>Windows filesystems by Zabbix agent</host><key>vfs.fs.size[{#FSNAME},used]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule></discovery_rules><macros><macro><macro>{$VFS.FS.FREE.MIN.CRIT}</macro><value>5G</value><description>The critical threshold of the filesystem utilization.</description></macro><macro><macro>{$VFS.FS.FREE.MIN.WARN}</macro><value>10G</value><description>The warning threshold of the filesystem utilization.</description></macro><macro><macro>{$VFS.FS.FSDRIVETYPE.MATCHES}</macro><value>fixed</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.FSDRIVETYPE.NOT_MATCHES}</macro><value>^\s$</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.FSNAME.MATCHES}</macro><value>.*</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.FSNAME.NOT_MATCHES}</macro><value>^(?:/dev|/sys|/run|/proc|.+/shm$)</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.FSTYPE.MATCHES}</macro><value>.*</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.FSTYPE.NOT_MATCHES}</macro><value>^\s$</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$VFS.FS.PUSED.MAX.CRIT}</macro><value>90</value><description>The critical threshold of the filesystem utilization in percent.</description></macro><macro><macro>{$VFS.FS.PUSED.MAX.WARN}</macro><value>80</value><description>The warning threshold of the filesystem utilization in percent.</description></macro></macros></template></templates></zabbix_export>
