<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:59Z</date><groups><group><uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid><name>Templates/Applications</name></group></groups><templates><template><uuid>8cdbe00a2a3046ee962d28d32567968a</uuid><template>Travis CI by HTTP</template><name>Travis CI by HTTP</name><description>Template for monitoring Travis CI https://travis-ci.com
You must set {$TRAVIS.API.TOKEN} and {$TRAVIS.API.URL} macros.
  {$TRAVIS.API.TOKEN} is a Travis API authentication token located in User -&gt; Settings -&gt; API authentication.
  {$TRAVIS.API.URL} could be in 2 different variations:
   - for a private project : api.travis-ci.com
   - for an enterprise projects: api.example.com (where you replace example.com with the domain Travis CI is running on)

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/

Template tooling version used: 0.41</description><groups><group><name>Templates/Applications</name></group></groups><items><item><uuid>dbdaf09ff13742b988bd0356923f625f</uuid><name>Travis: Builds duration</name><type>DEPENDENT</type><key>travis.builds.duration</key><delay>0</delay><history>7d</history><units>s</units><description>Sum of all builds durations in all repos.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..duration.sum()</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step></preprocessing><master_item><key>travis.get_builds</key></master_item><tags><tag><tag>component</tag><value>builds</value></tag></tags></item><item><uuid>e0d31827266f4d1599cb687d15d42747</uuid><name>Travis: Builds</name><type>DEPENDENT</type><key>travis.builds.total</key><delay>0</delay><history>7d</history><description>Total count of builds in all repos.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds.length()</parameter></parameters></step></preprocessing><master_item><key>travis.get_builds</key></master_item><tags><tag><tag>component</tag><value>builds</value></tag></tags></item><item><uuid>08466cd6902441299856cba3ce601510</uuid><name>Travis: Get builds</name><type>HTTP_AGENT</type><key>travis.get_builds</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><description>Getting builds using Travis API.</description><url>https://{$TRAVIS.API.URL}/builds</url><query_fields><query_field><name>limit</name><value>0</value></query_field></query_fields><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>997172d503c54798800d01c613aca92a</uuid><name>Travis: Get health</name><type>HTTP_AGENT</type><key>travis.get_health</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Getting home JSON using Travis API.</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.parse(value).config ? 1 : 0</parameter></parameters></step></preprocessing><url>https://{$TRAVIS.API.URL}/</url><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>6baed695cac34d349a42ab6e8295910d</uuid><expression>nodata(/Travis CI by HTTP/travis.get_health,30m)=1</expression><name>Travis: Failed to fetch home page</name><event_name>Travis: Failed to fetch home page (or no data for 30m)</event_name><priority>WARNING</priority><description>Zabbix has not received data for items for the last 30 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger><trigger><uuid>e8398acab5a74505a85ade5d3ca5f590</uuid><expression>last(/Travis CI by HTTP/travis.get_health)=0</expression><name>Travis: Service is unavailable</name><priority>HIGH</priority><description>Travis API is unavailable. Please check if the correct macros are set.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>5a01061d1f3d48f8ad0beb4d32e2168d</uuid><name>Travis: Get jobs</name><type>HTTP_AGENT</type><key>travis.get_jobs</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><description>Getting jobs using Travis API.</description><url>https://{$TRAVIS.API.URL}/jobs</url><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>jobs</value></tag><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>5212bfa6de6c4a17b98a80012f617eea</uuid><name>Travis: Get repos</name><type>HTTP_AGENT</type><key>travis.get_repos</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><description>Getting repos using Travis API.</description><url>https://{$TRAVIS.API.URL}/repos</url><query_fields><query_field><name>limit</name><value>0</value></query_field></query_fields><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>raw</value></tag><tag><tag>component</tag><value>repos</value></tag></tags></item><item><uuid>81504a37965b402bad9b71507c4a8926</uuid><name>Travis: Jobs active</name><type>DEPENDENT</type><key>travis.jobs.active</key><delay>0</delay><history>7d</history><description>Active jobs in all repos.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.jobs[?(@.state == &quot;started&quot;)].length()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step></preprocessing><master_item><key>travis.get_jobs</key></master_item><tags><tag><tag>component</tag><value>jobs</value></tag></tags></item><item><uuid>a1045b05877941bfba97e086ef33234c</uuid><name>Travis: Jobs in queue</name><type>DEPENDENT</type><key>travis.jobs.queue</key><delay>0</delay><history>7d</history><description>Jobs in queue in all repos.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.jobs[?(@.state == &quot;received&quot;)].length()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step></preprocessing><master_item><key>travis.get_jobs</key></master_item><tags><tag><tag>component</tag><value>jobs</value></tag></tags></item><item><uuid>421a1a1a886c46188047914d5149c075</uuid><name>Travis: Jobs passed</name><type>DEPENDENT</type><key>travis.jobs.total</key><delay>0</delay><history>7d</history><description>Total count of passed jobs in all repos.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.jobs.length()</parameter></parameters></step></preprocessing><master_item><key>travis.get_jobs</key></master_item><tags><tag><tag>component</tag><value>jobs</value></tag></tags></item></items><discovery_rules><discovery_rule><uuid>0bd67f5bd26f4dbbbda7e2d36efac649</uuid><name>Repos metrics discovery</name><type>DEPENDENT</type><key>travis.repos.discovery</key><delay>0</delay><description>Metrics for Repos statistics.</description><item_prototypes><item_prototype><uuid>3ff94b65151e4378b3ef46d049aff1f7</uuid><name>Travis: Repo [{#SLUG}]: Builds failed</name><type>DEPENDENT</type><key>travis.repo.builds.failed[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Count of all failed builds in {#SLUG} repo.</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.parse(value).builds.filter(function (e){return e.state !== &quot;passed&quot; &amp;&amp; e.state !== &quot;started&quot; }).length</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>0d2f2c7b23284836ad52b4ddc98dcfc8</uuid><name>Travis: Repo [{#SLUG}]: Builds passed, %</name><type>CALCULATED</type><key>travis.repo.builds.passed.pct[{#SLUG}]</key><history>7d</history><units>%</units><params>last(//travis.repo.builds.passed[{#SLUG}])/last(//travis.repo.builds.total[{#SLUG}])*100</params><description>Percent of passed builds in {#SLUG} repo.</description><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>8279ce31c4fe4cb7a03baa8a0149a557</uuid><expression>last(/Travis CI by HTTP/travis.repo.builds.passed.pct[{#SLUG}])&lt;{$TRAVIS.BUILDS.SUCCESS.PERCENT}</expression><name>Travis: Repo [{#SLUG}]: Percent of successful builds</name><event_name>Travis: Repo [{#SLUG}]: Percent of successful builds are &lt; {$TRAVIS.BUILDS.SUCCESS.PERCENT}%</event_name><priority>WARNING</priority><description>Low successful builds rate.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>1b2143c3e6934e0fae5589b4bb0063b5</uuid><name>Travis: Repo [{#SLUG}]: Builds passed</name><type>DEPENDENT</type><key>travis.repo.builds.passed[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Count of all passed builds in {#SLUG} repo.</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.parse(value).builds.filter(function (e){return e.state == &quot;passed&quot;}).length</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>d67070c3c7b44c5b8849a315f5f97c8b</uuid><name>Travis: Repo [{#SLUG}]: Builds total</name><type>DEPENDENT</type><key>travis.repo.builds.total[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Count of total builds in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds.length()</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>5fa0c9393f224efa8d6b42c3a0f12319</uuid><name>Travis: Repo [{#SLUG}]: Cache files</name><type>DEPENDENT</type><key>travis.repo.caches.files[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Count of cache files in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.caches.length()</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_caches[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>caches</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>6fe5a61db38e4a2da25314a18cf10a8e</uuid><name>Travis: Repo [{#SLUG}]: Cache size</name><type>DEPENDENT</type><key>travis.repo.caches.size[{#SLUG}]</key><delay>0</delay><history>7d</history><units>B</units><description>Total size of cache files in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.caches..size.sum()</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step></preprocessing><master_item><key>travis.repo.get_caches[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>caches</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>2705ff3b0b51434ba0469362aa91c67d</uuid><name>Travis: Repo [{#SLUG}]: Description</name><type>DEPENDENT</type><key>travis.repo.description[{#SLUG}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Description of Travis repo (git project description).</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.repositories[?(@.slug == &quot;{#SLUG}&quot;)].description.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>travis.get_repos</key></master_item><tags><tag><tag>component</tag><value>repo</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>ed33292bc0924b9c85cb54443d5aa999</uuid><name>Travis: Repo [{#SLUG}]: Get builds</name><type>HTTP_AGENT</type><key>travis.repo.get_builds[{#SLUG}]</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><description>Getting builds of {#SLUG} using Travis API.</description><url>https://{$TRAVIS.API.URL}/repo/{#ID}/builds</url><query_fields><query_field><name>limit</name><value>50</value></query_field></query_fields><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>builds</value></tag><tag><tag>component</tag><value>raw</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>2e0c047997624373a50001b8399b3d7c</uuid><name>Travis: Repo [{#SLUG}]: Get caches</name><type>HTTP_AGENT</type><key>travis.repo.get_caches[{#SLUG}]</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><description>Getting caches of {#SLUG} using Travis API.</description><url>https://{$TRAVIS.API.URL}/repo/{#ID}/caches</url><query_fields><query_field><name>limit</name><value>50</value></query_field></query_fields><headers><header><name>Travis-API-Version</name><value>3</value></header><header><name>Authorization</name><value>token {$TRAVIS.API.TOKEN}</value></header></headers><tags><tag><tag>component</tag><value>caches</value></tag><tag><tag>component</tag><value>raw</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>7391c532acf649259be018cbf499b565</uuid><name>Travis: Repo [{#SLUG}]: Last build duration</name><type>DEPENDENT</type><key>travis.repo.last_build.duration[{#SLUG}]</key><delay>0</delay><history>7d</history><units>s</units><description>Last build duration in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds[0].duration</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>last_build</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>fbcb7b4001b949889fc85f2499684aae</uuid><name>Travis: Repo [{#SLUG}]: Last build id</name><type>DEPENDENT</type><key>travis.repo.last_build.id[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Last build id in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds[0].id</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>last_build</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>d9dbe9ffeafa46569fce1ca5ba4897cf</uuid><name>Travis: Repo [{#SLUG}]: Last build number</name><type>DEPENDENT</type><key>travis.repo.last_build.number[{#SLUG}]</key><delay>0</delay><history>7d</history><description>Last build number in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds[0].number</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>last_build</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags></item_prototype><item_prototype><uuid>a081582913ca40ee93a6e5fb326c5c64</uuid><name>Travis: Repo [{#SLUG}]: Last build state</name><type>DEPENDENT</type><key>travis.repo.last_build.state[{#SLUG}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Last build state in {#SLUG} repo.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.builds[0].state</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>travis.repo.get_builds[{#SLUG}]</key></master_item><tags><tag><tag>component</tag><value>last_build</value></tag><tag><tag>repo</tag><value>{#SLUG}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>9b26f06ae3854aad8d2c0f4623bb1533</uuid><expression>find(/Travis CI by HTTP/travis.repo.last_build.state[{#SLUG}],,&quot;like&quot;,&quot;errored&quot;)=1</expression><name>Travis: Repo [{#SLUG}]: Last build status is 'errored'</name><priority>WARNING</priority><description>Last build status is errored.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>b13d986ae110458a80d74f32bb267ed7</uuid><name>Travis: Repo [{#SLUG}]: Builds</name><graph_items><graph_item><color>1A7C11</color><item><host>Travis CI by HTTP</host><key>travis.repo.builds.failed[{#SLUG}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Travis CI by HTTP</host><key>travis.repo.builds.passed[{#SLUG}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Travis CI by HTTP</host><key>travis.repo.builds.total[{#SLUG}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>travis.get_repos</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var result = [];

JSON.parse(value).repositories.forEach(function (e) {
    result.push({ '{#ID}': e.id, '{#SLUG}': e.slug });
});

return JSON.stringify(result)</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>service</value></tag><tag><tag>target</tag><value>travis</value></tag></tags><macros><macro><macro>{$TRAVIS.API.TOKEN}</macro><description>Travis API Token</description></macro><macro><macro>{$TRAVIS.API.URL}</macro><value>api.travis-ci.com</value><description>Travis API URL</description></macro><macro><macro>{$TRAVIS.BUILDS.SUCCESS.PERCENT}</macro><value>80</value><description>Percent of successful builds in the repo (for trigger expression)</description></macro></macros></template></templates></zabbix_export>
