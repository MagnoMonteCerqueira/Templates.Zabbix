<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:50Z</date><groups><group><uuid>36bff6c29af64692839d077febfc7079</uuid><name>Templates/Network devices</name></group></groups><templates><template><uuid>230fa9f7c1774821bbe6cdcbbba5cbc6</uuid><template>Morningstar TriStar PWM by SNMP</template><name>Morningstar TriStar PWM by SNMP</name><description>MIBs used:
TRISTAR

Template tooling version used: 0.41</description><groups><group><name>Templates/Network devices</name></group></groups><items><item><uuid>b76ef47ada0c43cfb50c6a80c8ca55e5</uuid><name>Battery: Battery Voltage discovery</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.30.0</snmp_oid><key>battery.voltage.discovery[batteryVoltage.0]</key><delay>15m</delay><history>0</history><value_type>FLOAT</value_type><units>V</units><description>MIB: TRISTAR
Description:Battery voltage
Scaling Factor:0.002950042724609375
Units:V
Range:[0.0, 80.0]
Modbus address:0x0008</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.002950042725</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>battery</value></tag><tag><tag>component</tag><value>discovery</value></tag><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>0c57da022cf8497e88f788cee1b3a0a6</uuid><name>Status: Control Mode</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.45.0</snmp_oid><key>control.mode[controlMode.0]</key><history>7d</history><value_type>FLOAT</value_type><description>MIB: TRISTAR
Description:Control Mode
Modbus address:0x001A

0: charge
1: loadControl
2: diversion
3: lighting</description><valuemap><name>TriStar PWM control mode</name></valuemap><tags><tag><tag>component</tag><value>status</value></tag></tags></item><item><uuid>25a576060f6948e59a855462b04c7276</uuid><name>Counter: Amp-hours</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.39.0</snmp_oid><key>counter.charge_amp_hours[ahResettable.0]</key><history>7d</history><value_type>FLOAT</value_type><units>Ah</units><description>MIB: TRISTAR
Description:Ah (Resettable)
Scaling Factor:0.1
Units:Ah
Range:[0.0, 50000.0]
Modbus addresses:H=0x0011 L=0x0012</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.1</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>counter</value></tag></tags></item><item><uuid>d2351af0b6244044949eba67a7f7b39c</uuid><name>Counter: KW-hours</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.49.0</snmp_oid><key>counter.charge_kw_hours[kilowattHours.0]</key><history>7d</history><value_type>FLOAT</value_type><units>!kWh</units><description>MIB: TRISTAR
Description:Kilowatt Hours
Scaling Factor:1.0
Units:kWh
Range:[0.0, 5000.0]
Modbus address:0x001E</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>counter</value></tag></tags></item><item><uuid>03c3397ac32b47499002b13e0735ec9b</uuid><name>Status: Alarms</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.42.0</snmp_oid><key>status.alarms[alarms.0]</key><history>1h</history><trends>0</trends><value_type>TEXT</value_type><description>MIB: TRISTAR
Description:Alarms
Modbus addresses:H=0x001D L=0x0017</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>var FIELDS = [
  'rtsOpen',
  'rtsShorted',
  'rtsDisconnected',
  'heatsinkTempSensorOpen',
  'heatsinkTempSensorShorted',
  'tristarHot',
  'currentLimit',
  'currentOffset',
  'batterySense',
  'batterySenseDisconnected',
  'uncalibrated',
  'rtsMiswire',
  'highVoltageDisconnect',
  'diversionLoadNearMax',
  'systemMiswire',
  'mosfetSOpen',
  'p12VoltageReferenceOff',
  'loadDisconnectState',
];

var flags = parseInt(value.replace(/\x20/g, ''), 16),
  result = [];

for (var i = 0, f = 1 &lt;&lt; 31 &gt;&gt;&gt; 0, l = FIELDS.length; i &lt; l; i++, f &gt;&gt;&gt;= 1) {
    if (flags &amp; f) {
        result.push(FIELDS[i]);
    }
}

return result.length ? result.join('\n') : 'No alarms';</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>status</value></tag></tags><triggers><trigger><uuid>121d47c6bbdd45bca261df2e01ea41c6</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;batterySense&quot;)=2</expression><name>Status: Device has &quot;batterySense&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>fd2d9290144143d39bb5a3cf0a2d261f</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;batterySenseDisconnected&quot;)=2</expression><name>Status: Device has &quot;batterySenseDisconnected&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>83d5b8d52acd4e21ac6d3a9cf05dcd04</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;currentLimit&quot;)=2</expression><name>Status: Device has &quot;currentLimit&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>d9529a4372d848038e6ee561d62e9f22</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;currentOffset&quot;)=2</expression><name>Status: Device has &quot;currentOffset&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>5f3983acc1cc417e860c1305b11c15ea</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;diversionLoadNearMax&quot;)=2</expression><name>Status: Device has &quot;diversionLoadNearMax&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>878e04df7e7b416bb0d2213b5dbb80e6</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;heatsinkTempSensorOpen&quot;)=2</expression><name>Status: Device has &quot;heatsinkTempSensorOpen&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>c642ed9496ce4322809c7142d32929a5</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;heatsinkTempSensorShorted&quot;)=2</expression><name>Status: Device has &quot;heatsinkTempSensorShorted&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>532421fe17bf4732a01a6990e34e649a</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;highVoltageDisconnect&quot;)=2</expression><name>Status: Device has &quot;highVoltageDisconnect&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>ae90e8034baf4b21906d56d18bfa4da8</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;loadDisconnectState&quot;)=2</expression><name>Status: Device has &quot;loadDisconnectState&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>8d8b721c6dee40499b29bee44b21589a</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;mosfetSOpen&quot;)=2</expression><name>Status: Device has &quot;mosfetSOpen&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>8cda8e5773de4583b9baa6a6e542e32c</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;p12VoltageReferenceOff&quot;)=2</expression><name>Status: Device has &quot;p12VoltageReferenceOff&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>1b6192b8ca364c229b35ba6de89ad56b</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;rtsDisconnected&quot;)=2</expression><name>Status: Device has &quot;rtsDisconnected&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>176de77a142d45a3ac39ea42989e209c</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;rtsMiswire&quot;)=2</expression><name>Status: Device has &quot;rtsMiswire&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>f63029eabc8e498ea7e6336d312ac169</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;rtsShorted&quot;)=2</expression><name>Status: Device has &quot;rtsShorted&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>480b69c1febf45a2971788c2f967c45d</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;systemMiswire&quot;)=2</expression><name>Status: Device has &quot;systemMiswire&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>4a287e4086c4458aaa3dc48bbb8ee219</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;tristarHot&quot;)=2</expression><name>Status: Device has &quot;tristarHot&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>de665482d2574730a3a839948dd730ea</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.alarms[alarms.0],#3,&quot;like&quot;,&quot;uncalibrated&quot;)=2</expression><name>Status: Device has &quot;uncalibrated&quot; alarm flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>9d0f4444f98c4ec082d35559e8fe9ac5</uuid><name>Status: Faults</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.43.0</snmp_oid><key>status.faults[faults.0]</key><history>1h</history><trends>0</trends><value_type>TEXT</value_type><description>MIB: TRISTAR
Description:Battery voltage
Scaling Factor:0.002950042724609375
Units:V
Range:[0.0, 80.0]
Modbus address:0x0008</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>var FIELDS = [
  'externalShort',
  'overcurrent',
  'mosfetSShorted',
  'softwareFault',
  'highVoltageDisconnect',
  'tristarHot',
  'dipSwitchChange',
  'customSettingsEdit',
  'reset',
  'systemMiswire',
  'rtsShorted',
  'rtsDisconnected',
];

var flags = parseInt(value.replace(/\x20/g, ''), 16),
  result = [];

for (var i = 0, f = 1 &lt;&lt; 31 &gt;&gt;&gt; 0, l = FIELDS.length; i &lt; l; i++, f &gt;&gt;&gt;= 1) {
    if (flags &amp; f) {
        result.push(FIELDS[i]);
    }
}

return result.length ? result.join('\n') : 'No faults';</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>status</value></tag></tags><triggers><trigger><uuid>514b041aebdd4ddb8ab2d1222c0ef295</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;customSettingsEdit&quot;)=2</expression><name>Status: Device has &quot;customSettingsEdit&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>1a40ce8b87f04ab1b4f30387e9ce2d9d</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;dipSwitchChange&quot;)=2</expression><name>Status: Device has &quot;dipSwitchChange&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>49b120c3933c43b1b7f5c77f7b359997</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;externalShort&quot;)=2</expression><name>Status: Device has &quot;externalShort&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>f063b9f717c44ab988db7ac95bfca68f</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;highVoltageDisconnect&quot;)=2</expression><name>Status: Device has &quot;highVoltageDisconnect&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>468716d748f1470cb764ce1af922164d</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;mosfetSShorted&quot;)=2</expression><name>Status: Device has &quot;mosfetSShorted&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>b6f65dfca421490eafff48991cdf1e3b</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;overcurrent&quot;)=2</expression><name>Status: Device has &quot;overcurrent&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>73561a5765694633b1dc0ef1b1f60fd4</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;reset&quot;)=2</expression><name>Status: Device has &quot;reset&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>d14c7d928f57448390c2b4c588a28c65</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;rtsDisconnected&quot;)=2</expression><name>Status: Device has &quot;rtsDisconnected&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>d94067598c234968b4929404067eff86</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;rtsShorted&quot;)=2</expression><name>Status: Device has &quot;rtsShorted&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>886b18bee7cd4f8eb454973e2d2ae59f</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;softwareFault&quot;)=2</expression><name>Status: Device has &quot;softwareFault&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>2e520cdafaaa4eefad5ebea71819c3a6</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;systemMiswire&quot;)=2</expression><name>Status: Device has &quot;systemMiswire&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>041be44e639d4d1eadb15230a678e278</uuid><expression>count(/Morningstar TriStar PWM by SNMP/status.faults[faults.0],#3,&quot;like&quot;,&quot;tristarHot&quot;)=2</expression><name>Status: Device has &quot;tristarHot&quot; faults flag</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>6903297e21e14aa8b5eed4eb0f7e1e01</uuid><name>Status: Uptime (hardware)</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.1.1.0</snmp_oid><key>status.hw.uptime</key><history>7d</history><units>uptime</units><description>The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>status</value></tag></tags></item><item><uuid>642eec19ba5d450186590e9f5bba36db</uuid><name>Status: Uptime (network)</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid><key>status.net.uptime</key><history>7d</history><units>uptime</units><description>The time (in hundredths of a second) since the network management portion of the system was last re-initialized.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>status</value></tag></tags><triggers><trigger><uuid>64aa2a79fe854def8e179a4d27790417</uuid><expression>nodata(/Morningstar TriStar PWM by SNMP/status.net.uptime,5m)=1</expression><name>Status: Failed to fetch data</name><event_name>Status: Failed to fetch data (or no data for 5m)</event_name><priority>WARNING</priority><description>Zabbix has not received data for items for the last 5 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>bc729e23973b4d9d97d694d884431e0b</uuid><name>Temperature: Battery</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.37.0</snmp_oid><key>temp.battery[batteryTemperature.0]</key><history>7d</history><value_type>FLOAT</value_type><units>C</units><description>MIB: TRISTAR
Description:Battery Temperature
Scaling Factor:1.0
Units:deg C
Range:[-40, 120]
Modbus address:0x000F</description><tags><tag><tag>component</tag><value>temperature</value></tag></tags><triggers><trigger><uuid>e759b90e2bf44bbb8e5efe5b9e458e40</uuid><expression>min(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&gt;{$BATTERY.TEMP.MAX.CRIT}</expression><name>Temperature: Critically high battery temperature</name><event_name>Temperature: Critically high battery temperature (over {$BATTERY.TEMP.MAX.CRIT}C for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>e57f335f657d45768509f139d31dcdae</uuid><expression>max(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&lt;{$BATTERY.TEMP.MIN.CRIT}</expression><name>Temperature: Critically low battery temperature</name><event_name>Temperature: Critically low battery temperature (below {$BATTERY.TEMP.MIN.WARN}C for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>7d1444dba9334e91ad425a6f2ff9fef9</uuid><expression>min(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&gt;{$BATTERY.TEMP.MAX.WARN}</expression><name>Temperature: High battery temperature</name><event_name>Temperature: High battery temperature (over {$BATTERY.TEMP.MAX.WARN}C for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Temperature: Critically high battery temperature</name><expression>min(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&gt;{$BATTERY.TEMP.MAX.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>14fe4a22b28c4d08a24da51a54e36e81</uuid><expression>max(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&lt;{$BATTERY.TEMP.MIN.WARN}</expression><name>Temperature: Low battery temperature</name><event_name>Temperature: Low battery temperature (below {$BATTERY.TEMP.MIN.WARN}C for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Temperature: Critically low battery temperature</name><expression>max(/Morningstar TriStar PWM by SNMP/temp.battery[batteryTemperature.0],5m)&lt;{$BATTERY.TEMP.MIN.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>a9a009058e99419dbb6cbef5b7797388</uuid><name>Temperature: Heatsink</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.36.0</snmp_oid><key>temp.heatsink[heatsinkTemperature.0]</key><history>7d</history><value_type>FLOAT</value_type><units>C</units><description>MIB: TRISTAR
Description:Heatsink Temperature
Scaling Factor:1.0
Units:deg C
Range:[-40, 120]
Modbus address:0x000E</description><tags><tag><tag>component</tag><value>temperature</value></tag></tags></item></items><discovery_rules><discovery_rule><uuid>0e06c296579f4b6aa40d69ebb62742b4</uuid><name>Battery voltage discovery</name><type>DEPENDENT</type><key>battery.voltage.discovery</key><delay>0</delay><description>Discovery for battery voltage triggers</description><item_prototypes><item_prototype><uuid>e1960caed8c44606bb684e28cdfac3c7</uuid><name>Battery: Voltage{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.30.0</snmp_oid><key>battery.voltage[batteryVoltage.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>V</units><description>MIB: TRISTAR
Description:Battery voltage
Scaling Factor:0.002950042724609375
Units:V
Range:[0.0, 80.0]
Modbus address:0x0008</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.002950042725</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>battery</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>156ec13d673b4a8aa02a87b1794cb722</uuid><expression>min(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&gt;{#VOLTAGE.MAX.CRIT}</expression><name>Battery: Critically high battery voltage</name><event_name>Battery: Critically high battery voltage (over {#VOLTAGE.MAX.CRIT}V for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype><trigger_prototype><uuid>5e4400321f4f45b39397c68a4ba54d8e</uuid><expression>max(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&lt;{#VOLTAGE.MIN.CRIT}</expression><name>Battery: Critically low battery voltage</name><event_name>Battery: Critically low battery voltage (below {#VOLTAGE.MIN.CRIT}V for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype><trigger_prototype><uuid>fa6502a4a0214f7f933e982182d21d6b</uuid><expression>min(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&gt;{#VOLTAGE.MAX.WARN}</expression><name>Battery: High battery voltage</name><event_name>Battery: High battery voltage (over {#VOLTAGE.MAX.WARN}V for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Battery: Critically high battery voltage</name><expression>min(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&gt;{#VOLTAGE.MAX.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype><trigger_prototype><uuid>a5275748f4c742ea8ab9efd266901e95</uuid><expression>max(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&lt;{#VOLTAGE.MIN.WARN}</expression><name>Battery: Low battery voltage</name><event_name>Battery: Low battery voltage (below {#VOLTAGE.MIN.WARN}V for 5m)</event_name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Battery: Critically low battery voltage</name><expression>max(/Morningstar TriStar PWM by SNMP/battery.voltage[batteryVoltage.0{#SINGLETON}],5m)&lt;{#VOLTAGE.MIN.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>bbdea967f4f34a299dd8d9bee43f2841</uuid><name>Battery: Voltage{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>battery.voltage[batteryVoltage.0{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>battery.voltage.discovery[batteryVoltage.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var v_range = [
      [[0, 18], [12, 15, 11.5, 15.5]],
      [[18, 36], [24, 30, 23, 31]],
      [[36, 99], [48, 60, 46, 62]],
  ],
  result = [];

for (var idx in v_range) {
    if (v_range[idx][0][0] &lt; value &amp;&amp; value &lt;= v_range[idx][0][1]) {
        result = [{
            '{#VOLTAGE.MIN.WARN}': parseInt({$VOLTAGE.MIN.WARN}) || v_range[idx][1][0],
            '{#VOLTAGE.MAX.WARN}': parseInt({$VOLTAGE.MAX.WARN}) || v_range[idx][1][1],
            '{#VOLTAGE.MIN.CRIT}': parseInt({$VOLTAGE.MIN.CRIT}) || v_range[idx][1][2],
            '{#VOLTAGE.MAX.CRIT}': parseInt({$VOLTAGE.MAX.CRIT}) || v_range[idx][1][3],
            '{#SINGLETON}': ''
        }];
        break;
    }
}

return JSON.stringify(result);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>58a500192e61490f97f33d5b5f6e972f</uuid><name>Charge mode discovery</name><type>DEPENDENT</type><key>controlmode.charge.discovery</key><delay>0</delay><lifetime>1h</lifetime><description>Discovery for device in charge mode</description><item_prototypes><item_prototype><uuid>f5d120bee1964f10853819d576ddb930</uuid><name>Array: Voltage{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.32.0</snmp_oid><key>array.voltage[arrayloadVoltage.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>V</units><description>MIB: TRISTAR
Description:Array/Load Voltage
Scaling Factor:0.00424652099609375
Units:V
Range:[0, 80]
Modbus address:0x000A</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.004246520996</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>array</value></tag></tags></item_prototype><item_prototype><uuid>b5d74de2e96440a5a00a4a4dffffbb26</uuid><name>Battery: Charge Current{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.33.0</snmp_oid><key>charge.current[chargeCurrent.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>A</units><description>MIB: TRISTAR
Description:Charge Current
Scaling Factor:0.002034515380859375
Units:A
Range:[0, 60]
Modbus address:0x000B</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.002034515381</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>battery</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>9886a05be4a74a82a208e3a5950f022d</uuid><name>Array: Voltage{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>array.voltage[arrayloadVoltage.0{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>cd64c57669314d2e9526fbc580034c81</uuid><name>Battery: Charge Current{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>charge.current[chargeCurrent.0{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>control.mode[controlMode.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(parseInt(value) === 0 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>02fbfa1dd59a4b9c87bb81da81312f54</uuid><name>Charge + Diversion mode discovery</name><type>DEPENDENT</type><key>controlmode.charge_diversion.discovery</key><delay>0</delay><lifetime>1h</lifetime><description>Discovery for device in charge and diversion modes</description><item_prototypes><item_prototype><uuid>e08b526bbb484753a11c99011d31d945</uuid><name>Battery: Charge State{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.46.0</snmp_oid><key>charge.state[controlState.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><description>MIB: TRISTAR
Description:Control State
Modbus address:0x001B</description><valuemap><name>TriStar PWM charge state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>battery</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>da21473ce79c42269cc24d3e470b7d07</uuid><expression>last(/Morningstar TriStar PWM by SNMP/charge.state[controlState.0{#SINGLETON}])={$CHARGE.STATE.CRIT}</expression><name>Battery: Device charge in critical state</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype><trigger_prototype><uuid>79a592050bc64c018cfa5c7b779fba02</uuid><expression>last(/Morningstar TriStar PWM by SNMP/charge.state[controlState.0{#SINGLETON}])={$CHARGE.STATE.WARN}</expression><name>Battery: Device charge in warning state</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Battery: Device charge in critical state</name><expression>last(/Morningstar TriStar PWM by SNMP/charge.state[controlState.0{#SINGLETON}])={$CHARGE.STATE.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>edd7d01d2523481293f3ac9e8f3c0a00</uuid><name>Battery: Target Voltage{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.38.0</snmp_oid><key>target.voltage[targetVoltage.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>V</units><description>MIB: TRISTAR
Description:Target Regulation Voltage
Scaling Factor:0.002950042724609375
Units:V
Range:[0.0, 80.0]
Modbus address:0x0010</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.002950042725</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>battery</value></tag></tags></item_prototype></item_prototypes><master_item><key>control.mode[controlMode.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var mode = parseInt(value);
return JSON.stringify((mode === 0 || mode === 2) ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>8c345c0134fe4d90af83292e557d7309</uuid><name>Diversion mode discovery</name><type>DEPENDENT</type><key>controlmode.diversion.discovery</key><delay>0</delay><lifetime>1h</lifetime><description>Discovery for device in diversion mode</description><item_prototypes><item_prototype><uuid>33e6b5a75c1e454cb7b7bc0b1426d1b9</uuid><name>Load: PWM Duty Cycle{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.48.0</snmp_oid><key>diversion.pwm_duty_cycle[pwmDutyCycle.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><description>MIB: TRISTAR
Description:PWM Duty Cycle
Scaling Factor:0.392156862745098
Units:%
Range:[0.0, 100.0]
Modbus address:0x001C</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.3921568627</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>load</value></tag></tags></item_prototype></item_prototypes><master_item><key>control.mode[controlMode.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(parseInt(value) === 2 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>54bfd7f730e64af89f937e9b1b6e4d79</uuid><name>Load mode discovery</name><type>DEPENDENT</type><key>controlmode.load.discovery</key><delay>0</delay><lifetime>1h</lifetime><description>Discovery for device in load mode</description><item_prototypes><item_prototype><uuid>6d42918b9c244f88a23ab1daf2a929ce</uuid><name>Load: State{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.47.0</snmp_oid><key>load.state[loadState.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><description>MIB: TRISTAR
Description:Load State
Modbus address:0x001B

0: Start
1: Normal
2: LvdWarning
3: Lvd
4: Fault
5: Disconnect
6: LvdWarning1
7: OverrideLvd
8: Equalize</description><valuemap><name>TriStar PWM load state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>load</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>9035e0a92d384a3c844b8a4d4ebd1eb9</uuid><expression>last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.CRIT:&quot;lvd&quot;} or last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.CRIT:&quot;fault&quot;}</expression><name>Load: Device load in critical state</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>HIGH</priority><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype><trigger_prototype><uuid>a2d13f97c4bd46bfab8e74a2f2a7df2e</uuid><expression>last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.WARN:&quot;lvdWarning&quot;}  or last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.WARN:&quot;override&quot;}</expression><name>Load: Device load in warning state</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Load: Device load in critical state</name><expression>last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.CRIT:&quot;lvd&quot;} or last(/Morningstar TriStar PWM by SNMP/load.state[loadState.0{#SINGLETON}])={$LOAD.STATE.CRIT:&quot;fault&quot;}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><master_item><key>control.mode[controlMode.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(parseInt(value) === 1 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>2e2e01f5c1db4224a97162382c77832c</uuid><name>Load + Diversion mode discovery</name><type>DEPENDENT</type><key>controlmode.load_diversion.discovery</key><delay>0</delay><lifetime>1h</lifetime><description>Discovery for device in load and diversion modes</description><item_prototypes><item_prototype><uuid>b6db019203cc41ca94dcbe54382fdaad</uuid><name>Load: Current{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.34.0</snmp_oid><key>load.current[loadCurrent.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>A</units><description>MIB: TRISTAR
Description:Load Current
Scaling Factor:0.00966400146484375
Units:A
Range:[0, 60]
Modbus address:0x000C</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.009664001465</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>load</value></tag></tags></item_prototype><item_prototype><uuid>f87ddb7d31d748c8917030ede731f37a</uuid><name>Load: Voltage{#SINGLETON}</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.33333.8.32.0</snmp_oid><key>load.voltage[arrayloadVoltage.0{#SINGLETON}]</key><history>7d</history><value_type>FLOAT</value_type><units>V</units><description>MIB: TRISTAR
Description:Array/Load Voltage
Scaling Factor:0.00424652099609375
Units:V
Range:[0, 80]
Modbus address:0x000A</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.004246520996</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>^(\d+)(\.\d{1,2})?</parameter><parameter>\1\2</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>load</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>91ee10b435144218ab3dfac8f6bf7bdd</uuid><name>Load: Current{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>load.current[loadCurrent.0{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>b4b595193e0c40a2b390f7ce6eefba4a</uuid><name>Load: Voltage{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>load.voltage[arrayloadVoltage.0{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>control.mode[controlMode.0]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var mode = parseInt(value);
return JSON.stringify((mode === 1 || mode === 2) ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>power</value></tag><tag><tag>target</tag><value>morningstar</value></tag></tags><macros><macro><macro>{$BATTERY.TEMP.MAX.CRIT}</macro><value>60</value><description>Battery high temperature critical value</description></macro><macro><macro>{$BATTERY.TEMP.MAX.WARN}</macro><value>45</value><description>Battery high temperature warning value</description></macro><macro><macro>{$BATTERY.TEMP.MIN.CRIT}</macro><value>-20</value><description>Battery low temperature critical value</description></macro><macro><macro>{$BATTERY.TEMP.MIN.WARN}</macro><value>0</value><description>Battery low temperature warning value</description></macro><macro><macro>{$CHARGE.STATE.CRIT}</macro><value>4</value><description>fault</description></macro><macro><macro>{$CHARGE.STATE.WARN}</macro><value>2</value><description>disconnect</description></macro><macro><macro>{$LOAD.STATE.CRIT:&quot;fault&quot;}</macro><value>4</value><description>fault</description></macro><macro><macro>{$LOAD.STATE.CRIT:&quot;lvd&quot;}</macro><value>3</value><description>lvd</description></macro><macro><macro>{$LOAD.STATE.WARN:&quot;disconnect&quot;}</macro><value>5</value><description>disconnect</description></macro><macro><macro>{$LOAD.STATE.WARN:&quot;lvdWarning&quot;}</macro><value>2</value><description>lvdWarning</description></macro><macro><macro>{$LOAD.STATE.WARN:&quot;override&quot;}</macro><value>7</value><description>override</description></macro><macro><macro>{$VOLTAGE.MAX.CRIT}</macro></macro><macro><macro>{$VOLTAGE.MAX.WARN}</macro></macro><macro><macro>{$VOLTAGE.MIN.CRIT}</macro></macro><macro><macro>{$VOLTAGE.MIN.WARN}</macro></macro></macros><valuemaps><valuemap><uuid>4985c4742d5844e7bc0aee5aeeacc436</uuid><name>TriStar PWM charge state</name><mappings><mapping><value>0</value><newvalue>Start</newvalue></mapping><mapping><value>1</value><newvalue>NightCheck</newvalue></mapping><mapping><value>2</value><newvalue>Disconnect</newvalue></mapping><mapping><value>3</value><newvalue>Night</newvalue></mapping><mapping><value>4</value><newvalue>Fault</newvalue></mapping><mapping><value>5</value><newvalue>Bulk</newvalue></mapping><mapping><value>6</value><newvalue>Absorption</newvalue></mapping><mapping><value>7</value><newvalue>Float</newvalue></mapping><mapping><value>8</value><newvalue>Equalize</newvalue></mapping></mappings></valuemap><valuemap><uuid>252c3fb63cc34bb1a36ae6e9cbe5880c</uuid><name>TriStar PWM control mode</name><mappings><mapping><value>0</value><newvalue>Charge</newvalue></mapping><mapping><value>1</value><newvalue>LoadControl</newvalue></mapping><mapping><value>2</value><newvalue>Diversion</newvalue></mapping><mapping><value>3</value><newvalue>Lighting</newvalue></mapping></mappings></valuemap><valuemap><uuid>735e1a0d990a4c449e59eeb402f3b40e</uuid><name>TriStar PWM load state</name><mappings><mapping><value>0</value><newvalue>Start</newvalue></mapping><mapping><value>1</value><newvalue>Normal</newvalue></mapping><mapping><value>2</value><newvalue>LvdWarning</newvalue></mapping><mapping><value>3</value><newvalue>Lvd</newvalue></mapping><mapping><value>4</value><newvalue>Fault</newvalue></mapping><mapping><value>5</value><newvalue>Disconnect</newvalue></mapping><mapping><value>6</value><newvalue>LvdWarning1</newvalue></mapping><mapping><value>7</value><newvalue>OverrideLvd</newvalue></mapping><mapping><value>8</value><newvalue>Equalize</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><triggers><trigger><uuid>f0549419f015448497cd7d15a2bf96fa</uuid><expression>(last(/Morningstar TriStar PWM by SNMP/status.hw.uptime)&gt;0 and last(/Morningstar TriStar PWM by SNMP/status.hw.uptime)&lt;10m) or (last(/Morningstar TriStar PWM by SNMP/status.hw.uptime)=0 and last(/Morningstar TriStar PWM by SNMP/status.net.uptime)&lt;10m)</expression><name>Status: Device has been restarted</name><event_name>Status: Device has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers><graphs><graph><uuid>ce3aa40eac5f4ee199ed214752304e19</uuid><name>Temperature: Battery/Heatsink</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Morningstar TriStar PWM by SNMP</host><key>temp.battery[batteryTemperature.0]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>2774A4</color><item><host>Morningstar TriStar PWM by SNMP</host><key>temp.heatsink[heatsinkTemperature.0]</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
