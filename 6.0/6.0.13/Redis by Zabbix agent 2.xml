<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:44Z</date><groups><group><uuid>748ad4d098d447d492bb935c907f652f</uuid><name>Templates/Databases</name></group></groups><templates><template><uuid>e111446745a1425b862f8727ae63bce4</uuid><template>Redis by Zabbix agent 2</template><name>Redis by Zabbix agent 2</name><description>Get Redis metrics from plugin for the New Zabbix Agent (zabbix-agent2).

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/389050-discussion-thread-for-official-zabbix-template-redis

Template tooling version used: 0.41</description><groups><group><name>Templates/Databases</name></group></groups><items><item><uuid>bc4989f098954259924cbee6717519a7</uuid><name>Redis: Blocked clients</name><type>DEPENDENT</type><key>redis.clients.blocked</key><delay>0</delay><history>7d</history><description>The number of connections waiting on a blocking call</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Clients.blocked_clients</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>6140e8ff18fe41c6b65165b0f5346c7b</uuid><name>Redis: Connected clients</name><type>DEPENDENT</type><key>redis.clients.connected</key><delay>0</delay><history>7d</history><description>The number of connected clients</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Clients.connected_clients</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>3f5d6532f403436c823e1461e49e54c2</uuid><name>Redis: Max input buffer</name><type>DEPENDENT</type><key>redis.clients.max_input_buffer</key><delay>0</delay><history>7d</history><description>The biggest input buffer among current client connections</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var clients = JSON.parse(value).Clients
return clients.client_recent_max_input_buffer || clients.client_biggest_input_buf</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>44788aa774e64fe685fe6496a9bea97d</uuid><name>Redis: Max output buffer</name><type>DEPENDENT</type><key>redis.clients.max_output_buffer</key><delay>0</delay><history>7d</history><description>The biggest output buffer among current client connections</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var clients = JSON.parse(value).Clients
return clients.client_recent_max_output_buffer || clients.client_longest_output_list</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>74f9fe26bdaf4a7bb86214bd7d500363</uuid><name>Redis: Cluster enabled</name><type>DEPENDENT</type><key>redis.cluster.enabled</key><delay>0</delay><history>7d</history><description>Indicate Redis cluster is enabled</description><valuemap><name>Redis flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Cluster.cluster_enabled</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>066486e3be25406185e624611eeb167a</uuid><name>Redis: Max clients</name><type>DEPENDENT</type><key>redis.config.maxclients</key><delay>0</delay><history>7d</history><description>Max number of connected clients at the same time.
Once the limit is reached Redis will close all the new connections sending an error &quot;max number of clients reached&quot;.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.maxclients</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>30m</parameter></parameters></step></preprocessing><master_item><key>redis.config[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>bf68f3ecc3544ef0af00889139caf313</uuid><name>Redis: Get config</name><key>redis.config[&quot;{$REDIS.CONN.URI}&quot;]</key><history>1h</history><trends>0</trends><value_type>TEXT</value_type><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>raw</value></tag></tags><triggers><trigger><uuid>819b379b51c34616820f86d21c703b27</uuid><expression>last(/Redis by Zabbix agent 2/redis.config[&quot;{$REDIS.CONN.URI}&quot;],#1)&lt;&gt;last(/Redis by Zabbix agent 2/redis.config[&quot;{$REDIS.CONN.URI}&quot;],#2) and length(last(/Redis by Zabbix agent 2/redis.config[&quot;{$REDIS.CONN.URI}&quot;]))&gt;0</expression><name>Redis: Configuration has changed</name><event_name>Redis: Version has changed (new version: {ITEM.VALUE})</event_name><priority>INFO</priority><description>Redis configuration has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>99d427f1f76a468c9878225abb8cebbd</uuid><name>Redis: CPU sys</name><type>DEPENDENT</type><key>redis.cpu.sys</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>System CPU consumed by the Redis server</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.CPU.used_cpu_sys</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>1bfce9a62c924510a9cac3b04320d838</uuid><name>Redis: CPU sys children</name><type>DEPENDENT</type><key>redis.cpu.sys_children</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>System CPU consumed by the background processes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.CPU.used_cpu_sys_children</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>83e7c9f5b8a24c949d72125671d6d39a</uuid><name>Redis: CPU user</name><type>DEPENDENT</type><key>redis.cpu.user</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>User CPU consumed by the Redis server</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.CPU.used_cpu_user</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>8bc18ca0c79d4a81811b600cf3fe8ddd</uuid><name>Redis: CPU user children</name><type>DEPENDENT</type><key>redis.cpu.user_children</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>User CPU consumed by the background processes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.CPU.used_cpu_user_children</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>720f146ffe7e481482e11db4b99634c8</uuid><name>Redis: Get info</name><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key><history>1h</history><trends>0</trends><value_type>TEXT</value_type><tags><tag><tag>component</tag><value>raw</value></tag></tags><triggers><trigger><uuid>0a5176877ba24df8b5d38c8cc544f0a8</uuid><expression>nodata(/Redis by Zabbix agent 2/redis.info[&quot;{$REDIS.CONN.URI}&quot;],30m)=1</expression><name>Redis: Failed to fetch info data</name><event_name>Redis: Failed to fetch info data (or no data for 30m)</event_name><priority>WARNING</priority><description>Zabbix has not received data for items for the last 30 minutes</description><manual_close>YES</manual_close><dependencies><dependency><name>Redis: Service is down</name><expression>last(/Redis by Zabbix agent 2/redis.ping[&quot;{$REDIS.CONN.URI}&quot;])=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>5fe2afa1c8ff434a876822ea0b290659</uuid><name>Redis: Memory fragmentation ratio</name><type>DEPENDENT</type><key>redis.memory.fragmentation_ratio</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><description>This ratio is an indication of memory mapping efficiency:
  — Value over 1.0 indicate that memory fragmentation is very likely. Consider restarting the Redis server so the operating system can recover fragmented memory, especially with a ratio over 1.5.
  — Value under 1.0 indicate that Redis likely has insufficient memory available. Consider optimizing memory usage or adding more RAM.

Note: If your peak memory usage is much higher than your current memory usage, the memory fragmentation ratio may be unreliable.

https://redis.io/topics/memory-optimization</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_fragmentation_ratio</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags><triggers><trigger><uuid>629531ff1ebc4bdbb1f277848c436230</uuid><expression>min(/Redis by Zabbix agent 2/redis.memory.fragmentation_ratio,15m)&gt;{$REDIS.MEM.FRAG_RATIO.MAX.WARN}</expression><name>Redis: Memory fragmentation ratio is too high</name><event_name>Redis: Memory fragmentation ratio is too high (over {$REDIS.MEM.FRAG_RATIO.MAX.WARN} in 15m)</event_name><priority>WARNING</priority><description>This ratio is an indication of memory mapping efficiency:
  — Value over 1.0 indicate that memory fragmentation is very likely. Consider restarting the Redis server so the operating system can recover fragmented memory, especially with a ratio over 1.5.
  — Value under 1.0 indicate that Redis likely has insufficient memory available. Consider optimizing memory usage or adding more RAM.

Note: If your peak memory usage is much higher than your current memory usage, the memory fragmentation ratio may be unreliable.

https://redis.io/topics/memory-optimization</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>5fef1d341a974cc5aa164e550aff1537</uuid><name>Redis: Memory used</name><type>DEPENDENT</type><key>redis.memory.used_memory</key><delay>0</delay><history>7d</history><units>B</units><description>Total number of bytes allocated by Redis using its allocator</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>de026d98fd9146b78f9a0be2c0b9de10</uuid><name>Redis: Memory used Lua</name><type>DEPENDENT</type><key>redis.memory.used_memory_lua</key><delay>0</delay><history>7d</history><units>B</units><description>Amount of memory used by the Lua engine</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_lua</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>d3f05ab1c0404f01875afb964d9820e2</uuid><name>Redis: Memory used peak</name><type>DEPENDENT</type><key>redis.memory.used_memory_peak</key><delay>0</delay><history>7d</history><units>B</units><description>Peak memory consumed by Redis (in bytes)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_peak</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>ef06ae3dd4784702ad0d281da94c294d</uuid><name>Redis: Memory used RSS</name><type>DEPENDENT</type><key>redis.memory.used_memory_rss</key><delay>0</delay><history>7d</history><units>B</units><description>Number of bytes that Redis allocated as seen by the operating system</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_rss</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>86501872c68c4e9fa4b55aaacebb3c3c</uuid><name>Redis: AOF current rewrite time sec</name><type>DEPENDENT</type><key>redis.persistence.aof_current_rewrite_time_sec</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Duration of the on-going AOF rewrite operation if any</description><valuemap><name>Redis bgsave time</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_current_rewrite_time_sec</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>d298e1ce9aa1481391a48754e2a648b0</uuid><name>Redis: AOF enabled</name><type>DEPENDENT</type><key>redis.persistence.aof_enabled</key><delay>0</delay><history>7d</history><description>Flag indicating AOF logging is activated</description><valuemap><name>Redis flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_enabled</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>e2e62cc728c04169afeb051000042e28</uuid><name>Redis: AOF last bgrewrite status</name><type>DEPENDENT</type><key>redis.persistence.aof_last_bgrewrite_status</key><delay>0</delay><history>7d</history><description>Status of the last AOF rewrite operation</description><valuemap><name>Redis bgwrite status</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_last_bgrewrite_status</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>5a14501541c44699b81e3a89cc93d628</uuid><name>Redis: AOF last rewrite time sec</name><type>DEPENDENT</type><key>redis.persistence.aof_last_rewrite_time_sec</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Duration of the last AOF rewrite</description><valuemap><name>Redis bgsave time</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_last_rewrite_time_sec</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>2cfd96e347d341219238bdaf65f1846d</uuid><name>Redis: AOF last write status</name><type>DEPENDENT</type><key>redis.persistence.aof_last_write_status</key><delay>0</delay><history>7d</history><description>Status of the last write operation to the AOF</description><valuemap><name>Redis bgwrite status</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_last_write_status</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags><triggers><trigger><uuid>324e0e8fac514ba99d67aea7eb0ddf7c</uuid><expression>last(/Redis by Zabbix agent 2/redis.persistence.aof_last_write_status)=0</expression><name>Redis: Last AOF write operation failed</name><priority>WARNING</priority><description>Detailed information about persistence: https://redis.io/topics/persistence</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>3f4866909425447a828600e9b44ace5b</uuid><name>Redis: AOF rewrite in progress</name><type>DEPENDENT</type><key>redis.persistence.aof_rewrite_in_progress</key><delay>0</delay><history>7d</history><description>Flag indicating a AOF rewrite operation is on-going</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_rewrite_in_progress</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>83d243cc46304694954e08c0b03a3527</uuid><name>Redis: AOF rewrite scheduled</name><type>DEPENDENT</type><key>redis.persistence.aof_rewrite_scheduled</key><delay>0</delay><history>7d</history><description>Flag indicating an AOF rewrite operation will be scheduled once the on-going RDB save is complete</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_rewrite_scheduled</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>90df2d442dc049d690044b92e0888c31</uuid><name>Redis: Dump loading</name><type>DEPENDENT</type><key>redis.persistence.loading</key><delay>0</delay><history>7d</history><description>Flag indicating if the load of a dump file is on-going</description><valuemap><name>Redis flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.loading</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>5b1ecad187764429a22cbeb69afa3a28</uuid><name>Redis: RDB bgsave in progress</name><type>DEPENDENT</type><key>redis.persistence.rdb_bgsave_in_progress</key><delay>0</delay><history>7d</history><description>&quot;1&quot; if bgsave is in progress and &quot;0&quot; otherwise</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_bgsave_in_progress</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>ea673953a3014dc091ec62a20ee53945</uuid><name>Redis: RDB changes since last save</name><type>DEPENDENT</type><key>redis.persistence.rdb_changes_since_last_save</key><delay>0</delay><history>7d</history><description>Number of changes since the last background save</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_changes_since_last_save</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>d8c4d8fceeb5482a951999eedd350f73</uuid><name>Redis: RDB current bgsave time sec</name><type>DEPENDENT</type><key>redis.persistence.rdb_current_bgsave_time_sec</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Duration of the on-going RDB save operation if any</description><valuemap><name>Redis bgsave time</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_current_bgsave_time_sec</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>e25772b422314949a564f219d6f725bc</uuid><name>Redis: RDB last bgsave status</name><type>DEPENDENT</type><key>redis.persistence.rdb_last_bgsave_status</key><delay>0</delay><history>7d</history><description>Status of the last RDB save operation</description><valuemap><name>Redis bgwrite status</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_last_bgsave_status</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags><triggers><trigger><uuid>44e427ae3ce7419dbac3059be11e31ef</uuid><expression>last(/Redis by Zabbix agent 2/redis.persistence.rdb_last_bgsave_status)=0</expression><name>Redis: Last RDB save operation failed</name><priority>WARNING</priority><description>Detailed information about persistence: https://redis.io/topics/persistence</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>f506941104e34db08c0d8f5a6d9d9710</uuid><name>Redis: RDB last bgsave time sec</name><type>DEPENDENT</type><key>redis.persistence.rdb_last_bgsave_time_sec</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Duration of the last bg_save operation</description><valuemap><name>Redis bgsave time</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_last_bgsave_time_sec</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>04e1c21ca49246d7aba062cd001a8c00</uuid><name>Redis: RDB last save time</name><type>DEPENDENT</type><key>redis.persistence.rdb_last_save_time</key><delay>0</delay><history>7d</history><description>Epoch-based timestamp of last successful RDB save</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_last_save_time</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item><item><uuid>5949fadcbe2b405baff0668e81627278</uuid><name>Redis: Ping</name><key>redis.ping[&quot;{$REDIS.CONN.URI}&quot;]</key><history>7h</history><valuemap><name>Service state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>10m</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>application</value></tag><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>62353f9ed6204b70ba270827c3922244</uuid><expression>last(/Redis by Zabbix agent 2/redis.ping[&quot;{$REDIS.CONN.URI}&quot;])=0</expression><name>Redis: Service is down</name><priority>AVERAGE</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>6680a01fb98c4504bed6458ba6cde146</uuid><name>Redis: Connected slaves</name><type>DEPENDENT</type><key>redis.replication.connected_slaves</key><delay>0</delay><history>7d</history><description>Number of connected slaves</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.connected_slaves</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags><triggers><trigger><uuid>6d213088211a4bb38ff97b59113dccd9</uuid><expression>last(/Redis by Zabbix agent 2/redis.replication.connected_slaves,#1)&lt;&gt;last(/Redis by Zabbix agent 2/redis.replication.connected_slaves,#2)</expression><recovery_mode>NONE</recovery_mode><name>Redis: Number of slaves has changed</name><priority>INFO</priority><description>Redis number of slaves has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>37fa1595299c4a3ea091039f4db47cf3</uuid><name>Redis: Master replication offset</name><type>DEPENDENT</type><key>redis.replication.master_repl_offset</key><delay>0</delay><history>7d</history><units>B</units><description>Replication offset reported by the master</description><valuemap><name>Redis repl offset</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_repl_offset</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>cf067374339e44e5a4ba2cd70d4fec3a</uuid><name>Redis: Replication backlog active</name><type>DEPENDENT</type><key>redis.replication.repl_backlog_active</key><delay>0</delay><history>7d</history><description>Flag indicating replication backlog is active</description><valuemap><name>Redis flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.repl_backlog_active</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>b4ea8df4d73144f99ffd4f5f6e6359ef</uuid><name>Redis: Replication backlog first byte offset</name><type>DEPENDENT</type><key>redis.replication.repl_backlog_first_byte_offset</key><delay>0</delay><history>7d</history><units>B</units><description>The master offset of the replication backlog buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.repl_backlog_first_byte_offset</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>081cd9df926d48cea7e5c68f7761ddb1</uuid><name>Redis: Replication backlog history length</name><type>DEPENDENT</type><key>redis.replication.repl_backlog_histlen</key><delay>0</delay><history>7d</history><description>Amount of data in the backlog sync buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.repl_backlog_histlen</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>a437a46aafe3413884975fc480091bb5</uuid><name>Redis: Replication backlog size</name><type>DEPENDENT</type><key>redis.replication.repl_backlog_size</key><delay>0</delay><history>7d</history><units>B</units><description>Total size in bytes of the replication backlog buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.repl_backlog_size</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>d8371457697744159aabc3bdece4af2e</uuid><name>Redis: Replication role</name><type>DEPENDENT</type><key>redis.replication.role</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Value is &quot;master&quot; if the instance is replica of no one, or &quot;slave&quot; if the instance is a replica of some master instance. Note that a replica can be master of another replica (chained replication).</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.role</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags><triggers><trigger><uuid>d24f7aabefb345e791b3bb276f30ac8c</uuid><expression>last(/Redis by Zabbix agent 2/redis.replication.role,#1)&lt;&gt;last(/Redis by Zabbix agent 2/redis.replication.role,#2) and length(last(/Redis by Zabbix agent 2/redis.replication.role))&gt;0</expression><recovery_mode>NONE</recovery_mode><name>Redis: Replication role has changed</name><event_name>Redis: Replication role has changed (new role: {ITEM.VALUE})</event_name><priority>WARNING</priority><description>Redis replication role has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>8a08d4f30b78448986b9fd94cafd398c</uuid><name>Redis: Process id</name><type>DEPENDENT</type><key>redis.server.process_id</key><delay>0</delay><history>7d</history><description>PID of the server process</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.process_id</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>os</value></tag></tags></item><item><uuid>b2deab550d984b3e93741c53019e7f89</uuid><name>Redis: Redis mode</name><type>DEPENDENT</type><key>redis.server.redis_mode</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>The server's mode (&quot;standalone&quot;, &quot;sentinel&quot; or &quot;cluster&quot;)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.redis_mode</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>9699d6a6563b498ea73f88a4c1dd9cf1</uuid><name>Redis: Redis version</name><type>DEPENDENT</type><key>redis.server.redis_version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Version of the Redis server</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.redis_version</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>6e307546b26344deb83f2295c90e9a33</uuid><expression>last(/Redis by Zabbix agent 2/redis.server.redis_version,#1)&lt;&gt;last(/Redis by Zabbix agent 2/redis.server.redis_version,#2) and length(last(/Redis by Zabbix agent 2/redis.server.redis_version))&gt;0</expression><name>Redis: Version has changed</name><event_name>Redis: Version has changed (new version: {ITEM.VALUE})</event_name><priority>INFO</priority><description>Redis version has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>8c28e54f9e5d40d6b69c1f5b39b85054</uuid><name>Redis: TCP port</name><type>DEPENDENT</type><key>redis.server.tcp_port</key><delay>0</delay><history>7d</history><description>TCP/IP listen port</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.tcp_port</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>af225edd976146f2920bc05afb703f14</uuid><name>Redis: Uptime</name><type>DEPENDENT</type><key>redis.server.uptime</key><delay>0</delay><history>7d</history><units>s</units><description>Number of seconds since Redis server start</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.uptime_in_seconds</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>4961e91eed2a4e83899d135315748b0e</uuid><expression>last(/Redis by Zabbix agent 2/redis.server.uptime)&lt;10m</expression><name>Redis: has been restarted</name><event_name>Redis: has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>51a65fa1d27e4fcd915c5019687e7bc9</uuid><name>Redis: Slowlog entries per second</name><key>redis.slowlog.count[&quot;{$REDIS.CONN.URI}&quot;]</key><history>7d</history><preprocessing><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>37fb0255e49c42c8913e56fe4aaa1d14</uuid><expression>min(/Redis by Zabbix agent 2/redis.slowlog.count[&quot;{$REDIS.CONN.URI}&quot;],5m)&gt;{$REDIS.SLOWLOG.COUNT.MAX.WARN}</expression><name>Redis: Too many entries in the slowlog</name><event_name>Redis: Too many entries in the slowlog (over {$REDIS.SLOWLOG.COUNT.MAX.WARN} per second in 5m)</event_name><priority>INFO</priority><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>eca69284ac8e4ae3a7e965b6549e9343</uuid><name>Redis: Evicted keys</name><type>DEPENDENT</type><key>redis.stats.evicted_keys</key><delay>0</delay><history>7d</history><description>Number of evicted keys due to maxmemory limit</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.evicted_keys</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item><item><uuid>0a77355cfba348bb8884d2405892ed5d</uuid><name>Redis: Expired keys</name><type>DEPENDENT</type><key>redis.stats.expired_keys</key><delay>0</delay><history>7d</history><description>Total number of key expiration events</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.expired_keys</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item><item><uuid>5841b6f2a76b432080029367e7008cd1</uuid><name>Redis: Instantaneous input bytes per second</name><type>DEPENDENT</type><key>redis.stats.instantaneous_input.rate</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>Bps</units><description>The network's read rate per second in KB/sec</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.instantaneous_input_kbps</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>3552b285d7ca41f796c1838e268a92c1</uuid><name>Redis: Instantaneous operations per sec</name><type>DEPENDENT</type><key>redis.stats.instantaneous_ops.rate</key><delay>0</delay><history>7d</history><description>Number of commands processed per second</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.instantaneous_ops_per_sec</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag></tags></item><item><uuid>86c05ed58e8448e9b7307a3c82e182af</uuid><name>Redis: Instantaneous output bytes per second</name><type>DEPENDENT</type><key>redis.stats.instantaneous_output.rate</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>Bps</units><description>The network's write rate per second in KB/sec</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.instantaneous_output_kbps</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>66d30a422e704174ae7700e1dd006aa1</uuid><name>Redis: Keyspace hits</name><type>DEPENDENT</type><key>redis.stats.keyspace_hits</key><delay>0</delay><history>7d</history><description>Number of successful lookup of keys in the main dictionary</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.keyspace_hits</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item><item><uuid>e24da63a83dc4223bed35cf80fc22300</uuid><name>Redis: Keyspace misses</name><type>DEPENDENT</type><key>redis.stats.keyspace_misses</key><delay>0</delay><history>7d</history><description>Number of failed lookup of keys in the main dictionary</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.keyspace_misses</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item><item><uuid>1f11810f06d44e498a895c516f902f95</uuid><name>Redis: Latest fork usec</name><type>DEPENDENT</type><key>redis.stats.latest_fork_usec</key><delay>0</delay><history>7d</history><units>s</units><description>Duration of the latest fork operation in microseconds</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.latest_fork_usec</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1.0E-5</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag></tags></item><item><uuid>2662dfd3524749998306f1d7afe33019</uuid><name>Redis: Migrate cached sockets</name><type>DEPENDENT</type><key>redis.stats.migrate_cached_sockets</key><delay>0</delay><history>7d</history><description>The number of sockets open for MIGRATE purposes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.migrate_cached_sockets</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>186e6bda0a0e463bb8218a58f227ff2b</uuid><name>Redis: Pubsub channels</name><type>DEPENDENT</type><key>redis.stats.pubsub_channels</key><delay>0</delay><history>7d</history><description>Global number of pub/sub channels with client subscriptions</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.pubsub_channels</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>subscribes</value></tag></tags></item><item><uuid>1e0711a2b40e4fea88c0c57a1f6d2b30</uuid><name>Redis: Pubsub patterns</name><type>DEPENDENT</type><key>redis.stats.pubsub_patterns</key><delay>0</delay><history>7d</history><description>Global number of pub/sub pattern with client subscriptions</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.pubsub_patterns</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>subscribes</value></tag></tags></item><item><uuid>65135267c836435d872325a7129e5857</uuid><name>Redis: Rejected connections</name><type>DEPENDENT</type><key>redis.stats.rejected_connections</key><delay>0</delay><history>7d</history><description>Number of connections rejected because of maxclients limit</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.rejected_connections</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags><triggers><trigger><uuid>5bf0680529ce496b8fe419e2732c69d1</uuid><expression>last(/Redis by Zabbix agent 2/redis.stats.rejected_connections)&gt;0</expression><name>Redis: Connections are rejected</name><priority>HIGH</priority><description>The number of connections has reached the value of &quot;maxclients&quot;.

https://redis.io/topics/clients</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>37135fd8b7e94c41bc21e802f21baeb4</uuid><name>Redis: Sync full</name><type>DEPENDENT</type><key>redis.stats.sync_full</key><delay>0</delay><history>7d</history><description>The number of full resyncs with replicas</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.sync_full</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>cb5b6380b164419280fdcd98077c5d8f</uuid><name>Redis: Sync partial err</name><type>DEPENDENT</type><key>redis.stats.sync_partial_err</key><delay>0</delay><history>7d</history><description>The number of denied partial resync requests</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.sync_partial_err</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>231560fd350e4b5096b242dddecd7c8b</uuid><name>Redis: Sync partial ok</name><type>DEPENDENT</type><key>redis.stats.sync_partial_ok</key><delay>0</delay><history>7d</history><description>The number of accepted partial resync requests</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.sync_partial_ok</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item><item><uuid>278ff045f367443380fcd594dba77d53</uuid><name>Redis: Total commands processed</name><type>DEPENDENT</type><key>redis.stats.total_commands_processed</key><delay>0</delay><history>7d</history><description>Total number of commands processed by the server</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.total_commands_processed</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>commands</value></tag></tags></item><item><uuid>c9afbbbec8a44926887389a590f1df91</uuid><name>Redis: Total connections received</name><type>DEPENDENT</type><key>redis.stats.total_connections_received</key><delay>0</delay><history>7d</history><description>Total number of connections accepted by the server</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.total_connections_received</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>838cb6cbfd8a42e1b9cfa4a60670324a</uuid><name>Redis: Total net input bytes</name><type>DEPENDENT</type><key>redis.stats.total_net_input_bytes</key><delay>0</delay><history>7d</history><units>B</units><description>The total number of bytes read from the network</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.total_net_input_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>762f6b06eb094de896d265fcf3f9a603</uuid><name>Redis: Total net output bytes</name><type>DEPENDENT</type><key>redis.stats.total_net_output_bytes</key><delay>0</delay><history>7d</history><units>B</units><description>The total number of bytes written to the network</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.total_net_output_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item></items><discovery_rules><discovery_rule><uuid>527a3526b0e64225bb3dcf2dbbfbda5b</uuid><name>Process metrics discovery</name><key>proc.num[&quot;{$REDIS.LLD.PROCESS_NAME}&quot;]</key><delay>1h</delay><description>Collect metrics by Zabbix agent if it exists</description><item_prototypes><item_prototype><uuid>376a8861723c45c3bde08573c7ab2ed9</uuid><name>Redis: CPU utilization</name><key>proc.cpu.util[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Process CPU utilization percentage.</description><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item_prototype><item_prototype><uuid>9d68e00f913a4faea5a334d361f324b0</uuid><name>Redis: Memory usage (rss)</name><key>proc.mem[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;,,,,rss]</key><history>7d</history><units>B</units><description>Resident set size memory used by process in bytes.</description><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>325cabaa95994a58bf30992586ba7544</uuid><name>Redis: Memory usage (vsize)</name><key>proc.mem[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;,,,,vsize]</key><history>7d</history><units>B</units><description>Virtual memory size used by process in bytes.</description><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>d9ccc25e5d1b4f05b22354a7672b518c</uuid><name>Redis: Number of processes running</name><key>proc.num[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;]</key><history>7d</history><tags><tag><tag>component</tag><value>system</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>590bd23c52b74dd7951dcf74903ac2ed</uuid><expression>last(/Redis by Zabbix agent 2/proc.num[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;])=0</expression><name>Redis: Process is not running</name><priority>HIGH</priority><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>e26f8c31c3654febbeda2ffb97438c36</uuid><name>Redis: Memory usage{#SINGLETON}</name><graph_items><graph_item><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>proc.mem[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;,,,,vsize]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>proc.mem[&quot;{$REDIS.PROCESS_NAME}{#SINGLETON}&quot;,,,,rss]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(value &gt; 0 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>0f7966f47fda4b41856163ffb438bf27</uuid><name>Keyspace discovery</name><type>DEPENDENT</type><key>redis.keyspace.discovery</key><delay>0</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#DB}</macro><value>{$REDIS.LLD.FILTER.DB.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#DB}</macro><value>{$REDIS.LLD.FILTER.DB.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><description>Individual keyspace metrics</description><item_prototypes><item_prototype><uuid>38fcb8524f1b4f50a4945333fc6c7536</uuid><name>DB {#DB}: Average TTL</name><type>DEPENDENT</type><key>redis.db.avg_ttl[&quot;{#DB}&quot;]</key><delay>0</delay><history>7d</history><units>s</units><description>Average TTL</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Keyspace[&quot;{#DB}&quot;].avg_ttl</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag><tag><tag>database</tag><value>{#DB}</value></tag></tags></item_prototype><item_prototype><uuid>bde12d459b7b4e23a22ed6188b57bb25</uuid><name>DB {#DB}: Expires</name><type>DEPENDENT</type><key>redis.db.expires[&quot;{#DB}&quot;]</key><delay>0</delay><history>7d</history><description>Number of keys with an expiration</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Keyspace[&quot;{#DB}&quot;].expires</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag><tag><tag>database</tag><value>{#DB}</value></tag></tags></item_prototype><item_prototype><uuid>2bae0d2f8b8348bcad207b61ef6286c3</uuid><name>DB {#DB}: Keys</name><type>DEPENDENT</type><key>redis.db.keys[&quot;{#DB}&quot;]</key><delay>0</delay><history>7d</history><description>Total number of keys</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Keyspace[&quot;{#DB}&quot;].keys</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag><tag><tag>database</tag><value>{#DB}</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>3271f3a143dc43f38a674b6cbae8cd0d</uuid><name>DB {#DB}: Keys</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.db.keys[&quot;{#DB}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.db.expires[&quot;{#DB}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(Object.keys(JSON.parse(value).Keyspace)
  .map(function (v){return {&quot;{#DB}&quot;: v}}));</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>a3fb00d4bbc24779b6c7223b867f4d2c</uuid><name>Version 4+ metrics discovery</name><type>DEPENDENT</type><key>redis.metrics.v4.discovery</key><delay>0</delay><description>Additional metrics for versions 4+</description><item_prototypes><item_prototype><uuid>b7e8d996335f41158b3c6a8961319db0</uuid><name>Redis: Active defrag running{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.active_defrag_running[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Flag indicating if active defragmentation is active</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.active_defrag_running</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>2065e38cd7e5417abfd0b80116b0d77b</uuid><name>Redis: Lazyfree pending objects{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.lazyfree_pending_objects[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>The number of objects waiting to be freed (as a result of calling UNLINK, or FLUSHDB and FLUSHALL with the ASYNC option)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.lazyfree_pending_objects</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>2c5c700b53374dac86d805384b6bc9b0</uuid><name>Redis: Max memory{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.maxmemory[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>Maximum amount of memory allocated to the Redisdb system</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.maxmemory</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>0f094be6d0fa4afda3aa7916fac4d3a3</uuid><name>Redis: Max memory policy{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.maxmemory_policy[{#SINGLETON}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>The value of the maxmemory-policy configuration directive</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.maxmemory_policy</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>bf804c6ee44640168e15ca62803b7f10</uuid><name>Redis: Total system memory{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.total_system_memory[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The total amount of memory that the Redis host has</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.total_system_memory</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>1c0e0355d5cd429f9a914fb67f29e366</uuid><name>Redis: Memory used dataset{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_dataset[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The size in bytes of the dataset</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_dataset</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>4e5937420b3843568d9f36b40c0a3c28</uuid><name>Redis: Memory used dataset %{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_dataset_perc[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>The percentage of used_memory_dataset out of the net memory usage (used_memory minus used_memory_startup)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_dataset_perc</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>(.+)%</parameter><parameter>\1</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>e085382c18f3473f9d2271024cd61e93</uuid><name>Redis: Memory used overhead{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_overhead[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The sum in bytes of all overheads that the server allocated for managing its internal data structures</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_overhead</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>5da63141e8b145a38954736806602b4a</uuid><name>Redis: Memory used peak %{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_peak_perc[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>The percentage of used_memory_peak out of used_memory</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_peak_perc</parameter></parameters></step><step><type>REGEX</type><parameters><parameter>(.+)%</parameter><parameter>\1</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>dabd2918056b4b999f4b30bd8e64e8a1</uuid><name>Redis: Memory used startup{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_startup[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>Initial amount of memory consumed by Redis at startup in bytes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_startup</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>9da41967290742cb8daa2f69ac1d6966</uuid><name>Redis: AOF last CoW size{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_last_cow_size[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The size in bytes of copy-on-write allocations during the last AOF rewrite operation</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_last_cow_size</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>768839c72e3f4be89e30dd0d140c9d03</uuid><name>Redis: RDB last CoW size{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.rdb_last_cow_size[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The size in bytes of copy-on-write allocations during the last RDB save operation</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.rdb_last_cow_size</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>bead155d26054d0487622f29b86dcd2b</uuid><name>Redis: Replication second offset{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.second_repl_offset[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>B</units><description>Offset up to which replication IDs are accepted</description><valuemap><name>Redis repl offset</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.second_repl_offset</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>14d062351a114e8eafa2b2b889317903</uuid><name>Redis: Executable path{#SINGLETON}</name><type>DEPENDENT</type><key>redis.server.executable[{#SINGLETON}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>The path to the server's executable</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.executable</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item_prototype><item_prototype><uuid>5458542148954618a6d22df1effffe57</uuid><name>Redis: Active defrag hits{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.active_defrag_hits[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of value reallocations performed by active the defragmentation process</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.active_defrag_hits</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>f8b424743dd24691be2bd07d5538b16a</uuid><name>Redis: Active defrag key hits{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.active_defrag_key_hits[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of keys that were actively defragmented</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.active_defrag_key_hits</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item_prototype><item_prototype><uuid>8aba0ad8d7314b6b8cf1e80cb0afb618</uuid><name>Redis: Active defrag key misses{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.active_defrag_key_misses[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of keys that were skipped by the active defragmentation process</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.active_defrag_key_misses</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item_prototype><item_prototype><uuid>3c20cca8b4a84c619d90d64a34386dfa</uuid><name>Redis: Active defrag misses{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.active_defrag_misses[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of aborted value reallocations started by the active defragmentation process</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.active_defrag_misses</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>a34f4e33a0cb4381b5c3b7a507e90bee</uuid><name>Redis: Expired stale %{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.expired_stale_perc[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.expired_stale_perc</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item_prototype><item_prototype><uuid>81667ae170b04ac0980e122566c5ed8e</uuid><name>Redis: Expired time cap reached count{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.expired_time_cap_reached_count[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.expired_time_cap_reached_count</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>cycles</value></tag></tags></item_prototype><item_prototype><uuid>93bf8753d6b242f1b8d2288fb926e01b</uuid><name>Redis: Slave expires tracked keys{#SINGLETON}</name><type>DEPENDENT</type><key>redis.stats.slave_expires_tracked_keys[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>The number of keys tracked for expiry purposes (applicable only to writable replicas)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Stats.slave_expires_tracked_keys</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>keys</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>0c3560588d2d421c843c006ef5fa4645</uuid><expression>last(/Redis by Zabbix agent 2/redis.memory.used_memory)/min(/Redis by Zabbix agent 2/redis.memory.maxmemory[{#SINGLETON}],5m)*100&gt;{$REDIS.MEM.PUSED.MAX.WARN}</expression><name>Redis: Memory usage is too high</name><event_name>Redis: Memory usage is too high (over {$REDIS.MEM.PUSED.MAX.WARN}% in 5m)</event_name><priority>WARNING</priority><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.redis_version</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(parseInt(value.split('.')[0]) &gt;= 4 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>f7a9f1e26bb54cb6adf74ee9f30d88cd</uuid><name>Version 5+ metrics discovery</name><type>DEPENDENT</type><key>redis.metrics.v5.discovery</key><delay>0</delay><description>Additional metrics for versions 5+</description><item_prototypes><item_prototype><uuid>adc25c08108e4fcaa3b41d2897d0a0c6</uuid><name>Redis: Allocator active{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_active[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_active</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>81ef89fc751746ac8254a55a2b2e4ea7</uuid><name>Redis: Allocator allocated{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_allocated[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_allocated</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>23e034630d7246f7ba993d5c6db2d6bb</uuid><name>Redis: Allocator fragmentation bytes{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_frag_bytes[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_frag_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>690a13b13d134f648b4b8381f6a185f0</uuid><name>Redis: Allocator fragmentation ratio{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_frag_ratio[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_frag_ratio</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>0abd6a9adb034536b3a389e0af2af732</uuid><name>Redis: Allocator resident{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_resident[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_resident</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>b5ecad496c554ccaad495d2f112b5e2f</uuid><name>Redis: Allocator RSS bytes{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_rss_bytes[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_rss_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>643fe70e1a7f488196b053722a2df9c2</uuid><name>Redis: Allocator RSS ratio{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.allocator_rss_ratio[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.allocator_rss_ratio</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>40a639acab5a415a8fb48b7520b7d198</uuid><name>Redis: Memory fragmentation bytes{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.fragmentation_bytes[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_fragmentation_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>70c53f60d020440c8f7cba83b32f58c9</uuid><name>Redis: Memory AOF buffer{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.mem_aof_buffer[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Size of the AOF buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_aof_buffer</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>d64718269f20470e9661ff7c479dc300</uuid><name>Redis: Memory clients normal{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.mem_clients_normal[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_clients_normal</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>e685ab11ab534f8abd1a7e2ee35839e8</uuid><name>Redis: Memory clients slaves{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.mem_clients_slaves[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_clients_slaves</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>f6c9bfda015d47d0b34f466e95356a5d</uuid><name>Redis: Memory not counted for evict{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.not_counted_for_evict[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_not_counted_for_evict</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>eaac8b142fc540ad9c7563e145819643</uuid><name>Redis: Memory number of cached scripts{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.number_of_cached_scripts[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.number_of_cached_scripts</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>a221fd161be641c1a8091d0bfd1d2157</uuid><name>Redis: Memory replication backlog{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.replication_backlog[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.mem_replication_backlog</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>e699ad3b29ca486f91688684ffde6b73</uuid><name>Redis: Memory RSS overhead bytes{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.rss_overhead_bytes[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>B</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.rss_overhead_bytes</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>d4d51ae4ce214699ba760fcb62289a51</uuid><name>Redis: Memory RSS overhead ratio{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.rss_overhead_ratio[{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.rss_overhead_ratio</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype><item_prototype><uuid>e3733b2993cb4199bfac8b0711d4bb72</uuid><name>Redis: Memory used scripts{#SINGLETON}</name><type>DEPENDENT</type><key>redis.memory.used_memory_scripts[{#SINGLETON}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Memory.used_memory_scripts</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item_prototype></item_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Server.redis_version</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(parseInt(value.split('.')[0]) &gt;= 5 ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>ac3a22522a2c4fa1a256794dd2292480</uuid><name>AOF metrics discovery</name><type>DEPENDENT</type><key>redis.persistence.aof.discovery</key><delay>0</delay><description>If AOF is activated, additional metrics will be added</description><item_prototypes><item_prototype><uuid>e68a7b6931324bd79268a5151717505e</uuid><name>Redis: AOF base size{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_base_size[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>AOF file size on latest startup or rewrite</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_base_size</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>875ace20e5c94044ae63f36d98ac6256</uuid><name>Redis: AOF buffer length{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_buffer_length[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>Size of the AOF buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_buffer_length</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>679bd919383a4106916a84fae5be47bb</uuid><name>Redis: AOF current size{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_current_size[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>AOF current file size</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_current_size</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>ff9955c770aa4e0883cc72bf1d762be7</uuid><name>Redis: AOF delayed fsync{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_delayed_fsync[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Delayed fsync counter</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_delayed_fsync</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>0606ef5762b04d91abba95269eb77ae2</uuid><name>Redis: AOF pending background I/O fsync{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_pending_bio_fsync[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of fsync pending jobs in background I/O queue</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_pending_bio_fsync</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>194061b8ad6c484ca8c732d69eeb0f1e</uuid><name>Redis: AOF pending rewrite{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_pending_rewrite[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Flag indicating an AOF rewrite operation will</description><valuemap><name>Redis flag</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_pending_rewrite</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype><item_prototype><uuid>1a39f5854ae948759deadac0ae57e9f7</uuid><name>Redis: AOF rewrite buffer length{#SINGLETON}</name><type>DEPENDENT</type><key>redis.persistence.aof_rewrite_buffer_length[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>Size of the AOF rewrite buffer</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Persistence.aof_rewrite_buffer_length</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>persistence</value></tag></tags></item_prototype></item_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(JSON.parse(value).Persistence.aof_enabled === '1'
  ? [{'{#SINGLETON}': ''}]
  : []);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>4379bad5624a4a5db0c86c5332cf5cc9</uuid><name>Replication metrics discovery</name><type>DEPENDENT</type><key>redis.replication.master.discovery</key><delay>0</delay><description>If the instance is the master and the slaves are connected, additional metrics are provided</description><item_prototypes><item_prototype><uuid>2d26ebb0a5024378b59b3f0ee8e7fff4</uuid><name>Redis slave {#SLAVE_IP}:{#SLAVE_PORT}: Replication lag in bytes</name><type>DEPENDENT</type><key>redis.replication.lag_bytes[&quot;{#SLAVE_IP}:{#SLAVE_PORT}&quot;]</key><delay>0</delay><history>7d</history><units>B</units><description>Replication lag in bytes</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var repl = JSON.parse(value).Replication;
var res = Object.keys(repl)
    .filter(function (v) {return v.match(/slave\d+/)})
    .filter(function (v) {return (repl[v].ip === &quot;{#SLAVE_IP}&quot; &amp;&amp; repl[v].port === &quot;{#SLAVE_PORT}&quot;)})
    .map(function (v) {return repl[v].offset})[0];

if (res === undefined) {
    throw 'Slave {#SLAVE_IP}:{#SLAVE_PORT} is no longer available.';
}

return res;</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>0bce553a5a1240e2b097754dba8f6939</uuid><name>Redis slave {#SLAVE_IP}:{#SLAVE_PORT}: Replication lag bytes</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.replication.lag_bytes[&quot;{#SLAVE_IP}:{#SLAVE_PORT}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var repl = JSON.parse(value).Replication;
return JSON.stringify(Object.keys(repl)
  .filter(function (v) {return v.match(/slave\d+/)})
  .map(function (v){
    return {&quot;{#SLAVE_IP}&quot;: repl[v].ip, &quot;{#SLAVE_PORT}&quot;: repl[v].port}
  }));</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>ca9296a7acb548789865ac716a54ce10</uuid><name>Slave metrics discovery</name><type>DEPENDENT</type><key>redis.replication.slave.discovery</key><delay>0</delay><description>If the instance is a replica, additional metrics are provided</description><item_prototypes><item_prototype><uuid>92e4b2133a6a4ec28e739bbef94ab992</uuid><name>Redis: Master host{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.master_host[{#SINGLETON}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Host or IP address of the master</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_host</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>0acbeb8633da41be9bfb56627a946fd9</uuid><name>Redis: Master last I/O seconds ago{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.master_last_io_seconds_ago[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>s</units><description>Number of seconds since the last interaction with master</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_last_io_seconds_ago</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>292f477d970d4a138d2d1b2c45d965dd</uuid><expression>min(/Redis by Zabbix agent 2/redis.replication.master_last_io_seconds_ago[{#SINGLETON}],5m)&gt;{$REDIS.REPL.LAG.MAX.WARN}</expression><name>Redis: Replication lag with master is too high</name><event_name>Redis: Replication lag with master is too high (over {$REDIS.REPL.LAG.MAX.WARN} in 5m)</event_name><priority>WARNING</priority><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>8024463a9f644e6e91def5a0e88abd4b</uuid><name>Redis: Master link status{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.master_link_status[{#SINGLETON}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Status of the link (up/down)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_link_status</parameter></parameters></step><step><type>BOOL_TO_DECIMAL</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>da63a0b31bed47edaba3f802738fa4fd</uuid><name>Redis: Master port{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.master_port[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Master listening TCP port</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_port</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>6835a260e66741159ee10046265a1ea4</uuid><name>Redis: Master sync in progress{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.master_sync_in_progress[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Indicate the master is syncing to the replica</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.master_sync_in_progress</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>3f92dfa07237495ca7696bb4b078eb93</uuid><name>Redis: Slave priority{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.slave_priority[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>The priority of the instance as a candidate for failover</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.slave_priority</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>f38492a49f214ec8b71fdc51d243281e</uuid><name>Redis: Slave priority{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.slave_read_only[{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Flag indicating if the replica is read-only</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.slave_read_only</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype><item_prototype><uuid>7eb23d1d96ea489c9e0b39b7839147bd</uuid><name>Redis: Slave replication offset{#SINGLETON}</name><type>DEPENDENT</type><key>redis.replication.slave_repl_offset[{#SINGLETON}]</key><delay>0</delay><history>7d</history><units>B</units><description>The replication offset of the replica instance</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Replication.slave_repl_offset</parameter></parameters></step></preprocessing><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><tags><tag><tag>component</tag><value>replication</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>bbc5fb3021be4c3381e48fe623b611f0</uuid><name>Redis: Replication lag time{#SINGLETON}</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.replication.master_last_io_seconds_ago[{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>redis.info[&quot;{$REDIS.CONN.URI}&quot;]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(JSON.parse(value).Replication.role === 'slave'
  ? [{'{#SINGLETON}': ''}]
  : []);</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>database</value></tag><tag><tag>target</tag><value>redis</value></tag></tags><macros><macro><macro>{$REDIS.CLIENTS.PRC.MAX.WARN}</macro><value>80</value><description>Maximum percentage of connected clients</description></macro><macro><macro>{$REDIS.CONN.URI}</macro><value>tcp://localhost:6379</value><description>Connection string in the URI format (password is not used). This param overwrites a value configured in the &quot;Server&quot; option of the configuration file (if it's set), otherwise, the plugin's default value is used: &quot;tcp://localhost:6379&quot;</description></macro><macro><macro>{$REDIS.LLD.FILTER.DB.MATCHES}</macro><value>.*</value><description>Filter of discoverable databases</description></macro><macro><macro>{$REDIS.LLD.FILTER.DB.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>Filter to exclude discovered databases</description></macro><macro><macro>{$REDIS.LLD.PROCESS_NAME}</macro><value>redis-server</value><description>Redis server process name for LLD</description></macro><macro><macro>{$REDIS.MEM.FRAG_RATIO.MAX.WARN}</macro><value>1.5</value><description>Maximum memory fragmentation ratio</description></macro><macro><macro>{$REDIS.MEM.PUSED.MAX.WARN}</macro><value>90</value><description>Maximum percentage of memory used</description></macro><macro><macro>{$REDIS.PROCESS_NAME}</macro><value>redis-server</value><description>Redis server process name</description></macro><macro><macro>{$REDIS.REPL.LAG.MAX.WARN}</macro><value>30s</value><description>Maximum replication lag in seconds</description></macro><macro><macro>{$REDIS.SLOWLOG.COUNT.MAX.WARN}</macro><value>1</value><description>Maximum number of slowlog entries per second</description></macro></macros><dashboards><dashboard><uuid>7c5bdd7bc74648c4891abc6649d105d0</uuid><name>Redis overview</name><pages><page><widgets><widget><type>GRAPH_CLASSIC</type><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Clients</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Keyspace</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Commands</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Expired keys</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><y>10</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Persistence</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><y>10</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Slaves</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><y>15</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Slowlog</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><y>15</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Uptime</name></value></field></fields></widget><widget><type>GRAPH_PROTOTYPE</type><y>20</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>2</value></field><field><type>INTEGER</type><name>columns</name><value>1</value></field><field><type>INTEGER</type><name>rows</name><value>1</value></field><field><type>GRAPH_PROTOTYPE</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Replication lag time{#SINGLETON}</name></value></field></fields></widget></widgets></page></pages></dashboard><dashboard><uuid>ee4c29eb7a0f443fafb7e7d3b9df7b24</uuid><name>Redis performance</name><pages><page><widgets><widget><type>GRAPH_CLASSIC</type><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: CPU</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Network</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Memory</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Redis by Zabbix agent 2</host><name>Redis: Memory fragmentation</name></value></field></fields></widget></widgets></page></pages></dashboard></dashboards><valuemaps><valuemap><uuid>82f4dc4ef0c9471d82dbe3605f4f31d0</uuid><name>Redis bgsave time</name><mappings><mapping><value>- 1s</value><newvalue>Inactive</newvalue></mapping></mappings></valuemap><valuemap><uuid>098c2240a8e947fc9f6f0a677ffcbc0e</uuid><name>Redis bgwrite status</name><mappings><mapping><value>0</value><newvalue>Error</newvalue></mapping><mapping><value>1</value><newvalue>Ok</newvalue></mapping></mappings></valuemap><valuemap><uuid>3b6cd97c65d14e10bdabf5c42d767ad9</uuid><name>Redis flag</name><mappings><mapping><value>0</value><newvalue>No</newvalue></mapping><mapping><value>1</value><newvalue>Yes</newvalue></mapping></mappings></valuemap><valuemap><uuid>47c80efdf46745f1959eee76f68014e7</uuid><name>Redis repl offset</name><mappings><mapping><value>-1 B</value><newvalue>Undefined</newvalue></mapping></mappings></valuemap><valuemap><uuid>ae3eec95cd1c440ba6c67ed5d7b7b915</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><triggers><trigger><uuid>65e4652dbebe47c4b46e47bb8a17aac6</uuid><expression>min(/Redis by Zabbix agent 2/redis.clients.connected,5m)/last(/Redis by Zabbix agent 2/redis.config.maxclients)*100&gt;{$REDIS.CLIENTS.PRC.MAX.WARN}</expression><name>Redis: Total number of connected clients is too high</name><event_name>Redis: Total number of connected clients is too high (over {$REDIS.CLIENTS.PRC.MAX.WARN}% in 5m)</event_name><priority>WARNING</priority><description>When the number of clients reaches the value of the &quot;maxclients&quot; parameter, new connections will be rejected.

https://redis.io/topics/clients#maximum-number-of-clients</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers><graphs><graph><uuid>c04e813d482a4709b13aa2a98911e11d</uuid><name>Redis: Clients</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.clients.connected</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.clients.blocked</key></item></graph_item></graph_items></graph><graph><uuid>8643a1b690dc456b8daacc4b2b0810d4</uuid><name>Redis: Commands</name><graph_items><graph_item><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.instantaneous_ops.rate</key></item></graph_item></graph_items></graph><graph><uuid>765c0125e8d549dc88279f65f38b6ed9</uuid><name>Redis: CPU</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.cpu.sys</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.cpu.sys_children</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>GRADIENT_LINE</drawtype><color>F63100</color><item><host>Redis by Zabbix agent 2</host><key>redis.cpu.user</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Redis by Zabbix agent 2</host><key>redis.cpu.user_children</key></item></graph_item></graph_items></graph><graph><uuid>fd25ac6239064cd29dc1939cd15005de</uuid><name>Redis: Expired keys</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.expired_keys</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.evicted_keys</key></item></graph_item></graph_items></graph><graph><uuid>24cff7af388e41a8899e2916f12224d1</uuid><name>Redis: Keyspace</name><graph_items><graph_item><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.keyspace_hits</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.keyspace_misses</key></item></graph_item></graph_items></graph><graph><uuid>a3ea32878f25481998e0fde7ba00a11b</uuid><name>Redis: Memory</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.memory.used_memory</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.memory.used_memory_rss</key></item></graph_item><graph_item><sortorder>2</sortorder><drawtype>BOLD_LINE</drawtype><color>F63100</color><item><host>Redis by Zabbix agent 2</host><key>redis.memory.used_memory_peak</key></item></graph_item></graph_items></graph><graph><uuid>ff8d6320a8e246a39d35ccb93220eb3a</uuid><name>Redis: Memory fragmentation</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.memory.fragmentation_ratio</key></item></graph_item></graph_items></graph><graph><uuid>b3db4cc8247647faae0d3c2389f37d80</uuid><name>Redis: Network</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.instantaneous_input.rate</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>GRADIENT_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.stats.instantaneous_output.rate</key></item></graph_item></graph_items></graph><graph><uuid>81fde2046d2340119b2002da2b75df16</uuid><name>Redis: Persistence</name><graph_items><graph_item><drawtype>BOLD_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.persistence.rdb_last_bgsave_time_sec</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>2774A4</color><item><host>Redis by Zabbix agent 2</host><key>redis.persistence.aof_last_rewrite_time_sec</key></item></graph_item></graph_items></graph><graph><uuid>1ace370516b74875977788d44ab478e5</uuid><name>Redis: Slaves</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.replication.connected_slaves</key></item></graph_item></graph_items></graph><graph><uuid>8dd9935cb7a24004b9783c3f1a445f1b</uuid><name>Redis: Slowlog</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.slowlog.count[&quot;{$REDIS.CONN.URI}&quot;]</key></item></graph_item></graph_items></graph><graph><uuid>32d954e849e64fe99bd8846b54aadede</uuid><name>Redis: Uptime</name><graph_items><graph_item><color>1A7C11</color><item><host>Redis by Zabbix agent 2</host><key>redis.server.uptime</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
