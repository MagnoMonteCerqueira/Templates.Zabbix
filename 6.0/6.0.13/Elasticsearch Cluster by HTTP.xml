<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:45Z</date><groups><group><uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid><name>Templates/Applications</name></group></groups><templates><template><uuid>52b2664578884d9eba62e47375c99f8e</uuid><template>Elasticsearch Cluster by HTTP</template><name>Elasticsearch Cluster by HTTP</name><description>The template to monitor Elasticsearch by Zabbix that work without any external scripts.
It works with both standalone and cluster instances.
The metrics are collected in one pass remotely using an HTTP agent.
They are getting values from REST API _cluster/health, _cluster/stats, _nodes/stats requests.
You can set {$ELASTICSEARCH.USERNAME} and {$ELASTICSEARCH.PASSWORD} macros in the template for using on the host level.
If you use an atypical location ES API, don't forget to change the macros {$ELASTICSEARCH.SCHEME},{$ELASTICSEARCH.PORT}.


You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/399473-discussion-thread-for-official-zabbix-template-for-elasticsearch

Template tooling version used: 0.41</description><groups><group><name>Templates/Applications</name></group></groups><items><item><uuid>f3531c005c7f477b9916b4bf1ad273c2</uuid><name>ES: Delayed unassigned shards</name><type>DEPENDENT</type><key>es.cluster.delayed_unassigned_shards</key><delay>0</delay><history>7d</history><description>The number of shards whose allocation has been delayed by the timeout settings.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.delayed_unassigned_shards</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>shards</value></tag></tags></item><item><uuid>7f587fd270be4eb68d81ae1de2a3ca1f</uuid><name>ES: Get cluster health</name><type>HTTP_AGENT</type><key>es.cluster.get_health</key><history>0h</history><trends>0</trends><value_type>TEXT</value_type><authtype>BASIC</authtype><username>{$ELASTICSEARCH.USERNAME}</username><password>{$ELASTICSEARCH.PASSWORD}</password><description>Returns the health status of a cluster.</description><timeout>15s</timeout><url>{$ELASTICSEARCH.SCHEME}://{HOST.CONN}:{$ELASTICSEARCH.PORT}/_cluster/health?timeout=5s</url><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>7066a66f352e4d79ba4aec11c0c5c611</uuid><name>ES: Get cluster stats</name><type>HTTP_AGENT</type><key>es.cluster.get_stats</key><history>0h</history><trends>0</trends><value_type>TEXT</value_type><authtype>BASIC</authtype><username>{$ELASTICSEARCH.USERNAME}</username><password>{$ELASTICSEARCH.PASSWORD}</password><description>Returns cluster statistics.</description><timeout>15s</timeout><url>{$ELASTICSEARCH.SCHEME}://{HOST.CONN}:{$ELASTICSEARCH.PORT}/_cluster/stats</url><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>500a763b9bfd4044b2d3bc95d3a0586c</uuid><name>ES: Inactive shards percentage</name><type>DEPENDENT</type><key>es.cluster.inactive_shards_percent_as_number</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>The ratio of inactive shards in the cluster expressed as a percentage.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.active_shards_percent_as_number</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>return (100 - value)</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>shards</value></tag></tags></item><item><uuid>e0b684d5992a496981cf6fb9bb85be62</uuid><name>ES: Number of initializing shards</name><type>DEPENDENT</type><key>es.cluster.initializing_shards</key><delay>0</delay><history>7d</history><description>The number of shards that are under initialization.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.initializing_shards</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>shards</value></tag></tags><triggers><trigger><uuid>ee59684bb2044540ad0306a5b6deb408</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.cluster.initializing_shards,10m)&gt;0</expression><name>ES: Cluster has the initializing shards</name><priority>AVERAGE</priority><description>The cluster has the initializing shards longer than 10 minutes.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>7d3c87e2fcae49438a14380f7d5faa81</uuid><name>ES: Number of data nodes</name><type>DEPENDENT</type><key>es.cluster.number_of_data_nodes</key><delay>0</delay><history>7d</history><description>The number of nodes that are dedicated to data nodes.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.number_of_data_nodes</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>nodes</value></tag></tags></item><item><uuid>4ec7496b441643f39df3e25c0225e6ec</uuid><name>ES: Number of nodes</name><type>DEPENDENT</type><key>es.cluster.number_of_nodes</key><delay>0</delay><history>7d</history><description>The number of nodes within the cluster.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.number_of_nodes</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>nodes</value></tag></tags><triggers><trigger><uuid>5be4cb40e72442aca18ea014adbead23</uuid><expression>change(/Elasticsearch Cluster by HTTP/es.cluster.number_of_nodes)&lt;0</expression><name>ES: The number of nodes within the cluster has decreased</name><priority>INFO</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>2fba2b29425b4ff9a4008db9bde49d7f</uuid><expression>change(/Elasticsearch Cluster by HTTP/es.cluster.number_of_nodes)&gt;0</expression><name>ES: The number of nodes within the cluster has increased</name><priority>INFO</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>2c84eea7f4a642f8892cb7f50febb562</uuid><name>ES: Number of pending tasks</name><type>DEPENDENT</type><key>es.cluster.number_of_pending_tasks</key><delay>0</delay><history>7d</history><description>The number of cluster-level changes that have not yet been executed.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.number_of_pending_tasks</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>tasks</value></tag></tags></item><item><uuid>981818f43a3c4b36b36e4b3c4e3468e9</uuid><name>ES: Number of relocating shards</name><type>DEPENDENT</type><key>es.cluster.relocating_shards</key><delay>0</delay><history>7d</history><description>The number of shards that are under relocation.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.relocating_shards</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>shards</value></tag></tags></item><item><uuid>b9568a6370dc40efae45ac1e0b719dd7</uuid><name>ES: Cluster health status</name><type>DEPENDENT</type><key>es.cluster.status</key><delay>0</delay><history>7d</history><description>Health status of the cluster, based on the state of its primary and replica shards. Statuses are:
green
All shards are assigned.
yellow
All primary shards are assigned, but one or more replica shards are unassigned. If a node in the cluster fails, some data could be unavailable until that node is repaired.
red
One or more primary shards are unassigned, so some data is unavailable. This can occur briefly during cluster startup as primary shards are assigned.</description><valuemap><name>ES cluster state</name></valuemap><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.status</parameter></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>var state = ['green', 'yellow', 'red'];

return state.indexOf(value.trim()) === -1 ? 255 : state.indexOf(value.trim());</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>f3bb7e96f6074063bad76521e1dce24f</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.cluster.status)=2</expression><name>ES: Health is RED</name><priority>HIGH</priority><description>One or more primary shards are unassigned, so some data is unavailable.
This can occur briefly during cluster startup as primary shards are assigned.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger><trigger><uuid>33a6ef13f7b240768841919482709411</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.cluster.status)=255</expression><name>ES: Health is UNKNOWN</name><priority>HIGH</priority><description>The health status of the cluster is unknown or cannot be obtained.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger><trigger><uuid>99f36c2aa5d64248b96d1fc97c3b3065</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.cluster.status)=1</expression><name>ES: Health is YELLOW</name><priority>AVERAGE</priority><description>All primary shards are assigned, but one or more replica shards are unassigned.
If a node in the cluster fails, some data could be unavailable until that node is repaired.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>2295e2ba3d4949feb3519ac85ba6ff86</uuid><name>ES: Task max waiting in queue</name><type>DEPENDENT</type><key>es.cluster.task_max_waiting_in_queue</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>The time expressed in seconds since the earliest initiated task is waiting for being performed.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.task_max_waiting_in_queue_millis</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>tasks</value></tag></tags></item><item><uuid>85e82cba1e5c479caede2a94c58239be</uuid><name>ES: Number of unassigned shards</name><type>DEPENDENT</type><key>es.cluster.unassigned_shards</key><delay>0</delay><history>7d</history><description>The number of shards that are not allocated.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.unassigned_shards</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_health</key></master_item><tags><tag><tag>component</tag><value>shards</value></tag></tags><triggers><trigger><uuid>35bdd54f27a64009b96a06a12508f99c</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.cluster.unassigned_shards,10m)&gt;0</expression><name>ES: Cluster has the unassigned shards</name><priority>AVERAGE</priority><description>The cluster has the unassigned shards longer than 10 minutes.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>db2f3161eaff4eb0b25d4191b423c733</uuid><name>ES: Indices with shards assigned to nodes</name><type>DEPENDENT</type><key>es.indices.count</key><delay>0</delay><history>7d</history><description>The total number of indices with shards assigned to the selected nodes.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.indices.count</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>indices</value></tag></tags></item><item><uuid>25cb1e0203334efd96d3e626f81b4670</uuid><name>ES: Number of non-deleted documents</name><type>DEPENDENT</type><key>es.indices.docs.count</key><delay>0</delay><history>7d</history><description>The total number of non-deleted documents across all primary shards assigned to the selected nodes.
This number is based on the documents in Lucene segments and may include the documents from nested fields.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.indices.docs.count</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>documents</value></tag></tags></item><item><uuid>54f51a653e014290aa3f91deaca44e47</uuid><name>ES: Nodes with the data role</name><type>DEPENDENT</type><key>es.nodes.count.data</key><delay>0</delay><history>7d</history><description>The number of selected nodes with the data role.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.count.data</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>nodes</value></tag></tags></item><item><uuid>613ab3469f234e278af99d61e57b46bd</uuid><name>ES: Nodes with the ingest role</name><type>DEPENDENT</type><key>es.nodes.count.ingest</key><delay>0</delay><history>7d</history><description>The number of selected nodes with the ingest role.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.count.ingest</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>nodes</value></tag></tags></item><item><uuid>e7b36f37b86845339a306dacf874164a</uuid><name>ES: Nodes with the master role</name><type>DEPENDENT</type><key>es.nodes.count.master</key><delay>0</delay><history>7d</history><description>The number of selected nodes with the master role.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.count.master</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>nodes</value></tag></tags><triggers><trigger><uuid>8011883baef04aa0bed343d1bb0df288</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.nodes.count.master)=2</expression><name>ES: Cluster has only two master nodes</name><priority>DISASTER</priority><description>The cluster has only two nodes with a master role and will be unavailable if one of them breaks.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>c3ea99e5897b4663a3239d0edd66f1f0</uuid><name>ES: Total available size to JVM in all file stores</name><type>DEPENDENT</type><key>es.nodes.fs.available_in_bytes</key><delay>0</delay><history>7d</history><units>B</units><description>The total number of bytes available to JVM in the file stores across all selected nodes.
Depending on OS or process-level restrictions, this number may be less than nodes.fs.free_in_byes.
This is the actual amount of free disk space the selected Elasticsearch nodes can use.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.fs.available_in_bytes</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>storage</value></tag></tags></item><item><uuid>b8c3c5d8866d4a6b9c6847b5c8da0631</uuid><name>ES: Total size of all file stores</name><type>DEPENDENT</type><key>es.nodes.fs.total_in_bytes</key><delay>0</delay><history>7d</history><units>B</units><description>The total size in bytes of all file stores across all selected nodes.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.fs.total_in_bytes</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>storage</value></tag></tags></item><item><uuid>66c22b8b2b8b40fda7ac6f0ae472befd</uuid><name>ES: Get nodes stats</name><type>HTTP_AGENT</type><key>es.nodes.get_stats</key><history>0h</history><trends>0</trends><value_type>TEXT</value_type><authtype>BASIC</authtype><username>{$ELASTICSEARCH.USERNAME}</username><password>{$ELASTICSEARCH.PASSWORD}</password><description>Returns cluster nodes statistics.</description><timeout>30s</timeout><url>{$ELASTICSEARCH.SCHEME}://{HOST.CONN}:{$ELASTICSEARCH.PORT}/_nodes/stats</url><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>2dcf54f21cbd4af9a7931e3a2522685c</uuid><name>ES: Cluster uptime</name><type>DEPENDENT</type><key>es.nodes.jvm.max_uptime</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Uptime duration in seconds since JVM has last started.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.jvm.max_uptime_in_millis</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step></preprocessing><master_item><key>es.cluster.get_stats</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>d28aa18c85cb4f48a9e7b8ba55d65400</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.nodes.jvm.max_uptime)&lt;10m</expression><name>ES: Cluster has been restarted</name><event_name>ES: Cluster has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>671888d47c724e54aca78fbe1b3ecaed</uuid><name>ES: Service response time</name><type>SIMPLE</type><key>net.tcp.service.perf[&quot;{$ELASTICSEARCH.SCHEME}&quot;,&quot;{HOST.CONN}&quot;,&quot;{$ELASTICSEARCH.PORT}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Checks performance of the TCP service.</description><tags><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>2a3f3b96e5dd47de998ccc17f109e149</uuid><expression>min(/Elasticsearch Cluster by HTTP/net.tcp.service.perf[&quot;{$ELASTICSEARCH.SCHEME}&quot;,&quot;{HOST.CONN}&quot;,&quot;{$ELASTICSEARCH.PORT}&quot;],5m)&gt;{$ELASTICSEARCH.RESPONSE_TIME.MAX.WARN}</expression><name>ES: Service response time is too high</name><event_name>ES: Service response time is too high (over {$ELASTICSEARCH.RESPONSE_TIME.MAX.WARN} for 5m)</event_name><priority>WARNING</priority><description>The performance of the TCP service is very low.</description><manual_close>YES</manual_close><dependencies><dependency><name>ES: Service is down</name><expression>last(/Elasticsearch Cluster by HTTP/net.tcp.service[&quot;{$ELASTICSEARCH.SCHEME}&quot;,&quot;{HOST.CONN}&quot;,&quot;{$ELASTICSEARCH.PORT}&quot;])=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>d0d38ce55f844a51a0f2131c86bec1ae</uuid><name>ES: Service status</name><type>SIMPLE</type><key>net.tcp.service[&quot;{$ELASTICSEARCH.SCHEME}&quot;,&quot;{HOST.CONN}&quot;,&quot;{$ELASTICSEARCH.PORT}&quot;]</key><history>7d</history><description>Checks if the service is running and accepting TCP connections.</description><valuemap><name>Service state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>10m</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>b4d76f68ce94492f96bbfbb778d1f144</uuid><expression>last(/Elasticsearch Cluster by HTTP/net.tcp.service[&quot;{$ELASTICSEARCH.SCHEME}&quot;,&quot;{HOST.CONN}&quot;,&quot;{$ELASTICSEARCH.PORT}&quot;])=0</expression><name>ES: Service is down</name><priority>AVERAGE</priority><description>The service is unavailable or does not accept TCP connections.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><uuid>5105173f24d941b2969fe3d190d22e82</uuid><name>Cluster nodes discovery</name><type>HTTP_AGENT</type><key>es.nodes.discovery</key><delay>1h</delay><authtype>BASIC</authtype><username>{$ELASTICSEARCH.USERNAME}</username><password>{$ELASTICSEARCH.PASSWORD}</password><description>Discovery ES cluster nodes.</description><item_prototypes><item_prototype><uuid>b4e87d039e9d4feeb03e0e33f14b2c82</uuid><name>ES {#ES.NODE}: Total available size</name><type>DEPENDENT</type><key>es.node.fs.total.available_in_bytes[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>B</units><description>The total number of bytes available to this Java virtual machine on all file stores.
Depending on OS or process level restrictions, this might appear less than fs.total.free_in_bytes.
This is the actual amount of free disk space the Elasticsearch node can utilize.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].fs.total.available_in_bytes.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>4f315fdf62884b0284bf04f1a85aeb98</uuid><name>ES {#ES.NODE}: Total size</name><type>DEPENDENT</type><key>es.node.fs.total.total_in_bytes[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>B</units><description>Total size (in bytes) of all file stores.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].fs.total.total_in_bytes.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>storage</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>2ba1fc7e2dad4d0ab1807221fb1e4fca</uuid><name>ES {#ES.NODE}: Number of open HTTP connections</name><type>DEPENDENT</type><key>es.node.http.current_open[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of currently open HTTP connections for the node.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].http.current_open.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>fcf163d5db9b455fa38823e8ad16e578</uuid><name>ES {#ES.NODE}: Rate of HTTP connections opened</name><type>DEPENDENT</type><key>es.node.http.opened.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of HTTP connections opened for the node per second.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].http.total_opened.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>c530311329e348cca74c38fa2260236b</uuid><name>ES {#ES.NODE}: Flush latency</name><type>CALCULATED</type><key>es.node.indices.flush.latency[{#ES.NODE}]</key><history>7d</history><value_type>FLOAT</value_type><units>ms</units><params>change(//es.node.indices.flush.total_time_in_millis[{#ES.NODE}]) / ( change(//es.node.indices.flush.total[{#ES.NODE}]) + (change(//es.node.indices.flush.total[{#ES.NODE}]) = 0) )</params><description>The average flush latency calculated from the available flush.total and flush.total_time_in_millis metrics.</description><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>6c2ea291374b4de1ab06ddeccba635b1</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.indices.flush.latency[{#ES.NODE}],5m)&gt;{$ELASTICSEARCH.FLUSH_LATENCY.MAX.WARN}</expression><name>ES {#ES.NODE}: Flush latency is too high</name><event_name>ES {#ES.NODE}: Flush latency is too high (over {$ELASTICSEARCH.FLUSH_LATENCY.MAX.WARN}ms for 5m)</event_name><priority>WARNING</priority><description>If you see this metric increasing steadily, it may indicate a problem with slow disks; this problem may escalate
and eventually prevent you from being able to add new information to your index.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>8e270dfff9c84d2a96a134dd6d86533b</uuid><name>ES {#ES.NODE}: Total number of index flushes to disk</name><type>DEPENDENT</type><key>es.node.indices.flush.total[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The total number of flush operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.flush.total.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>7e18149dcaee47748e4073f4ce814c03</uuid><name>ES {#ES.NODE}: Total time spent on flushing indices to disk</name><type>DEPENDENT</type><key>es.node.indices.flush.total_time_in_millis[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>ms</units><description>Total time in milliseconds spent performing flush operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.flush.total_time_in_millis.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>e91cc33c088a4f56a9176fd6a09f2411</uuid><name>ES {#ES.NODE}: Current indexing operations</name><type>DEPENDENT</type><key>es.node.indices.indexing.index_current[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of indexing operations currently running.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.indexing.index_current.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>23f54c51c30a4dbdbef48611a7907db6</uuid><name>ES {#ES.NODE}: Indexing latency</name><type>CALCULATED</type><key>es.node.indices.indexing.index_latency[{#ES.NODE}]</key><history>7d</history><value_type>FLOAT</value_type><units>ms</units><params>change(//es.node.indices.indexing.index_time_in_millis[{#ES.NODE}]) / ( change(//es.node.indices.indexing.index_total[{#ES.NODE}]) + (change(//es.node.indices.indexing.index_total[{#ES.NODE}]) = 0) )</params><description>The average indexing latency calculated from the available index_total and index_time_in_millis metrics.</description><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>2755b3f8811a45fba7c48347707ceaf8</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.indices.indexing.index_latency[{#ES.NODE}],5m)&gt;{$ELASTICSEARCH.INDEXING_LATENCY.MAX.WARN}</expression><name>ES {#ES.NODE}: Indexing latency is too high</name><event_name>ES {#ES.NODE}: Indexing latency is too high (over {$ELASTICSEARCH.INDEXING_LATENCY.MAX.WARN}ms for 5m)</event_name><priority>WARNING</priority><description>If the latency is increasing, it may indicate that you are indexing too many documents at the same time (Elasticsearch's documentation
recommends starting with a bulk indexing size of 5 to 15 megabytes and increasing slowly from there).</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>f471dad45ff149b09a479963cb616fc2</uuid><name>ES {#ES.NODE}: Total time spent performing indexing</name><type>DEPENDENT</type><key>es.node.indices.indexing.index_time_in_millis[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>ms</units><description>Total time in milliseconds spent performing indexing operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.indexing.index_time_in_millis.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>ad36b8495eca49c48e7d8a7877a325c2</uuid><name>ES {#ES.NODE}: Total number of indexing</name><type>DEPENDENT</type><key>es.node.indices.indexing.index_total[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The total number of indexing operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.indexing.index_total.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>bb0cb2196b14483f8807a855f2f531a7</uuid><name>ES {#ES.NODE}: Time spent throttling operations</name><type>DEPENDENT</type><key>es.node.indices.indexing.throttle_time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent throttling operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.indexing.throttle_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>5f3b7dca802343cd905d54e66ac0e113</uuid><name>ES {#ES.NODE}: Time spent throttling merge operations</name><type>DEPENDENT</type><key>es.node.indices.merges.total_throttled_time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent throttling merge operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.merges.total_throttled_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>9c82da45a63947dd91a4e19e6f2d121d</uuid><name>ES {#ES.NODE}: Time spent throttling recovery operations</name><type>DEPENDENT</type><key>es.node.indices.recovery.throttle_time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent throttling recovery operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.recovery.throttle_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>e27361fdce5a4635854960066ac050ca</uuid><name>ES {#ES.NODE}: Rate of index refreshes</name><type>DEPENDENT</type><key>es.node.indices.refresh.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of refresh operations per second.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.refresh.total.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>fd20bbc5012d4c5693710b321e252193</uuid><name>ES {#ES.NODE}: Time spent performing refresh</name><type>DEPENDENT</type><key>es.node.indices.refresh.time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent performing refresh operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.refresh.total_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>operations</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>6d3b074aecb44a08a3573aba0ff006f9</uuid><name>ES {#ES.NODE}: Rate of fetch</name><type>DEPENDENT</type><key>es.node.indices.search.fetch.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of fetch operations per second.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.fetch_total.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>36b2ffa3ed9f4c9781ccded273c395d7</uuid><name>ES {#ES.NODE}: Current fetch operations</name><type>DEPENDENT</type><key>es.node.indices.search.fetch_current[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of fetch operations currently running.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.fetch_current.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>79b5fd5e04e249da9f73fbe68915fdb1</uuid><name>ES {#ES.NODE}: Fetch latency</name><type>CALCULATED</type><key>es.node.indices.search.fetch_latency[{#ES.NODE}]</key><history>7d</history><value_type>FLOAT</value_type><units>ms</units><params>change(//es.node.indices.search.fetch_time_in_millis[{#ES.NODE}]) / ( change(//es.node.indices.search.fetch_total[{#ES.NODE}]) + (change(//es.node.indices.search.fetch_total[{#ES.NODE}]) = 0) )</params><description>The average fetch latency calculated by sampling the total number of fetches and the total elapsed time at regular intervals.</description><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>6edd6851f31842659a57e29c444a9b32</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.indices.search.fetch_latency[{#ES.NODE}],5m)&gt;{$ELASTICSEARCH.FETCH_LATENCY.MAX.WARN}</expression><name>ES {#ES.NODE}: Fetch latency is too high</name><event_name>ES {#ES.NODE}: Fetch latency is too high (over {$ELASTICSEARCH.FETCH_LATENCY.MAX.WARN}ms for 5m)</event_name><priority>WARNING</priority><description>The fetch phase should typically take much less time than the query phase. If you notice this metric consistently increasing,
this could indicate a problem with slow disks, enriching of documents (highlighting the relevant text in search results, etc.),
or requesting too many results.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>a10e7dca72c8411a9b7fdcbeb676017e</uuid><name>ES {#ES.NODE}: Time spent performing fetch</name><type>DEPENDENT</type><key>es.node.indices.search.fetch_time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent performing fetch operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.fetch_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>f35e3e9773394632b422dbc4e4442171</uuid><name>ES {#ES.NODE}: Total time spent performing fetch</name><type>DEPENDENT</type><key>es.node.indices.search.fetch_time_in_millis[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>ms</units><description>Time in milliseconds spent performing fetch operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.fetch_time_in_millis.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>b3ac68f3531f478b9ad28fb1988df257</uuid><name>ES {#ES.NODE}: Total number of fetch</name><type>DEPENDENT</type><key>es.node.indices.search.fetch_total[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The total number of fetch operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.fetch_total.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>fetches</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>d347df9c9eee4aa89ccfb9147143b5d5</uuid><name>ES {#ES.NODE}: Rate of queries</name><type>DEPENDENT</type><key>es.node.indices.search.query.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of query operations per second.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.query_total.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>20fb738abf7a4aa1bf3ccb84790a26c9</uuid><name>ES {#ES.NODE}: Current query operations</name><type>DEPENDENT</type><key>es.node.indices.search.query_current[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of query operations currently running.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.query_current.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>fadb6fe530ab4b1296d4c17728667b12</uuid><name>ES {#ES.NODE}: Query latency</name><type>CALCULATED</type><key>es.node.indices.search.query_latency[{#ES.NODE}]</key><history>7d</history><value_type>FLOAT</value_type><units>ms</units><params>change(//es.node.indices.search.query_time_in_millis[{#ES.NODE}]) / 
( change(//es.node.indices.search.query_total[{#ES.NODE}]) + (change(//es.node.indices.search.query_total[{#ES.NODE}]) = 0) )</params><description>The average query latency calculated by sampling the total number of queries and the total elapsed time at regular intervals.</description><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>1892000290c843e887d128bf9f97c869</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.indices.search.query_latency[{#ES.NODE}],5m)&gt;{$ELASTICSEARCH.QUERY_LATENCY.MAX.WARN}</expression><name>ES {#ES.NODE}: Query latency is too high</name><event_name>ES {#ES.NODE}: Query latency is too high (over {$ELASTICSEARCH.QUERY_LATENCY.MAX.WARN}ms for 5m)</event_name><priority>WARNING</priority><description>If latency exceeds a threshold, look for potential resource bottlenecks, or investigate whether you need to optimize your queries.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>ce807b641b0b4501b6a8e253d8403ce4</uuid><name>ES {#ES.NODE}: Time spent performing query</name><type>DEPENDENT</type><key>es.node.indices.search.query_time[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>Time in seconds spent performing query operations for the last measuring span.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.query_time_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>7afc767463c64bbb9290975a8cef3cec</uuid><name>ES {#ES.NODE}: Total time spent performing query</name><type>DEPENDENT</type><key>es.node.indices.search.query_time_in_millis[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>ms</units><description>Time in milliseconds spent performing query operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.query_time_in_millis.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>7279b682fa3e4661a1600d6da25e0fc7</uuid><name>ES {#ES.NODE}: Total number of query</name><type>DEPENDENT</type><key>es.node.indices.search.query_total[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The total number of query operations.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].indices.search.query_total.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>queries</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>269cc21be4c94ba58a52b9fca9590632</uuid><name>ES {#ES.NODE}: Amount of JVM heap committed</name><type>DEPENDENT</type><key>es.node.jvm.mem.heap_committed_in_bytes[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>B</units><description>The amount of memory, in bytes, available for use by the heap.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].jvm.mem.heap_committed_in_bytes.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>7f205e21644a4f629e4a419c42670158</uuid><name>ES {#ES.NODE}: Maximum JVM memory available for use</name><type>DEPENDENT</type><key>es.node.jvm.mem.heap_max_in_bytes[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>B</units><description>The maximum amount of memory, in bytes, available for use by the heap.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].jvm.mem.heap_max_in_bytes.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>bb55c78c2aca49e49f6200e14c25dee8</uuid><name>ES {#ES.NODE}: Amount of JVM heap currently in use</name><type>DEPENDENT</type><key>es.node.jvm.mem.heap_used_in_bytes[{#ES.NODE}]</key><delay>0</delay><history>7d</history><units>B</units><description>The memory, in bytes, currently in use by the heap.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].jvm.mem.heap_used_in_bytes.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>71fca039cad847da9623aaeb722168f1</uuid><name>ES {#ES.NODE}: Percent of JVM heap currently in use</name><type>DEPENDENT</type><key>es.node.jvm.mem.heap_used_percent[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>The percentage of memory currently in use by the heap.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].jvm.mem.heap_used_percent.first()</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>9d199607ddda48eebe9f93cae6d6575d</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.jvm.mem.heap_used_percent[{#ES.NODE}],1h)&gt;{$ELASTICSEARCH.HEAP_USED.MAX.CRIT}</expression><name>ES {#ES.NODE}: Percent of JVM heap in use is critical</name><event_name>ES {#ES.NODE}: Percent of JVM heap in use is critical (over {$ELASTICSEARCH.HEAP_USED.MAX.CRIT}% for 1h)</event_name><priority>HIGH</priority><description>This indicates that the rate of garbage collection isn't keeping up with the rate of garbage creation.
To address this problem, you can either increase your heap size (as long as it remains below the recommended
guidelines stated above), or scale out the cluster by adding more nodes.</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype><trigger_prototype><uuid>bbba4a577a2c4328b2392fdeb1ff9bb4</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.jvm.mem.heap_used_percent[{#ES.NODE}],1h)&gt;{$ELASTICSEARCH.HEAP_USED.MAX.WARN}</expression><name>ES {#ES.NODE}: Percent of JVM heap in use is high</name><event_name>ES {#ES.NODE}: Percent of JVM heap in use is high (over {$ELASTICSEARCH.HEAP_USED.MAX.WARN}% for 1h)</event_name><priority>WARNING</priority><description>This indicates that the rate of garbage collection isn't keeping up with the rate of garbage creation.
To address this problem, you can either increase your heap size (as long as it remains below the recommended
guidelines stated above), or scale out the cluster by adding more nodes.</description><dependencies><dependency><name>ES {#ES.NODE}: Percent of JVM heap in use is critical</name><expression>min(/Elasticsearch Cluster by HTTP/es.node.jvm.mem.heap_used_percent[{#ES.NODE}],1h)&gt;{$ELASTICSEARCH.HEAP_USED.MAX.CRIT}</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>3c2f512ae6ff4221a7de4e5dbff2ed48</uuid><name>ES {#ES.NODE}: Node uptime</name><type>DEPENDENT</type><key>es.node.jvm.uptime[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>s</units><description>JVM uptime in seconds.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].jvm.uptime_in_millis.first()</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>0.001</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>system</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>580ae8aadf994fbcb34c9c8ad7cd5fad</uuid><expression>last(/Elasticsearch Cluster by HTTP/es.node.jvm.uptime[{#ES.NODE}])&lt;10m</expression><name>ES {#ES.NODE}: has been restarted</name><event_name>ES {#ES.NODE}: has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>14ea2732fbfc40ceaafadfff1830ac4d</uuid><name>ES {#ES.NODE}: Refresh thread pool active threads</name><type>DEPENDENT</type><key>es.node.thread_pool.refresh.active[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of active threads in the refresh thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.refresh.active.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>refresh-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>b6496d2878914b06bf6301630b4609a8</uuid><name>ES {#ES.NODE}: Refresh thread pool executor tasks completed</name><type>DEPENDENT</type><key>es.node.thread_pool.refresh.completed.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks completed by the refresh thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.refresh.completed.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>refresh-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>4b748eeb937e45308e58d699b713cf01</uuid><name>ES {#ES.NODE}: Refresh thread pool tasks in queue</name><type>DEPENDENT</type><key>es.node.thread_pool.refresh.queue[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of tasks in queue for the refresh thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.refresh.queue.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>refresh-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>593514af005044ce8e6207a5616270f2</uuid><name>ES {#ES.NODE}: Refresh thread pool executor tasks rejected</name><type>DEPENDENT</type><key>es.node.thread_pool.refresh.rejected.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks rejected by the refresh thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.refresh.rejected.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>refresh-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>b416941e8e0141c6af27c62f052ac860</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.thread_pool.refresh.rejected.rate[{#ES.NODE}],5m)&gt;0</expression><name>ES {#ES.NODE}: Refresh thread pool executor has the rejected tasks</name><event_name>ES {#ES.NODE}: Refresh thread pool executor has the rejected tasks (for 5m)</event_name><priority>WARNING</priority><description>The number of tasks rejected by the refresh thread pool executor is over 0 for 5m.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>63875f40cf7c4f8f842562be2adfb7c7</uuid><name>ES {#ES.NODE}: Search thread pool active threads</name><type>DEPENDENT</type><key>es.node.thread_pool.search.active[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of active threads in the search thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.search.active.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>search-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>dc67ab311d4945aaae3347464785abb1</uuid><name>ES {#ES.NODE}: Search thread pool executor tasks completed</name><type>DEPENDENT</type><key>es.node.thread_pool.search.completed.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks completed by the search thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.search.completed.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>search-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>d11933b62131425d83ab09c6d5fd5e85</uuid><name>ES {#ES.NODE}: Search thread pool tasks in queue</name><type>DEPENDENT</type><key>es.node.thread_pool.search.queue[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of tasks in queue for the search thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.search.queue.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>search-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>820ed330abc845919b1dada3cfa81387</uuid><name>ES {#ES.NODE}: Search thread pool executor tasks rejected</name><type>DEPENDENT</type><key>es.node.thread_pool.search.rejected.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks rejected by the search thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.search.rejected.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>search-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>5cfd3f9924614a4283f1255752b672f0</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.thread_pool.search.rejected.rate[{#ES.NODE}],5m)&gt;0</expression><name>ES {#ES.NODE}: Search thread pool executor has the rejected tasks</name><event_name>ES {#ES.NODE}: Search thread pool executor has the rejected tasks (for 5m)</event_name><priority>WARNING</priority><description>The number of tasks rejected by the search thread pool executor is over 0 for 5m.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>4b7dc34d78a64b24a8fd19af95e0f0bd</uuid><name>ES {#ES.NODE}: Write thread pool active threads</name><type>DEPENDENT</type><key>es.node.thread_pool.write.active[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of active threads in the write thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.write.active.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>write-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>5b5ac74702564bd490c7378adcf75c28</uuid><name>ES {#ES.NODE}: Write thread pool executor tasks completed</name><type>DEPENDENT</type><key>es.node.thread_pool.write.completed.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks completed by the write thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.write.completed.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>write-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>a0d8f8d896a546d1ade07c355992308d</uuid><name>ES {#ES.NODE}: Write thread pool tasks in queue</name><type>DEPENDENT</type><key>es.node.thread_pool.write.queue[{#ES.NODE}]</key><delay>0</delay><history>7d</history><description>The number of tasks in queue for the write thread pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.write.queue.first()</parameter></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>write-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags></item_prototype><item_prototype><uuid>a21213815a30485a88b183e7b40a4e7e</uuid><name>ES {#ES.NODE}: Write thread pool executor tasks rejected</name><type>DEPENDENT</type><key>es.node.thread_pool.write.rejected.rate[{#ES.NODE}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>rps</units><description>The number of tasks rejected by the write thread pool executor.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$..[?(@.name=='{#ES.NODE}')].thread_pool.write.rejected.first()</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>es.nodes.get_stats</key></master_item><tags><tag><tag>component</tag><value>write-thread-pool</value></tag><tag><tag>node</tag><value>{#ES.NODE}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>1f5e30a34bb84cef831670974ec7c3e8</uuid><expression>min(/Elasticsearch Cluster by HTTP/es.node.thread_pool.write.rejected.rate[{#ES.NODE}],5m)&gt;0</expression><name>ES {#ES.NODE}: Write thread pool executor has the rejected tasks</name><event_name>ES {#ES.NODE}: Write thread pool executor has the rejected tasks (for 5m)</event_name><priority>WARNING</priority><description>The number of tasks rejected by the write thread pool executor is over 0 for 5m.</description><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>0725d91f63b64346bbef2c20d2901e9b</uuid><name>ES {#ES.NODE}: Latency</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.search.query_latency[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.indexing.index_latency[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.search.fetch_latency[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.flush.latency[{#ES.NODE}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>5196ed75f24d48f7ae55b564b8d925e5</uuid><name>ES {#ES.NODE}: Query load</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.search.fetch_current[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.indices.search.query_current[{#ES.NODE}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>6d0e4fde0eeb47b6af4c9f40311b384d</uuid><name>ES {#ES.NODE}: Refresh thread pool</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.refresh.active[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.refresh.queue[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.refresh.completed.rate[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.refresh.rejected.rate[{#ES.NODE}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>9abe085b960d40bf8a99c88ec3564a8d</uuid><name>ES {#ES.NODE}: Search thread pool</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.search.active[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.search.queue[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.search.completed.rate[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.search.rejected.rate[{#ES.NODE}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>689492a2614642a1a5d3279c42b29e85</uuid><name>ES {#ES.NODE}: Write thread pool</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.write.active[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.write.queue[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.write.completed.rate[{#ES.NODE}]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.node.thread_pool.write.rejected.rate[{#ES.NODE}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><timeout>15s</timeout><url>{$ELASTICSEARCH.SCHEME}://{HOST.CONN}:{$ELASTICSEARCH.PORT}/_nodes/_all/nodes</url><lld_macro_paths><lld_macro_path><lld_macro>{#ES.NODE}</lld_macro><path>$..name.first()</path></lld_macro_path></lld_macro_paths><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.nodes.[*]</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>software</value></tag><tag><tag>target</tag><value>elasticsearch</value></tag></tags><macros><macro><macro>{$ELASTICSEARCH.FETCH_LATENCY.MAX.WARN}</macro><value>100</value><description>Maximum of fetch latency in milliseconds for trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.FLUSH_LATENCY.MAX.WARN}</macro><value>100</value><description>Maximum of flush latency in milliseconds for trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.HEAP_USED.MAX.CRIT}</macro><value>95</value><description>The maximum percent in the use of JVM heap for critically trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.HEAP_USED.MAX.WARN}</macro><value>85</value><description>The maximum percent in the use of JVM heap for warning trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.INDEXING_LATENCY.MAX.WARN}</macro><value>100</value><description>Maximum of indexing latency in milliseconds for trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.PASSWORD}</macro><description>The password of the Elasticsearch.</description></macro><macro><macro>{$ELASTICSEARCH.PORT}</macro><value>9200</value><description>The port of the Elasticsearch host.</description></macro><macro><macro>{$ELASTICSEARCH.QUERY_LATENCY.MAX.WARN}</macro><value>100</value><description>Maximum of query latency in milliseconds for trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.RESPONSE_TIME.MAX.WARN}</macro><value>10s</value><description>The ES cluster maximum response time in seconds for trigger expression.</description></macro><macro><macro>{$ELASTICSEARCH.SCHEME}</macro><value>http</value><description>The scheme of the Elasticsearch (http/https).</description></macro><macro><macro>{$ELASTICSEARCH.USERNAME}</macro><description>The username of the Elasticsearch.</description></macro></macros><valuemaps><valuemap><uuid>d651bdf75d0849d5ab2b0802fab76e22</uuid><name>ES cluster state</name><mappings><mapping><value>0</value><newvalue>green</newvalue></mapping><mapping><value>1</value><newvalue>yellow</newvalue></mapping><mapping><value>2</value><newvalue>red</newvalue></mapping><mapping><value>255</value><newvalue>unknown</newvalue></mapping></mappings></valuemap><valuemap><uuid>15d416d869894fdb959ca2cda2c5e37c</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><triggers><trigger><uuid>a2f33888d2774325b7955b633a7aae81</uuid><expression>(last(/Elasticsearch Cluster by HTTP/es.nodes.fs.total_in_bytes)-last(/Elasticsearch Cluster by HTTP/es.nodes.fs.available_in_bytes))/(last(/Elasticsearch Cluster by HTTP/es.cluster.number_of_data_nodes)-1)&gt;last(/Elasticsearch Cluster by HTTP/es.nodes.fs.available_in_bytes)</expression><name>ES: Cluster does not have enough space for resharding</name><priority>HIGH</priority><description>There is not enough disk space for index resharding.</description><tags><tag><tag>scope</tag><value>capacity</value></tag></tags></trigger></triggers><graphs><graph><uuid>50f90b092fa24658b83b131fa7a3f2ce</uuid><name>ES: Cluster health</name><graph_items><graph_item><color>1A7C11</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.inactive_shards_percent_as_number</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.relocating_shards</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.initializing_shards</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.unassigned_shards</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FC6EA3</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.delayed_unassigned_shards</key></item></graph_item><graph_item><sortorder>5</sortorder><color>6C59DC</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.number_of_pending_tasks</key></item></graph_item><graph_item><sortorder>6</sortorder><color>AC8C14</color><item><host>Elasticsearch Cluster by HTTP</host><key>es.cluster.task_max_waiting_in_queue</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
