<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:40Z</date><groups><group><uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid><name>Templates/Applications</name></group></groups><templates><template><uuid>a8d91e4f36794e32b73090d5edf3d7ae</uuid><template>Apache by Zabbix agent</template><name>Apache by Zabbix agent</name><description>Get metrics from mod_status module using HTTP agent.
https://httpd.apache.org/docs/current/mod/mod_status.html

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/384764-discussion-thread-for-official-zabbix-template-apache

Template tooling version used: 0.41</description><groups><group><name>Templates/Applications</name></group></groups><items><item><uuid>2d3ebb059bd944ee8a7b95e2c60b08f0</uuid><name>Apache: Total bytes</name><type>DEPENDENT</type><key>apache.bytes</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>B</units><description>Total bytes served</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$[&quot;Total kBytes&quot;]</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>be97c53d82f846cdbc2d0ec640435b6f</uuid><name>Apache: Bytes per second</name><type>DEPENDENT</type><key>apache.bytes.rate</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>Bps</units><description>Calculated as change rate for 'Total bytes' stat.
BytesPerSec is not used, as it counts average since last Apache server start.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$[&quot;Total kBytes&quot;]</parameter></parameters></step><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>5919f29c692b468fb5642e83f408c2e5</uuid><name>Apache: Total requests</name><type>DEPENDENT</type><key>apache.requests</key><delay>0</delay><history>7d</history><description>A total number of accesses</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$[&quot;Total Accesses&quot;]</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>7e1e674a23d24fafa31b76a048fe9fd0</uuid><name>Apache: Requests per second</name><type>DEPENDENT</type><key>apache.requests.rate</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><description>Calculated as change rate for 'Total requests' stat.
ReqPerSec is not used, as it counts average since last Apache server start.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$[&quot;Total Accesses&quot;]</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>5a4bd2d6c2874d888ec4c82409e1c711</uuid><name>Apache: Uptime</name><type>DEPENDENT</type><key>apache.uptime</key><delay>0</delay><history>7d</history><units>uptime</units><description>Service uptime in seconds</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ServerUptimeSeconds</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>7872d9665c234f45941ca26206e0255c</uuid><expression>last(/Apache by Zabbix agent/apache.uptime)&lt;10m</expression><name>Apache: has been restarted</name><event_name>Apache: has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>78a611c2b15c4ae8949257b6fdf922f1</uuid><name>Apache: Version</name><type>DEPENDENT</type><key>apache.version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Service version</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ServerVersion</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>5124b17918f545758ca5c936332f51cd</uuid><expression>last(/Apache by Zabbix agent/apache.version,#1)&lt;&gt;last(/Apache by Zabbix agent/apache.version,#2) and length(last(/Apache by Zabbix agent/apache.version))&gt;0</expression><name>Apache: Version has changed</name><event_name>Apache: Version has changed (new version: {ITEM.VALUE})</event_name><priority>INFO</priority><description>Apache version has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>35f48761ec6d451bbb8b0d80cd0ccd91</uuid><name>Apache: Workers idle cleanup</name><type>DEPENDENT</type><key>apache.workers.cleanup</key><delay>0</delay><history>7d</history><description>Number of workers in cleanup state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.cleanup</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>ebd391702cbd432ab458578a3cb45361</uuid><name>Apache: Workers closing connection</name><type>DEPENDENT</type><key>apache.workers.closing</key><delay>0</delay><history>7d</history><description>Number of workers in closing state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.closing</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>6a961707e7084d8ebc09f572b15ef1fd</uuid><name>Apache: Workers DNS lookup</name><type>DEPENDENT</type><key>apache.workers.dnslookup</key><delay>0</delay><history>7d</history><description>Number of workers in dnslookup state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.dnslookup</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>fd383c9ace4647deb9d3e3882554b8d0</uuid><name>Apache: Workers finishing</name><type>DEPENDENT</type><key>apache.workers.finishing</key><delay>0</delay><history>7d</history><description>Number of workers in finishing state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.finishing</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>2a02413c0e9144b4a70b8a5a71d680e0</uuid><name>Apache: Workers keepalive (read)</name><type>DEPENDENT</type><key>apache.workers.keepalive</key><delay>0</delay><history>7d</history><description>Number of workers in keepalive state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.keepalive</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>ed71fb2ec75f4537a2937293add75274</uuid><name>Apache: Workers logging</name><type>DEPENDENT</type><key>apache.workers.logging</key><delay>0</delay><history>7d</history><description>Number of workers in logging state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.logging</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>6c38147f9f3449a194f36a6e6d828865</uuid><name>Apache: Workers reading request</name><type>DEPENDENT</type><key>apache.workers.reading</key><delay>0</delay><history>7d</history><description>Number of workers in reading state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.reading</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>47856ac3b68644e0861b593d3083d35b</uuid><name>Apache: Workers sending reply</name><type>DEPENDENT</type><key>apache.workers.sending</key><delay>0</delay><history>7d</history><description>Number of workers in sending state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.sending</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>60cf954a40594cf69afdd1bf0319c031</uuid><name>Apache: Workers slot with no current process</name><type>DEPENDENT</type><key>apache.workers.slot</key><delay>0</delay><history>7d</history><description>Number of slots with no current process</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.slot</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>441c797164bf4c8da8112d78240abc43</uuid><name>Apache: Workers starting up</name><type>DEPENDENT</type><key>apache.workers.starting</key><delay>0</delay><history>7d</history><description>Number of workers in starting state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.starting</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>ec87e89ee9304acd8c7a76e863cb4443</uuid><name>Apache: Workers waiting for connection</name><type>DEPENDENT</type><key>apache.workers.waiting</key><delay>0</delay><history>7d</history><description>Number of workers in waiting state</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Workers.waiting</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>b52addb50ccb415fb63eaf67076991c1</uuid><name>Apache: Total workers busy</name><type>DEPENDENT</type><key>apache.workers_total.busy</key><delay>0</delay><history>7d</history><description>Total number of busy worker threads/processes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.BusyWorkers</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>6955f78c203b435987b5ab75a1114867</uuid><name>Apache: Total workers idle</name><type>DEPENDENT</type><key>apache.workers_total.idle</key><delay>0</delay><history>7d</history><description>Total number of idle worker threads/processes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.IdleWorkers</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>267ca6fe038346e5be1113f3bf9b4023</uuid><name>Apache: Service response time</name><key>net.tcp.service.perf[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>s</units><tags><tag><tag>component</tag><value>application</value></tag><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>128905793a4b4a1db5a49f87e87d3383</uuid><expression>min(/Apache by Zabbix agent/net.tcp.service.perf[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;],5m)&gt;{$APACHE.RESPONSE_TIME.MAX.WARN}</expression><name>Apache: Service response time is too high</name><event_name>Apache: Service response time is too high (over {$APACHE.RESPONSE_TIME.MAX.WARN}s for 5m)</event_name><priority>WARNING</priority><manual_close>YES</manual_close><dependencies><dependency><name>Apache: Process is not running</name><expression>last(/Apache by Zabbix agent/proc.num[&quot;{$APACHE.PROCESS_NAME}&quot;])=0</expression></dependency><dependency><name>Apache: Service is down</name><expression>last(/Apache by Zabbix agent/net.tcp.service[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;])=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>369f00e2970048c786ce3bd609e65566</uuid><name>Apache: Service ping</name><key>net.tcp.service[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;]</key><history>7d</history><valuemap><name>Service state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>10m</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>application</value></tag><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>e24dbf9b89c34d839cb12a22b1103df3</uuid><expression>last(/Apache by Zabbix agent/net.tcp.service[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;])=0</expression><name>Apache: Service is down</name><priority>AVERAGE</priority><manual_close>YES</manual_close><dependencies><dependency><name>Apache: Process is not running</name><expression>last(/Apache by Zabbix agent/proc.num[&quot;{$APACHE.PROCESS_NAME}&quot;])=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>b73280fb0af64c7899abfc74cc074b13</uuid><name>Apache: CPU utilization</name><key>proc.cpu.util[&quot;{$APACHE.PROCESS_NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Process CPU utilization percentage.</description><tags><tag><tag>component</tag><value>cpu</value></tag></tags></item><item><uuid>384bf197e6a241b3b63bb89d009bba6b</uuid><name>Apache: Memory usage (rss)</name><key>proc.mem[&quot;{$APACHE.PROCESS_NAME}&quot;,,,,rss]</key><history>7d</history><units>B</units><description>Resident set size memory used by process in bytes.</description><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>f20b7a01ff134a128c54ea83af8557e2</uuid><name>Apache: Memory usage (vsize)</name><key>proc.mem[&quot;{$APACHE.PROCESS_NAME}&quot;,,,,vsize]</key><history>7d</history><units>B</units><description>Virtual memory size used by process in bytes.</description><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>233b5466014640e4b990ffd81fa19fa1</uuid><name>Apache: Number of processes running</name><key>proc.num[&quot;{$APACHE.PROCESS_NAME}&quot;]</key><history>7d</history><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>b62f49b09d6b4c6ca01ff60cd9dd2209</uuid><expression>last(/Apache by Zabbix agent/proc.num[&quot;{$APACHE.PROCESS_NAME}&quot;])=0</expression><name>Apache: Process is not running</name><priority>HIGH</priority><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>115413a0f5ab4caba418ab841ad81eba</uuid><name>Apache: Get status</name><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key><history>1h</history><trends>0</trends><value_type>TEXT</value_type><description>Getting data from a machine-readable version of the Apache status page.
https://httpd.apache.org/docs/current/mod/mod_status.html</description><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>// Convert Apache status to JSON
var lines = value.split('\n');
var output = {},
    workers = {
        '_': 0, 'S': 0, 'R': 0, 'W': 0,
        'K': 0, 'D': 0, 'C': 0, 'L': 0,
        'G': 0, 'I': 0, '.': 0
    };

// Get all &quot;Key: Value&quot; pairs as an object
for (var i = 0; i &lt; lines.length; i++) {
    var line = lines[i].match(/([A-z0-9 ]+): (.*)/);

    if (line !== null) {
        output[line[1]] = isNaN(line[2]) ? line[2] : Number(line[2]);
    }
}

// Multiversion metrics
output.ServerUptimeSeconds = output.ServerUptimeSeconds || output.Uptime;
output.ServerVersion = output.ServerVersion || output.Server;

// Parse &quot;Scoreboard&quot; to get worker count.
if (typeof output.Scoreboard === 'string') {
    for (var i = 0; i &lt; output.Scoreboard.length; i++) {
        var char = output.Scoreboard[i];

        workers[char]++;
    }
}

// Add worker data to the output
output.Workers = {
    waiting: workers['_'], starting: workers['S'], reading: workers['R'],
    sending: workers['W'], keepalive: workers['K'], dnslookup: workers['D'],
    closing: workers['C'], logging: workers['L'], finishing: workers['G'],
    cleanup: workers['I'], slot: workers['.']
};

// Return JSON string
return JSON.stringify(output);</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>raw</value></tag></tags><triggers><trigger><uuid>0166ec63913e4bbea25c54b458b3213a</uuid><expression>nodata(/Apache by Zabbix agent/web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;],30m)=1</expression><name>Apache: Failed to fetch status page</name><event_name>Apache: Failed to fetch status page (or no data for 30m)</event_name><priority>WARNING</priority><description>Zabbix has not received data for items for the last 30 minutes.</description><manual_close>YES</manual_close><dependencies><dependency><name>Apache: Process is not running</name><expression>last(/Apache by Zabbix agent/proc.num[&quot;{$APACHE.PROCESS_NAME}&quot;])=0</expression></dependency><dependency><name>Apache: Service is down</name><expression>last(/Apache by Zabbix agent/net.tcp.service[http,&quot;{$APACHE.STATUS.HOST}&quot;,&quot;{$APACHE.STATUS.PORT}&quot;])=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><uuid>36a82bdda7754c51a05da3bb0b65b83e</uuid><name>Event MPM discovery</name><type>DEPENDENT</type><key>apache.mpm.event.discovery</key><delay>0</delay><description>Additional metrics if event MPM is used
https://httpd.apache.org/docs/current/mod/event.html</description><item_prototypes><item_prototype><uuid>99df2ff5970b4497887371bcd16d5ada</uuid><name>Apache: Bytes per request</name><type>DEPENDENT</type><key>apache.bytes[per_request{#SINGLETON}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>B</units><description>Average number of client requests per second</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.BytesPerReq</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connection</value></tag></tags></item_prototype><item_prototype><uuid>2e0692f36b924b52ab7b2ff7788b641d</uuid><name>Apache: Connections async closing</name><type>DEPENDENT</type><key>apache.connections[async_closing{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of async connections in closing state (only applicable to event MPM)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ConnsAsyncClosing</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connection</value></tag></tags></item_prototype><item_prototype><uuid>33d3fec8f45c493097bab986d5ea1e55</uuid><name>Apache: Connections async keep alive</name><type>DEPENDENT</type><key>apache.connections[async_keep_alive{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of async connections in keep-alive state (only applicable to event MPM)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ConnsAsyncKeepAlive</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connection</value></tag></tags></item_prototype><item_prototype><uuid>9ad0e5c49e7c4b939eb7977a5158953f</uuid><name>Apache: Connections async writing</name><type>DEPENDENT</type><key>apache.connections[async_writing{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of async connections in writing state (only applicable to event MPM)</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ConnsAsyncWriting</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connection</value></tag></tags></item_prototype><item_prototype><uuid>0fbfbfae187040c790bb4d68f9e2fae5</uuid><name>Apache: Connections total</name><type>DEPENDENT</type><key>apache.connections[total{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of total connections</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.ConnsTotal</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>connection</value></tag></tags></item_prototype><item_prototype><uuid>778a1bfeaa1b474ba529e6c0a55a9949</uuid><name>Apache: Number of async processes</name><type>DEPENDENT</type><key>apache.process[num{#SINGLETON}]</key><delay>0</delay><history>7d</history><description>Number of async processes</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.Processes</parameter></parameters></step></preprocessing><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>4845e6716bd74e7698406e6d8389eba5</uuid><name>Apache: Current async connections{#SINGLETON}</name><graph_items><graph_item><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>apache.connections[async_closing{#SINGLETON}]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Apache by Zabbix agent</host><key>apache.connections[async_keep_alive{#SINGLETON}]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Apache by Zabbix agent</host><key>apache.connections[async_writing{#SINGLETON}]</key></item></graph_item><graph_item><sortorder>3</sortorder><drawtype>BOLD_LINE</drawtype><color>A54F10</color><item><host>Apache by Zabbix agent</host><key>apache.connections[total{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype><graph_prototype><uuid>19ecb4e04c3742daac1a0e06d5f98c0c</uuid><name>Apache: Current async processes{#SINGLETON}</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>apache.process[num{#SINGLETON}]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><master_item><key>web.page.get[&quot;{$APACHE.STATUS.SCHEME}://{$APACHE.STATUS.HOST}:{$APACHE.STATUS.PORT}/{$APACHE.STATUS.PATH}&quot;]</key></master_item><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>return JSON.stringify(JSON.parse(value).ServerMPM === 'event'
    ? [{'{#SINGLETON}': ''}] : []);</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>3h</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>software</value></tag><tag><tag>target</tag><value>apache</value></tag></tags><macros><macro><macro>{$APACHE.PROCESS_NAME}</macro><value>httpd</value><description>Apache server process name</description></macro><macro><macro>{$APACHE.RESPONSE_TIME.MAX.WARN}</macro><value>10</value><description>Maximum Apache response time in seconds for trigger expression</description></macro><macro><macro>{$APACHE.STATUS.HOST}</macro><value>127.0.0.1</value><description>Hostname or IP address of the Apache status page</description></macro><macro><macro>{$APACHE.STATUS.PATH}</macro><value>server-status?auto</value><description>The URL path</description></macro><macro><macro>{$APACHE.STATUS.PORT}</macro><value>80</value><description>The port of Apache status page</description></macro><macro><macro>{$APACHE.STATUS.SCHEME}</macro><value>http</value><description>Request scheme which may be http or https</description></macro></macros><dashboards><dashboard><uuid>c27c68fb9c234a09b4023076b45affc1</uuid><name>Apache performance</name><pages><page><widgets><widget><type>GRAPH_CLASSIC</type><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Apache by Zabbix agent</host><name>Apache: Requests per second</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><x>12</x><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Apache by Zabbix agent</host><name>Apache: Workers total</name></value></field></fields></widget><widget><type>GRAPH_PROTOTYPE</type><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>2</value></field><field><type>INTEGER</type><name>columns</name><value>1</value></field><field><type>INTEGER</type><name>rows</name><value>1</value></field><field><type>GRAPH_PROTOTYPE</type><name>graphid</name><value><host>Apache by Zabbix agent</host><name>Apache: Current async connections{#SINGLETON}</name></value></field></fields></widget><widget><type>GRAPH_PROTOTYPE</type><x>12</x><y>5</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>2</value></field><field><type>INTEGER</type><name>columns</name><value>1</value></field><field><type>INTEGER</type><name>rows</name><value>1</value></field><field><type>GRAPH_PROTOTYPE</type><name>graphid</name><value><host>Apache by Zabbix agent</host><name>Apache: Current async processes{#SINGLETON}</name></value></field></fields></widget><widget><type>GRAPH_CLASSIC</type><y>10</y><width>12</width><height>5</height><fields><field><type>INTEGER</type><name>source_type</name><value>0</value></field><field><type>GRAPH</type><name>graphid</name><value><host>Apache by Zabbix agent</host><name>Apache: Worker states</name></value></field></fields></widget></widgets></page></pages></dashboard></dashboards><valuemaps><valuemap><uuid>452297e814a84b08a72730a7b777e378</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><graphs><graph><uuid>d317a2ccde4f4a2ab20e983b27ae64e2</uuid><name>Apache: Memory usage</name><graph_items><graph_item><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>proc.mem[&quot;{$APACHE.PROCESS_NAME}&quot;,,,,vsize]</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Apache by Zabbix agent</host><key>proc.mem[&quot;{$APACHE.PROCESS_NAME}&quot;,,,,rss]</key></item></graph_item></graph_items></graph><graph><uuid>dfc5334e77ce45d286145cc08d036f38</uuid><name>Apache: Requests per second</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>apache.requests.rate</key></item></graph_item></graph_items></graph><graph><uuid>6f646e8c11b04e8a835b81bc17824593</uuid><name>Apache: Worker states</name><graph_items><graph_item><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>apache.workers.dnslookup</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Apache by Zabbix agent</host><key>apache.workers.cleanup</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>Apache by Zabbix agent</host><key>apache.workers.logging</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>Apache by Zabbix agent</host><key>apache.workers.reading</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FC6EA3</color><item><host>Apache by Zabbix agent</host><key>apache.workers.sending</key></item></graph_item><graph_item><sortorder>5</sortorder><color>6C59DC</color><item><host>Apache by Zabbix agent</host><key>apache.workers.starting</key></item></graph_item><graph_item><sortorder>6</sortorder><color>AC8C14</color><item><host>Apache by Zabbix agent</host><key>apache.workers.closing</key></item></graph_item><graph_item><sortorder>7</sortorder><color>611F27</color><item><host>Apache by Zabbix agent</host><key>apache.workers.finishing</key></item></graph_item><graph_item><sortorder>8</sortorder><color>F230E0</color><item><host>Apache by Zabbix agent</host><key>apache.workers.keepalive</key></item></graph_item><graph_item><sortorder>9</sortorder><color>FFAD40</color><item><host>Apache by Zabbix agent</host><key>apache.workers.slot</key></item></graph_item><graph_item><sortorder>10</sortorder><color>40CDFF</color><item><host>Apache by Zabbix agent</host><key>apache.workers.waiting</key></item></graph_item></graph_items></graph><graph><uuid>121c2d4feb0b4b53b027f1566107ab29</uuid><name>Apache: Workers total</name><type>STACKED</type><graph_items><graph_item><color>1A7C11</color><item><host>Apache by Zabbix agent</host><key>apache.workers_total.busy</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>Apache by Zabbix agent</host><key>apache.workers_total.idle</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
