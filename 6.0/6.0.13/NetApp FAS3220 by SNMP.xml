<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:51Z</date><groups><group><uuid>7c2cb727f85b492d88cd56e17127c64d</uuid><name>Templates/SAN</name></group></groups><templates><template><uuid>e118ab11c1ec4f9cbe21dfce1441c0f6</uuid><template>NetApp FAS3220 by SNMP</template><name>NetApp FAS3220 by SNMP</name><description>The template to monitor SAN NetApp FAS3220 cluster by Zabbix SNMP agent.

MIBs used:
HOST-RESOURCES-MIB
SNMPv2-MIB
NETAPP-MIB
IF-MIB

You can discuss this template or leave feedback on our forum https://www.zabbix.com/forum/zabbix-suggestions-and-feedback/416694-discussion-thread-for-official-zabbix-template-netapp-fas3220

Template tooling version used: 0.41</description><groups><group><name>Templates/SAN</name></group></groups><items><item><uuid>4239eba959f14e0ebc44a0fa7d124042</uuid><name>NetApp FAS3220: Failed disks count</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.6.4.7.0</snmp_oid><key>fas3220.disk[diskFailedCount]</key><history>7d</history><description>The number of disks that are currently broken.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>10m</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>storage</value></tag></tags></item><item><uuid>980e2c347d254c4d88d918b2171679bb</uuid><name>NetApp FAS3220: Failed disks message</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.6.4.10.0</snmp_oid><key>fas3220.disk[diskFailedMessage]</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>If diskFailedCount is non-zero, this is a string describing the failed disk or disks. Each failed disk is described.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>storage</value></tag></tags></item><item><uuid>7b6d8c8272714343bd420a32c6763c9e</uuid><name>NetApp FAS3220: Product firmware version</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.1.6.0</snmp_oid><key>fas3220.inventory[productFirmwareVersion]</key><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Version string for the firmware running on this platform.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>3f0418935b9d40e98d129f280ba5ba6b</uuid><name>NetApp FAS3220: Product version</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.1.2.0</snmp_oid><key>fas3220.inventory[productVersion]</key><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: NETAPP-MIB
Version string for the software running on this platform.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>62c6bb1b70ee4ece865b562e298cafb0</uuid><name>ICMP ping</name><type>SIMPLE</type><key>icmpping</key><history>1w</history><valuemap><name>Service state</name></valuemap><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>826eb817329249f59b7989c92ca62d99</uuid><expression>max(/NetApp FAS3220 by SNMP/icmpping,#3)=0</expression><name>Unavailable by ICMP ping</name><priority>HIGH</priority><description>Last three attempts returned timeout.  Please check device connectivity.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>f7c934ef77d04c00bdec19f8e3950d85</uuid><name>ICMP loss</name><type>SIMPLE</type><key>icmppingloss</key><history>1w</history><value_type>FLOAT</value_type><units>%</units><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>4fb4b0022ca3433c8da1402f1d996760</uuid><expression>min(/NetApp FAS3220 by SNMP/icmppingloss,5m)&gt;{$ICMP_LOSS_WARN} and min(/NetApp FAS3220 by SNMP/icmppingloss,5m)&lt;100</expression><name>High ICMP ping loss</name><opdata>Loss: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>Unavailable by ICMP ping</name><expression>max(/NetApp FAS3220 by SNMP/icmpping,#3)=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>72f8c27991b7440ba186f6eb037605cf</uuid><name>ICMP response time</name><type>SIMPLE</type><key>icmppingsec</key><history>1w</history><value_type>FLOAT</value_type><units>s</units><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>bb13f4d369294c0d83f8e6d888cbb062</uuid><expression>avg(/NetApp FAS3220 by SNMP/icmppingsec,5m)&gt;{$ICMP_RESPONSE_TIME_WARN}</expression><name>High ICMP ping response time</name><opdata>Value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><dependencies><dependency><name>High ICMP ping loss</name><expression>min(/NetApp FAS3220 by SNMP/icmppingloss,5m)&gt;{$ICMP_LOSS_WARN} and min(/NetApp FAS3220 by SNMP/icmppingloss,5m)&lt;100</expression></dependency><dependency><name>Unavailable by ICMP ping</name><expression>max(/NetApp FAS3220 by SNMP/icmpping,#3)=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>4380826947fc4df6a341fe074f42da6a</uuid><name>SNMP traps (fallback)</name><type>SNMP_TRAP</type><key>snmptrap.fallback</key><history>2w</history><trends>0</trends><value_type>LOG</value_type><description>The item is used to collect all SNMP traps unmatched by other snmptrap items</description><logtimefmt>hh:mm:sszyyyy/MM/dd</logtimefmt><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>045800cfeaf6448ab9a9e97f8b5172c1</uuid><name>System contact details</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.4.0</snmp_oid><key>system.contact[sysContact.0]</key><delay>15m</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB
The textual identification of the contact person for this managed node, together with information on how to contact this person.  If no contact information is known, the value is the zero-length string.</description><inventory_link>CONTACT</inventory_link><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>12h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>c12c6668d9564855b227dee42a9d86f8</uuid><name>System description</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.1.0</snmp_oid><key>system.descr[sysDescr.0]</key><delay>15m</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB
A textual description of the entity. This value should
include the full name and version identification of the system's hardware type, software operating-system, and
networking software.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>12h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>76483f37faf8485b922640a6ef8bb672</uuid><name>Uptime (hardware)</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.25.1.1.0</snmp_oid><key>system.hw.uptime[hrSystemUptime.0]</key><delay>30s</delay><history>2w</history><trends>0d</trends><units>uptime</units><description>MIB: HOST-RESOURCES-MIB
The amount of time since this host was last initialized. Note that this is different from sysUpTime in the SNMPv2-MIB [RFC1907] because sysUpTime is the uptime of the network management portion of the system.</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>f46b736cdb7f44fcacf33d272d905db8</uuid><name>System location</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.6.0</snmp_oid><key>system.location[sysLocation.0]</key><delay>15m</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB
The physical location of this node (e.g., `telephone closet, 3rd floor').  If the location is unknown, the value is the zero-length string.</description><inventory_link>LOCATION</inventory_link><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>12h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>65c5b2a3742c4c6d8a04c63bb96b46c6</uuid><name>System name</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.5.0</snmp_oid><key>system.name</key><delay>15m</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB
An administratively-assigned name for this managed node.By convention, this is the node's fully-qualified domain name.  If the name is unknown, the value is the zero-length string.</description><inventory_link>NAME</inventory_link><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>12h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>5266fcf7c9db457885c219385cfd5025</uuid><expression>last(/NetApp FAS3220 by SNMP/system.name,#1)&lt;&gt;last(/NetApp FAS3220 by SNMP/system.name,#2) and length(last(/NetApp FAS3220 by SNMP/system.name))&gt;0</expression><name>System name has changed</name><event_name>System name has changed (new name: {ITEM.VALUE})</event_name><priority>INFO</priority><description>System name has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag><tag><tag>scope</tag><value>security</value></tag></tags></trigger></triggers></item><item><uuid>564b458cee7a4a2bb2b4f4777bead32d</uuid><name>Uptime (network)</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.3.0</snmp_oid><key>system.net.uptime[sysUpTime.0]</key><delay>30s</delay><history>2w</history><trends>0d</trends><units>uptime</units><description>MIB: SNMPv2-MIB
The time (in hundredths of a second) since the network management portion of the system was last re-initialized.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>2d9d7b390c774a188a07dbb5bb4a583e</uuid><name>System object ID</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.2.1.1.2.0</snmp_oid><key>system.objectid[sysObjectID.0]</key><delay>15m</delay><history>2w</history><trends>0</trends><value_type>CHAR</value_type><description>MIB: SNMPv2-MIB
The vendor's authoritative identification of the network management subsystem contained in the entity.  This value is allocated within the SMI enterprises subtree (1.3.6.1.4.1) and provides an easy and unambiguous means for determining`what kind of box' is being managed.  For example, if vendor`Flintstones, Inc.' was assigned the subtree1.3.6.1.4.1.4242, it could assign the identifier 1.3.6.1.4.1.4242.1.1 to its `Fred Router'.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>12h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>fff713712c44477aa081445d9962c002</uuid><name>SNMP agent availability</name><type>INTERNAL</type><key>zabbix[host,snmp,available]</key><history>7d</history><description>Availability of SNMP checks on the host. The value of this item corresponds to availability icons in the host list.
Possible value:
0 - not available
1 - available
2 - unknown</description><valuemap><name>zabbix.host.available</name></valuemap><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>network</value></tag></tags><triggers><trigger><uuid>e778b1ae80174f7aa82085b4882e1160</uuid><expression>max(/NetApp FAS3220 by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0</expression><name>No SNMP data collection</name><opdata>Current state: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><description>SNMP is not available for polling. Please check device connectivity and SNMP settings.</description><dependencies><dependency><name>Unavailable by ICMP ping</name><expression>max(/NetApp FAS3220 by SNMP/icmpping,#3)=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><uuid>c999a3f338934982aa4359d9f0a8df30</uuid><name>Cluster metrics discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#NODE.NAME},1.3.6.1.4.1.789.1.25.2.1.1]</snmp_oid><key>fas3220.cluster.discovery</key><delay>1h</delay><description>Discovery of Cluster metrics per node</description><item_prototypes><item_prototype><uuid>2363873641874c50b70bf170e05ea10e</uuid><name>Node {#NODE.NAME}: Failed FAN count</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.19.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeEnvFailedFanCount, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>Count of the number of chassis fans that are not operating within the recommended RPM range.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>ac1d666db8c0495c860a59d98caeb4ab</uuid><name>Node {#NODE.NAME}: Failed FAN message</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.20.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeEnvFailedFanMessage, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Text message describing current condition of chassis fans. This is useful only if envFailedFanCount is not zero.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>ad74f96ff33249e1937c2702c4bbce94</uuid><name>Node {#NODE.NAME}: Degraded power supplies count</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.21.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeEnvFailedPowerSupplyCount, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>Count of the number of power supplies that are in degraded mode.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>343e02ff8f9f417292a2bb548db355ee</uuid><name>Node {#NODE.NAME}: Degraded power supplies message</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.22.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeEnvFailedPowerSupplyMessage, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>Text message describing the state of any power supplies that are currently degraded. This is useful only if envFailedPowerSupplyCount is not zero.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>73853db2e6924c8395aac1655fab24b4</uuid><name>Node {#NODE.NAME}: Over-temperature</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.18.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeEnvOverTemperature, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>An indication of whether the hardware is currently operating outside of its recommended temperature range. The hardware will shutdown if the temperature exceeds critical thresholds.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>e03547e4ede74580909ed57c7f53dac1</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvOverTemperature, &quot;{#NODE.NAME}&quot;])=2</expression><name>Node {#NODE.NAME}: Temperature is over than recommended</name><priority>HIGH</priority><description>The hardware will shutdown if the temperature exceeds critical thresholds.</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>c6663dc780f14fd4bb01a108d0d2c6b0</uuid><name>Node {#NODE.NAME}: Health</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.11.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeHealth, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>Whether or not the node can communicate with the cluster.</description><valuemap><name>Service state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>health</value></tag><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>0c331366ac9d4398bfc815c3cb241e7c</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeHealth, &quot;{#NODE.NAME}&quot;])=0</expression><name>Node {#NODE.NAME}: Node can not communicate with the cluster</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>b8c922cbd60e4432822268c2a642fd95</uuid><name>Node {#NODE.NAME}: Location</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.3.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeLocation, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Node Location. Same as sysLocation for a specific node.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>eae21d81e97a47dfa80701fb343294b4</uuid><name>Node {#NODE.NAME}: Model</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.4.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeModel, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Node Model. Same as productModel for a specific node.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>cd00e7ff616f4b69a94af9e9494b060e</uuid><name>Node {#NODE.NAME}: NVRAM battery status</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.17.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeNvramBatteryStatus, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>An indication of the current status of the NVRAM battery or batteries.
Batteries which are fully or partially discharged may not fully protect the system during a crash. The end-of-life status values are based on the manufacturer's recommended life for the batteries.
Possible values:
ok(1),
partiallyDischarged(2),
fullyDischarged(3),
notPresent(4),
nearEndOfLife(5),
atEndOfLife(6),
unknown(7),
overCharged(8),
fullyCharged(9).</description><valuemap><name>FAS3220 NVRAM battery status</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>567a28dd5b364aea84a43438aee24c5c</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeNvramBatteryStatus, &quot;{#NODE.NAME}&quot;])&lt;&gt;1</expression><name>Node {#NODE.NAME}: NVRAM battery status is not OK</name><priority>AVERAGE</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>4fc5f0cdd87147d59fe8d073e361c2d8</uuid><name>Node {#NODE.NAME}: Serial number</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.5.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeSerialNumber, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Node Serial Number. Same as productSerialNum for a specific node.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags></item_prototype><item_prototype><uuid>8ed05a8e28bd4b87b2b5981b45ec9fbe</uuid><name>Node {#NODE.NAME}: Uptime</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.25.2.1.7.{#SNMPINDEX}</snmp_oid><key>fas3220.cluster[nodeUptime, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><units>s</units><description>Node uptime. Same as sysUpTime for a specific node.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>node</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>6040422dc0b34863a90af558d72956ee</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeUptime, &quot;{#NODE.NAME}&quot;])&lt;10m</expression><name>Node {#NODE.NAME}: Host has been restarted</name><event_name>Node {#NODE.NAME}: {HOST.NAME} has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>64a737bc63b1463eb533d2a187c6b58a</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyCount, &quot;{#NODE.NAME}&quot;])&gt;0 and last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyMessage, &quot;{#NODE.NAME}&quot;])=last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedPowerSupplyMessage, &quot;{#NODE.NAME}&quot;])</expression><name>Node {#NODE.NAME}: Degraded power supplies count is more than zero</name><priority>AVERAGE</priority><description>{{ITEM.VALUE2}.regsub(&quot;(.*)&quot;, \1)}</description><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger_prototype><trigger_prototype><uuid>36b7326a738e41b7be3e0a478bc9f858</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanCount, &quot;{#NODE.NAME}&quot;])&gt;0 and last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanMessage, &quot;{#NODE.NAME}&quot;])=last(/NetApp FAS3220 by SNMP/fas3220.cluster[nodeEnvFailedFanMessage, &quot;{#NODE.NAME}&quot;])</expression><name>Node {#NODE.NAME}: Failed FAN count is over than zero</name><priority>HIGH</priority><description>{{ITEM.VALUE2}.regsub(&quot;(.*)&quot;, \1)}</description><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></discovery_rule><discovery_rule><uuid>e0b97a8434f94d0ba14023cc434a8926</uuid><name>CPU discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#NODE.NAME},1.3.6.1.4.1.789.1.2.1.14.1.1]</snmp_oid><key>fas3220.cpu.discovery</key><delay>1h</delay><description>Discovery of CPU metrics per node</description><item_prototypes><item_prototype><uuid>0cf9871cac314b0fb92710144acf3f66</uuid><name>Node {#NODE.NAME}: CPU utilization</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.2.1.14.1.4.{#SNMPINDEX}</snmp_oid><key>fas3220.cpu[cDOTCpuBusyTimePerCent, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>The average, over the last minute, of the percentage of time that this processor was not idle.</description><tags><tag><tag>component</tag><value>cpu</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>adb98d2d2f13435bbe1897208bb86989</uuid><expression>min(/NetApp FAS3220 by SNMP/fas3220.cpu[cDOTCpuBusyTimePerCent, &quot;{#NODE.NAME}&quot;],5m)&gt;{$CPU.UTIL.CRIT}</expression><name>Node {#NODE.NAME}: High CPU utilization</name><event_name>Node {#NODE.NAME}: High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)</event_name><opdata>Current utilization: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><description>CPU utilization is too high. The system might be slow to respond.</description><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>5e87cb453b3f41138d75783eabeeb17b</uuid><name>Node {#NODE.NAME}: CPU utilization</name><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.cpu[cDOTCpuBusyTimePerCent, &quot;{#NODE.NAME}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes></discovery_rule><discovery_rule><uuid>b6dcacd213ce436aabb6c33d236fc077</uuid><name>Filesystems discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#FSNAME},1.3.6.1.4.1.789.1.5.4.1.2,{#FSTYPE},1.3.6.1.4.1.789.1.5.4.1.23,{#VSERVER},1.3.6.1.4.1.789.1.5.4.1.34]</snmp_oid><key>fas3220.fs.discovery</key><delay>1h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#FSTYPE}</macro><value>{$FAS3220.FS.TYPE.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#FSTYPE}</macro><value>{$FAS3220.FS.TYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>D</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$FAS3220.FS.NAME.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#FSNAME}</macro><value>{$FAS3220.FS.NAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><description>Filesystems discovery with filter.</description><item_prototypes><item_prototype><uuid>4f77d54089e34da8bf5b50033e3e2ca3</uuid><name>{#VSERVER}{#FSNAME}: Total space available</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.31.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[df64AvailKBytes, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><units>B</units><description>The total disk space that is free for use on {#FSNAME}.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>6ab014a44ad84966a97125c478b10789</uuid><expression>min(/NetApp FAS3220 by SNMP/fas3220.fs[df64AvailKBytes, &quot;{#VSERVER}{#FSNAME}&quot;],{$FAS3220.FS.TIME:&quot;{#FSNAME}&quot;})&lt;{$FAS3220.FS.AVAIL.MIN.CRIT:&quot;{#FSNAME}&quot;} and {$FAS3220.FS.USE.PCT:&quot;{#FSNAME}&quot;}=0</expression><name>{#VSERVER}{#FSNAME}: Disk space is too low</name><event_name>{#VSERVER}{#FSNAME}: Disk space is too low (below {$FAS3220.FS.AVAIL.MIN.CRIT:&quot;{#FSNAME}&quot;} for {$FAS3220.FS.TIME:&quot;{#FSNAME}&quot;})</event_name><priority>HIGH</priority><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>be517380be12421c867ed48e16fe5c4e</uuid><name>{#VSERVER}{#FSNAME}: Total space</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.29.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[df64TotalKBytes, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><units>B</units><description>The total capacity in Bytes for {#FSNAME}.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags></item_prototype><item_prototype><uuid>d4989438446a4d228b83b0b22c11af90</uuid><name>{#VSERVER}{#FSNAME}: Total space used</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.30.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[df64UsedKBytes, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><units>B</units><description>The total disk space that is in use on {#FSNAME}.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>1024</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags></item_prototype><item_prototype><uuid>74868589894f468fa5daada73c042aca</uuid><name>{#VSERVER}{#FSNAME}: Saved by compression percents</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.38.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[dfCompressSavedPercent, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Provides the percentage of compression savings in a volume, which is ((compr_saved/used)) * 10(compr_saved + 0). This is only returned for volumes.</description><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags></item_prototype><item_prototype><uuid>6fd01f706f8f4088b91cd6aad58a65ce</uuid><name>{#VSERVER}{#FSNAME}: Saved by deduplication percents</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.40.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[dfDedupeSavedPercent, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Provides the percentage of deduplication savings in a volume, which is ((dedup_saved/(dedup_saved + used)) * 100). This is only returned for volumes.</description><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags></item_prototype><item_prototype><uuid>b74fafe10c844feda4e72346b2fe88f6</uuid><name>{#VSERVER}{#FSNAME}: Used space percents</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.5.4.1.6.{#SNMPINDEX}</snmp_oid><key>fas3220.fs[dfPerCentKBytesCapacity, &quot;{#VSERVER}{#FSNAME}&quot;]</key><history>7d</history><units>%</units><description>The percentage of disk space currently in use on {#FSNAME}.</description><tags><tag><tag>component</tag><value>filesystem</value></tag><tag><tag>filesystem</tag><value>{#FSNAME}</value></tag><tag><tag>vserver</tag><value>{#VSERVER}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>712d9096c8064ef19005c4989794db45</uuid><expression>max(/NetApp FAS3220 by SNMP/fas3220.fs[dfPerCentKBytesCapacity, &quot;{#VSERVER}{#FSNAME}&quot;],{$FAS3220.FS.TIME:&quot;{#FSNAME}&quot;})&gt;{$FAS3220.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;} and {$FAS3220.FS.USE.PCT:&quot;{#FSNAME}&quot;}=1</expression><name>{#VSERVER}{#FSNAME}: Disk space is too low</name><event_name>{#VSERVER}{#FSNAME}: Disk space is too low (used over {$FAS3220.FS.PUSED.MAX.CRIT:&quot;{#FSNAME}&quot;}% for {$FAS3220.FS.TIME:&quot;{#FSNAME}&quot;})</event_name><priority>HIGH</priority><tags><tag><tag>scope</tag><value>capacity</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes><graph_prototypes><graph_prototype><uuid>938f484a19454b8d9c80be5dbc1887df</uuid><name>{#VSERVER}{#FSNAME}: Free space</name><type>STACKED</type><graph_items><graph_item><drawtype>FILLED_REGION</drawtype><color>1A7C11</color><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.fs[df64UsedKBytes, &quot;{#VSERVER}{#FSNAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>FILLED_REGION</drawtype><color>2774A4</color><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.fs[df64UsedKBytes, &quot;{#VSERVER}{#FSNAME}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><overrides><override><name>Do not discover aggregate metrics</name><step>1</step><filter><conditions><condition><macro>{#FSTYPE}</macro><value>3|4</value><formulaid>A</formulaid></condition></conditions></filter><operations><operation><operationobject>ITEM_PROTOTYPE</operationobject><operator>LIKE</operator><value>Saved</value><discover>NO_DISCOVER</discover></operation></operations></override></overrides></discovery_rule><discovery_rule><uuid>e06a66c956164722a289cb8832341451</uuid><name>HA discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#NODE.NAME},1.3.6.1.4.1.789.1.21.2.1.1,{#PARTNER.NAME},1.3.6.1.4.1.789.1.21.2.1.8]</snmp_oid><key>fas3220.ha.discovery</key><delay>1h</delay><description>Discovery of high availability metrics per node</description><item_prototypes><item_prototype><uuid>a6d4f2976de841108b53be013376549b</uuid><name>Node {#NODE.NAME}: Cannot takeover cause</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.21.2.1.5.{#SNMPINDEX}</snmp_oid><key>fas3220.ha[haCannotTakeoverCause, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>The reason node cannot take over it's HA partner {#PARTNER.NAME}.
Possible states:
  ok(1),
  unknownReason(2),
  disabledByOperator(3),
  interconnectOffline(4),
  disabledByPartner(5),
  takeoverFailed(6),
  mailboxIsInDegradedState(7),
  partnermailboxIsInUninitialisedState(8),
  mailboxVersionMismatch(9),
  nvramSizeMismatch(10),
  kernelVersionMismatch(11),
  partnerIsInBootingStage(12),
  diskshelfIsTooHot(13),
  partnerIsPerformingRevert(14),
  nodeIsPerformingRevert(15),
  sametimePartnerIsAlsoTryingToTakeUsOver(16),
  alreadyInTakenoverMode(17),
  nvramLogUnsynchronized(18),
  stateofBackupMailboxIsDoubtful(19).</description><valuemap><name>FAS3220 HA cannot takeover cause</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>ha</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>798e093f3c9941e6a2d7edc24dd22835</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.ha[haCannotTakeoverCause, &quot;{#NODE.NAME}&quot;])&lt;&gt;1</expression><name>Node {#NODE.NAME}: Node cannot takeover it's HA partner {#PARTNER.NAME}. Reason: {ITEM.VALUE}</name><priority>HIGH</priority><description>Possible reasons:
  unknownReason(2),
  disabledByOperator(3),
  interconnectOffline(4),
  disabledByPartner(5),
  takeoverFailed(6),
  mailboxIsInDegradedState(7),
  partnermailboxIsInUninitialisedState(8),
  mailboxVersionMismatch(9),
  nvramSizeMismatch(10),
  kernelVersionMismatch(11),
  partnerIsInBootingStage(12),
  diskshelfIsTooHot(13),
  partnerIsPerformingRevert(14),
  nodeIsPerformingRevert(15),
  sametimePartnerIsAlsoTryingToTakeUsOver(16),
  alreadyInTakenoverMode(17),
  nvramLogUnsynchronized(18),
  stateofBackupMailboxIsDoubtful(19).</description><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>70624f45000443999b416d5806ead949</uuid><name>Node {#NODE.NAME}: HA settings</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.21.2.1.3.{#SNMPINDEX}</snmp_oid><key>fas3220.ha[haSettings, &quot;{#NODE.NAME}&quot;]</key><history>7d</history><description>High Availability configuration settings. The value notConfigured(1) indicates that the HA is not licensed. The thisNodeDead(5) setting indicates that this node has been takenover.</description><valuemap><name>FAS3220 HA settings</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>ha</value></tag><tag><tag>node</tag><value>{#NODE.NAME}</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>f4ee8e2a63e8471598b6aad929151404</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.ha[haSettings, &quot;{#NODE.NAME}&quot;])=1</expression><name>Node {#NODE.NAME}: HA is not licensed</name><priority>AVERAGE</priority><description>The value notConfigured(1) indicates that the HA is not licensed.</description><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype><trigger_prototype><uuid>db2c37150e1649fba89898459150ada8</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.ha[haSettings, &quot;{#NODE.NAME}&quot;])=5</expression><name>Node {#NODE.NAME}: Node has been taken over</name><priority>HIGH</priority><description>The thisNodeDead(5) setting indicates that this node has been takenover.</description><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype></item_prototypes></discovery_rule><discovery_rule><uuid>0984cb890ec64f748e6bc5531bf80112</uuid><name>Network ports discovery</name><type>SNMP_AGENT</type><snmp_oid>discovery[{#IFNAME},1.3.6.1.4.1.789.1.22.2.1.2,{#NODE},1.3.6.1.4.1.789.1.22.2.1.1,{#TYPE},1.3.6.1.4.1.789.1.22.2.1.15,{#ROLE},1.3.6.1.4.1.789.1.22.2.1.3,{#IFDESCR},1.3.6.1.4.1.789.1.22.1.2.1.2]</snmp_oid><key>fas3220.net.discovery</key><delay>1h</delay><filter><evaltype>AND</evaltype><conditions><condition><macro>{#TYPE}</macro><value>{$FAS3220.NET.PORT.TYPE.MATCHES}</value><formulaid>D</formulaid></condition><condition><macro>{#TYPE}</macro><value>{$FAS3220.NET.PORT.TYPE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>E</formulaid></condition><condition><macro>{#ROLE}</macro><value>{$FAS3220.NET.PORT.ROLE.MATCHES}</value><formulaid>C</formulaid></condition><condition><macro>{#TYPE}</macro><value>{$FAS3220.NET.PORT.ROLE.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>F</formulaid></condition><condition><macro>{#IFNAME}</macro><value>{$FAS3220.NET.PORT.NAME.MATCHES}</value><formulaid>A</formulaid></condition><condition><macro>{#IFNAME}</macro><value>{$FAS3220.NET.PORT.NAME.NOT_MATCHES}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>B</formulaid></condition></conditions></filter><description>Network interfaces discovery with filter.</description><item_prototypes><item_prototype><uuid>abbab9f31f7a4e07a2e5f3fcb2150677</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Inbound packets discarded</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.28.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64InDiscards, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><delay>3m</delay><history>7d</history><description>MIB: IF-MIB
The number of inbound packets that were chosen to be discarded even though no errors had been detected to prevent their being deliverable to a higher-layer protocol. One possible reason for discarding such a packet could be to free up buffer space.</description><preprocessing><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>6f8c273e8efa40e3888716c7cad79f3f</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Inbound packets with errors</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.29.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64InErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><delay>3m</delay><history>7d</history><description>MIB: IF-MIB
The number of inbound packets that contained errors preventing them from being deliverable to a higher-layer protocol.</description><preprocessing><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>6fa2bb39354e4024805a82acf4feab29</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Bits received</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.25.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64InOctets, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><units>bps</units><description>The total number of octets received on the interface, including framing characters.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>8</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>b414bb327e744c4b932263502da396c1</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Outbound packets discarded</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.34.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64OutDiscards, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><delay>3m</delay><history>7d</history><description>MIB: IF-MIB
The number of outbound packets that were chosen to be discarded even though no errors had been detected to prevent their being transmitted. One possible reason for discarding such a packet could be to free up buffer space.</description><preprocessing><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>baf565d001c044f8b8b5ea5caf09ea60</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Outbound packets with errors</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.35.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64OutErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><delay>3m</delay><history>7d</history><description>MIB: IF-MIB
The number of outbound packets that could not be transmitted because of errors.</description><preprocessing><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>cd474bb9b7b741e8a19654f9e2a67890</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Bits sent</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.1.2.1.31.{#IFSNMPINDEX}</snmp_oid><key>fas3220.net.if[if64OutOctets, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><units>bps</units><description>The total number of octets transmitted out of the interface, including framing characters.</description><preprocessing><step><type>MULTIPLIER</type><parameters><parameter>8</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>fc759bc9f1fd479498157c5ded9d1123</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Health degraded reason</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.32.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportDegradedReason, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><trends>0</trends><value_type>TEXT</value_type><description>The list of reasons why the port is marked as degraded.</description><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>d50375f621464117afa5c469d06aa3a6</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Health</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.30.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportHealthStatus, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><value_type>FLOAT</value_type><description>The health status of the port.</description><valuemap><name>FAS3220 Port health</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>13b38a463e7a49058ca6907a9430d49f</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): State</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.4.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportLinkState, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><description>The link-state of the port. Normally it is either UP(2) or DOWN(3).</description><valuemap><name>FAS3220 Port link state</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>ba18b4cebd7547c1bd6f92bd9e0ca791</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Role</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.3.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportRole, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><description>Role of the port. A port must have one of the following roles: cluster(1), data(2), mgmt(3), intercluster(4), cluster-mgmt(5) or undef(0). The cluster port is used to communicate to other node(s) in the cluster. The data port services clients' requests. It is where all the file requests come in. The management port is used by administrator to manage resources within a node. The intercluster port is used to communicate to other cluster. The cluster-mgmt port is used to manage resources within the cluster. The undef role is for the port that has not yet been assigned a role.</description><valuemap><name>FAS3220 Port role</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>7e8816bdb15e4f1ab60c2c1b9706a34f</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Speed</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.11.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportSpeedOper, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><description>The speed appears on the port. It can be either undef(0), auto(1), ten Mb/s(2), hundred Mb/s(3), one Gb/s(4), or ten Gb/s(5).</description><valuemap><name>FAS3220 Port speed</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype><item_prototype><uuid>ea7cd0c80dae43e3bfd871b8ce1c541b</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Up by an administrator</name><type>SNMP_AGENT</type><snmp_oid>1.3.6.1.4.1.789.1.22.2.1.14.{#SNMPINDEX}</snmp_oid><key>fas3220.net.port[netportUpAdmin, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key><history>7d</history><description>Indicates whether the port status is set 'UP' by an administrator.</description><valuemap><name>FAS3220 Port UP by administrator</name></valuemap><preprocessing><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>6h</parameter></parameters></step></preprocessing><tags><tag><tag>component</tag><value>network</value></tag><tag><tag>description</tag><value>{#IFDESCR}</value></tag><tag><tag>interface</tag><value>{#IFNAME}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>9ea5b5b667df4bd1943892150c9f2fda</uuid><expression>min(/NetApp FAS3220 by SNMP/fas3220.net.if[if64InErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;],5m)&gt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}
or min(/NetApp FAS3220 by SNMP/fas3220.net.if[if64OutErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;],5m)&gt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>max(/NetApp FAS3220 by SNMP/fas3220.net.if[if64InErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;],5m)&lt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}*0.8
and max(/NetApp FAS3220 by SNMP/fas3220.net.if[if64OutErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;],5m)&lt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;}*0.8</recovery_expression><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): High error rate</name><event_name>Node {#NODE}: port {#IFNAME} ({#TYPE}): High error rate (&gt;{$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;} for 5m)</event_name><opdata>errors in: {ITEM.LASTVALUE1}, errors out: {ITEM.LASTVALUE2}</opdata><priority>WARNING</priority><description>Recovers when below 80% of {$IF.ERRORS.WARN:&quot;{#IFNAME}&quot;} threshold</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype><trigger_prototype><uuid>2c7730f4606a4833bc729c108349d7b4</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportLinkState, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;])&lt;&gt;2 and last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportUpAdmin, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;])=1</expression><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Link down</name><priority>AVERAGE</priority><description>Link state is not UP and the port status is set 'UP' by an administrator.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype><trigger_prototype><uuid>a95e60addfe04055bb15138dd9d1f37f</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportHealthStatus, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;])&lt;&gt;0 and length(last(/NetApp FAS3220 by SNMP/fas3220.net.port[netportDegradedReason, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]))&gt;0</expression><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Port is not healthy</name><priority>INFO</priority><description>{{ITEM.LASTVALUE2}.regsub(&quot;(.*)&quot;, \1)}</description><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger_prototype></trigger_prototypes><graph_prototypes><graph_prototype><uuid>252ef20da69f43fd90afd5a560fdbd1e</uuid><name>Node {#NODE}: port {#IFNAME} ({#TYPE}): Network traffic</name><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64InOctets, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item><graph_item><sortorder>1</sortorder><drawtype>BOLD_LINE</drawtype><color>2774A4</color><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64OutOctets, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><yaxisside>RIGHT</yaxisside><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64OutErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><yaxisside>RIGHT</yaxisside><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64InErrors, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item><graph_item><sortorder>4</sortorder><color>FC6EA3</color><yaxisside>RIGHT</yaxisside><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64OutDiscards, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item><graph_item><sortorder>5</sortorder><color>6C59DC</color><yaxisside>RIGHT</yaxisside><item><host>NetApp FAS3220 by SNMP</host><key>fas3220.net.if[if64InDiscards, &quot;{#NODE}&quot;, &quot;{#IFNAME}&quot;]</key></item></graph_item></graph_items></graph_prototype></graph_prototypes><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);
var descriptions = {};
var out = [];

data.forEach(function(elem) {
    if (elem[&quot;{#IFDESCR}&quot;]) {
        var parts = elem[&quot;{#IFDESCR}&quot;].split(&quot;:&quot;);
        var port = parts[parts.length-1].split(' ');
        descriptions[parts[0] + ':' + port[port.length-1]] = {
            &quot;{#IFDESCR}&quot;: elem[&quot;{#IFDESCR}&quot;],
            &quot;{#SNMPINDEX}&quot;: elem[&quot;{#SNMPINDEX}&quot;]
        }
    }
});

data.forEach(function(elem) {
    if (elem[&quot;{#IFNAME}&quot;]) {
        var port = descriptions[elem[&quot;{#NODE}&quot;] + ':' + elem[&quot;{#IFNAME}&quot;]];

        elem[&quot;{#IFDESCR}&quot;] = port[&quot;{#IFDESCR}&quot;];
        elem[&quot;{#IFSNMPINDEX}&quot;] = port[&quot;{#SNMPINDEX}&quot;];


        switch(elem[&quot;{#TYPE}&quot;]) {
            case '0':
                elem[&quot;{#TYPE}&quot;] = 'physical';
                break;
            case '1':
                elem[&quot;{#TYPE}&quot;] = 'if-group';
                break;
            case '2':
                elem[&quot;{#TYPE}&quot;] = 'vlan';
                break;
            case '3':
                elem[&quot;{#TYPE}&quot;] = 'undef';
                break;
        };

        out.push(elem);
    }
});

return JSON.stringify(out);</parameter></parameters></step></preprocessing></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>hardware</value></tag><tag><tag>target</tag><value>netapp</value></tag><tag><tag>target</tag><value>netapp-fas3220</value></tag></tags><macros><macro><macro>{$CPU.UTIL.CRIT}</macro><value>90</value><description>The critical threshold of the CPU utilization in %.</description></macro><macro><macro>{$FAS3220.FS.AVAIL.MIN.CRIT}</macro><value>10G</value><description>Minimum available space on the disk. Can be used with {#FSNAME} as context.</description></macro><macro><macro>{$FAS3220.FS.NAME.MATCHES}</macro><value>.*</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$FAS3220.FS.NAME.NOT_MATCHES}</macro><value>snapshot</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$FAS3220.FS.PUSED.MAX.CRIT}</macro><value>90</value><description>Maximum percentage of disk used. Can be used with {#FSNAME} as context.</description></macro><macro><macro>{$FAS3220.FS.TIME}</macro><value>10m</value><description>The time during which disk usage may exceed the threshold. Can be used with {#FSNAME} as context.</description></macro><macro><macro>{$FAS3220.FS.TYPE.MATCHES}</macro><value>.*</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.
Value should be integer:
  2 - flexibleVolume,
  3 - aggregate,
  4 - stripedAggregate,
  5 - stripedVolume.</description></macro><macro><macro>{$FAS3220.FS.TYPE.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>This macro is used in filesystems discovery. Can be overridden on the host or linked template level.
Value should be integer:
  2 - flexibleVolume,
  3 - aggregate,
  4 - stripedAggregate,
  5 - stripedVolume.</description></macro><macro><macro>{$FAS3220.FS.USE.PCT}</macro><value>1</value><description>Macro define what threshold will be used for disk space trigger:
  0 - use Bytes ({$FAS3220.FS.AVAIL.MIN.CRIT})
  1 - use percents ({$FAS3220.FS.PUSED.MAX.CRIT})
Can be used with {#FSNAME} as context.</description></macro><macro><macro>{$FAS3220.NET.PORT.NAME.MATCHES}</macro><value>.*</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$FAS3220.NET.PORT.NAME.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.</description></macro><macro><macro>{$FAS3220.NET.PORT.ROLE.MATCHES}</macro><value>.*</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.
{#ROLE} is integer. Possible values:
  0 - undef
  1 - cluster
  2 - data
  3 - node-mgmt
  4 - intercluster
  5 - cluster-mgmt</description></macro><macro><macro>{$FAS3220.NET.PORT.ROLE.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.
{#ROLE} is integer. Possible values:
  0 - undef
  1 - cluster
  2 - data
  3 - node-mgmt
  4 - intercluster
  5 - cluster-mgmt</description></macro><macro><macro>{$FAS3220.NET.PORT.TYPE.MATCHES}</macro><value>.*</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.
{#TYPE} is integer. Possible values: physical, if-group, vlan, undef.</description></macro><macro><macro>{$FAS3220.NET.PORT.TYPE.NOT_MATCHES}</macro><value>CHANGE_IF_NEEDED</value><description>This macro is used in net ports discovery. Can be overridden on the host or linked template level.
{#TYPE} is integer. Possible values: physical, if-group, vlan, undef.</description></macro><macro><macro>{$ICMP_LOSS_WARN}</macro><value>20</value></macro><macro><macro>{$ICMP_RESPONSE_TIME_WARN}</macro><value>0.15</value></macro><macro><macro>{$IF.ERRORS.WARN}</macro></macro><macro><macro>{$IF.UTIL.MAX}</macro><value>95</value></macro><macro><macro>{$SNMP.TIMEOUT}</macro><value>5m</value></macro></macros><valuemaps><valuemap><uuid>e078162b11ff49f59c3ab6d905f88f2c</uuid><name>FAS3220 HA cannot takeover cause</name><mappings><mapping><value>1</value><newvalue>OK</newvalue></mapping><mapping><value>2</value><newvalue>Unknown reason</newvalue></mapping><mapping><value>3</value><newvalue>Disabled by operator</newvalue></mapping><mapping><value>4</value><newvalue>Interconnect offline</newvalue></mapping><mapping><value>5</value><newvalue>Disabled by partner</newvalue></mapping><mapping><value>6</value><newvalue>Takeover failed</newvalue></mapping><mapping><value>7</value><newvalue>Mailbox is in degraded state</newvalue></mapping><mapping><value>8</value><newvalue>Partner mailbox is in uninitialised state</newvalue></mapping><mapping><value>9</value><newvalue>Mailbox version mismatch</newvalue></mapping><mapping><value>10</value><newvalue>NVRAM size mismatch</newvalue></mapping><mapping><value>11</value><newvalue>Kernel version mismatch</newvalue></mapping><mapping><value>12</value><newvalue>Partner is in booting stage</newvalue></mapping><mapping><value>13</value><newvalue>Disk shelf is too hot</newvalue></mapping><mapping><value>14</value><newvalue>Partner is performing revert</newvalue></mapping><mapping><value>15</value><newvalue>Node is performing revert</newvalue></mapping><mapping><value>16</value><newvalue>Same time partner is also trying to take us over</newvalue></mapping><mapping><value>17</value><newvalue>Already in takenover mode</newvalue></mapping><mapping><value>18</value><newvalue>NVRAM log unsynchronized</newvalue></mapping><mapping><value>19</value><newvalue>State of backup mailbox is doubtful</newvalue></mapping></mappings></valuemap><valuemap><uuid>d6993f0258dd4978a85aa5c141f1706e</uuid><name>FAS3220 HA settings</name><mappings><mapping><value>1</value><newvalue>Not configured</newvalue></mapping><mapping><value>2</value><newvalue>Enabled</newvalue></mapping><mapping><value>3</value><newvalue>Disabled</newvalue></mapping><mapping><value>4</value><newvalue>Takeover by partner disabled</newvalue></mapping><mapping><value>5</value><newvalue>This node dead</newvalue></mapping></mappings></valuemap><valuemap><uuid>1fe2bf70bd63468584708a9d09eb42a1</uuid><name>FAS3220 NVRAM battery status</name><mappings><mapping><value>1</value><newvalue>OK</newvalue></mapping><mapping><value>2</value><newvalue>Partially discharged</newvalue></mapping><mapping><value>3</value><newvalue>Fully discharged</newvalue></mapping><mapping><value>4</value><newvalue>Not present</newvalue></mapping><mapping><value>5</value><newvalue>Near end of life</newvalue></mapping><mapping><value>6</value><newvalue>At end of life</newvalue></mapping><mapping><value>7</value><newvalue>Unknown</newvalue></mapping><mapping><value>8</value><newvalue>Overcharged</newvalue></mapping><mapping><value>9</value><newvalue>Fully charged</newvalue></mapping></mappings></valuemap><valuemap><uuid>ee5e67c90bca4ded84df2d82589bc2fb</uuid><name>FAS3220 Port health</name><mappings><mapping><value>0</value><newvalue>Healthy</newvalue></mapping><mapping><value>1</value><newvalue>Degraded</newvalue></mapping></mappings></valuemap><valuemap><uuid>bd6ea858292c414d9bfd435631001ef5</uuid><name>FAS3220 Port link state</name><mappings><mapping><value>0</value><newvalue>Undef</newvalue></mapping><mapping><value>1</value><newvalue>Off</newvalue></mapping><mapping><value>2</value><newvalue>UP</newvalue></mapping><mapping><value>3</value><newvalue>DOWN</newvalue></mapping></mappings></valuemap><valuemap><uuid>c598c387157d4450b5bf8f68e6e794a4</uuid><name>FAS3220 Port role</name><mappings><mapping><value>0</value><newvalue>Undef</newvalue></mapping><mapping><value>1</value><newvalue>Cluster</newvalue></mapping><mapping><value>2</value><newvalue>Data</newvalue></mapping><mapping><value>3</value><newvalue>Node-MGMT</newvalue></mapping><mapping><value>4</value><newvalue>Intercluster</newvalue></mapping><mapping><value>5</value><newvalue>Cluster-MGMT</newvalue></mapping></mappings></valuemap><valuemap><uuid>6b0fec10a0eb4c70a8982419c6e635b9</uuid><name>FAS3220 Port speed</name><mappings><mapping><value>0</value><newvalue>Undef</newvalue></mapping><mapping><value>1</value><newvalue>Auto</newvalue></mapping><mapping><value>2</value><newvalue>10 Mb/s</newvalue></mapping><mapping><value>3</value><newvalue>100 Mb/s</newvalue></mapping><mapping><value>4</value><newvalue>10 Gb/s</newvalue></mapping><mapping><value>5</value><newvalue>100 Gb/s</newvalue></mapping></mappings></valuemap><valuemap><uuid>c50cdd6dbe19482abdb870c12e7c7b8d</uuid><name>FAS3220 Port UP by administrator</name><mappings><mapping><value>0</value><newvalue>False</newvalue></mapping><mapping><value>1</value><newvalue>True</newvalue></mapping></mappings></valuemap><valuemap><uuid>a84db909cb1841c688acc6b4b1b28af4</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap><valuemap><uuid>7ad319d1815e45a1a28a8cd2516fd8eb</uuid><name>zabbix.host.available</name><mappings><mapping><value>0</value><newvalue>not available</newvalue></mapping><mapping><value>1</value><newvalue>available</newvalue></mapping><mapping><value>2</value><newvalue>unknown</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><triggers><trigger><uuid>d33ca3f0d2f14feca01dce7bdf476776</uuid><expression>(last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])&gt;0 and last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])&lt;10m) or (last(/NetApp FAS3220 by SNMP/system.hw.uptime[hrSystemUptime.0])=0 and last(/NetApp FAS3220 by SNMP/system.net.uptime[sysUpTime.0])&lt;10m)</expression><name>Host has been restarted</name><event_name>{HOST.NAME} has been restarted (uptime &lt; 10m)</event_name><priority>WARNING</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><dependencies><dependency><name>No SNMP data collection</name><expression>max(/NetApp FAS3220 by SNMP/zabbix[host,snmp,available],{$SNMP.TIMEOUT})=0</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>3e2d95918f364248ae07a2e436a986a0</uuid><expression>last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedCount])&gt;0 and last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedMessage],#1)&lt;&gt;last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedMessage],#2)</expression><recovery_mode>RECOVERY_EXPRESSION</recovery_mode><recovery_expression>last(/NetApp FAS3220 by SNMP/fas3220.disk[diskFailedCount])=0</recovery_expression><name>NetApp FAS3220: Number of failed disks has changed</name><opdata>Current value: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><description>{{ITEM.LASTVALUE2}.regsub(&quot;(.*)&quot;, \1)}</description><type>MULTIPLE</type><tags><tag><tag>scope</tag><value>availability</value></tag><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></zabbix_export>
