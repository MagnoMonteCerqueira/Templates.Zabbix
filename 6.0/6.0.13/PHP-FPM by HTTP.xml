<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:46Z</date><groups><group><uuid>a571c0d144b14fd4a87a9d9b2aa9fcd6</uuid><name>Templates/Applications</name></group></groups><templates><template><uuid>49c77ce207f8478da53e761526d6eca5</uuid><template>PHP-FPM by HTTP</template><name>PHP-FPM by HTTP</name><description>Get PHP-FPM metrics using the Zabbix HTTP agent.

Template tooling version used: 0.41</description><groups><group><name>Templates/Applications</name></group></groups><items><item><uuid>a03bc5c2dc824b8f970ca1d2b7b4637f</uuid><name>PHP-FPM: Accepted connections per second</name><type>DEPENDENT</type><key>php-fpm.conn_accepted.rate</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><description>The number of accepted requests per second.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['accepted conn']</parameter></parameters></step><step><type>CHANGE_PER_SECOND</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>connections</value></tag></tags></item><item><uuid>a9ae24915703483ea95a346c625ed70e</uuid><name>PHP-FPM: Get ping page</name><type>HTTP_AGENT</type><key>php-fpm.get_ping</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><url>{$PHP_FPM.SCHEME}://{$PHP_FPM.HOST}:{$PHP_FPM.PORT}/{$PHP_FPM.PING.PAGE}</url><retrieve_mode>BOTH</retrieve_mode><tags><tag><tag>component</tag><value>health</value></tag></tags></item><item><uuid>b91063d42d4b454089b58e29ee3bdb38</uuid><name>PHP-FPM: Get status page</name><type>HTTP_AGENT</type><key>php-fpm.get_status</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><url>{$PHP_FPM.SCHEME}://{$PHP_FPM.HOST}:{$PHP_FPM.PORT}/{$PHP_FPM.STATUS.PAGE}?json</url><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>cf2fe31db5084bc5b363ef7d0d691c25</uuid><name>PHP-FPM: Listen queue</name><type>DEPENDENT</type><key>php-fpm.listen_queue</key><delay>0</delay><history>7d</history><description>The current number of connections that have been initiated, but not yet accepted.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['listen queue']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>listen-queue</value></tag></tags></item><item><uuid>56876a76bd3a4c6c90b033c19a59f6d1</uuid><name>PHP-FPM: Listen queue, len</name><type>DEPENDENT</type><key>php-fpm.listen_queue_len</key><delay>0</delay><history>7d</history><description>Size of the socket queue of pending connections.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['listen queue len']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>listen-queue</value></tag></tags></item><item><uuid>a8829ff906e847c2b97a32b1ded60523</uuid><name>PHP-FPM: Listen queue, max</name><type>DEPENDENT</type><key>php-fpm.listen_queue_max</key><delay>0</delay><history>7d</history><description>The maximum number of requests in the queue of pending connections since this FPM pool has started.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['max listen queue']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>listen-queue</value></tag></tags></item><item><uuid>314c3f19311f47acb93b046ab2625c75</uuid><name>PHP-FPM: Queue usage</name><type>CALCULATED</type><key>php-fpm.listen_queue_usage</key><history>7d</history><value_type>FLOAT</value_type><units>%</units><params>last(//php-fpm.listen_queue)/(last(//php-fpm.listen_queue_len)+(last(//php-fpm.listen_queue_len)=0))*100</params><description>Queue utilization</description><tags><tag><tag>component</tag><value>listen-queue</value></tag></tags><triggers><trigger><uuid>1ad5018fb19d4a9cb9e627f964bfd627</uuid><expression>min(/PHP-FPM by HTTP/php-fpm.listen_queue_usage,15m) &gt; {$PHP_FPM.QUEUE.WARN.MAX}</expression><name>PHP-FPM: Queue utilization is high</name><event_name>PHP-FPM: Queue utilization is high (over {$PHP_FPM.QUEUE.WARN.MAX}% for 15m)</event_name><priority>WARNING</priority><description>The queue for this pool reached {$PHP_FPM.QUEUE.WARN.MAX}% of its maximum capacity. Items in queue represent the current number of connections that have been initiated on this pool, but not yet accepted.</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>dcb11355c5ae4c6ab5f1326aa1c7bbd6</uuid><name>PHP-FPM: Max children reached</name><type>DEPENDENT</type><key>php-fpm.max_children</key><delay>0</delay><history>7d</history><description>The number of times that pm.max_children has been reached since the php-fpm pool started</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['max children reached']</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags></item><item><uuid>226939bd485a4381a5c0a6d4511acbc3</uuid><name>PHP-FPM: Pool name</name><type>DEPENDENT</type><key>php-fpm.name</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>The name of current pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.pool</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>3h</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags></item><item><uuid>6a090c078ace46bd958b42225c63f5ca</uuid><name>PHP-FPM: Ping</name><type>DEPENDENT</type><key>php-fpm.ping</key><delay>0</delay><history>7d</history><valuemap><name>Service state</name></valuemap><preprocessing><step><type>REGEX</type><parameters><parameter>{$PHP_FPM.PING.REPLY}($|\r?\n)</parameter><parameter>1</parameter></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>0</error_handler_params></step></preprocessing><master_item><key>php-fpm.get_ping</key></master_item><tags><tag><tag>component</tag><value>health</value></tag></tags><triggers><trigger><uuid>5dcc607026d24e63b2f099540a5d8e9b</uuid><expression>last(/PHP-FPM by HTTP/php-fpm.ping)=0 or nodata(/PHP-FPM by HTTP/php-fpm.ping,3m)=1</expression><name>PHP-FPM: Service is down</name><priority>HIGH</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>availability</value></tag></tags></trigger></triggers></item><item><uuid>923243cbb4b647389a38b4788aad3141</uuid><name>PHP-FPM: Processes, active</name><type>DEPENDENT</type><key>php-fpm.processes_active</key><delay>0</delay><history>7d</history><description>The total number of active processes.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['active processes']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags></item><item><uuid>79402b0cac4d4a409b39db4bf71557d2</uuid><name>PHP-FPM: Processes, idle</name><type>DEPENDENT</type><key>php-fpm.processes_idle</key><delay>0</delay><history>7d</history><description>The total number of idle processes.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['idle processes']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>9632f44f9b2648f299e9f61a39daf92f</uuid><name>PHP-FPM: Processes, max active</name><type>DEPENDENT</type><key>php-fpm.processes_max_active</key><delay>0</delay><history>7d</history><description>The highest value that 'active processes' has reached since the php-fpm server started.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['max active processes']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags></item><item><uuid>e69faadd7a9d457e8f56d283871b946a</uuid><name>PHP-FPM: Processes, total</name><type>DEPENDENT</type><key>php-fpm.processes_total</key><delay>0</delay><history>7d</history><description>The total number of server processes currently running.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['total processes']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>084848b2d6bd4b8a88424b1ec9055b0f</uuid><name>PHP-FPM: Process manager</name><type>DEPENDENT</type><key>php-fpm.process_manager</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>The method used by the process manager to control the number of child processes for this pool.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['process manager']</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>3h</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>8cfa50bcea744075954d0a9c8a132330</uuid><expression>last(/PHP-FPM by HTTP/php-fpm.process_manager,#1)&lt;&gt;last(/PHP-FPM by HTTP/php-fpm.process_manager,#2)</expression><name>PHP-FPM: Manager  changed</name><event_name>PHP-FPM: Manager  changed (new value received: {ITEM.VALUE})</event_name><priority>INFO</priority><description>PHP-FPM manager changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>0dd9e388e2584e0090ed65bab39183f9</uuid><name>PHP-FPM: Slow requests</name><type>DEPENDENT</type><key>php-fpm.slow_requests</key><delay>0</delay><history>7d</history><description>The number of requests that exceeded your request_slowlog_timeout value.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['slow requests']</parameter></parameters></step><step><type>SIMPLE_CHANGE</type><parameters><parameter/></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>63bd00ee25af4b42a37dad1d742c66c0</uuid><expression>min(/PHP-FPM by HTTP/php-fpm.slow_requests,#3)&gt;0</expression><name>PHP-FPM: Detected slow requests</name><priority>WARNING</priority><description>PHP-FPM detected slow request. A slow request means that it took more time to execute than expected (defined in the configuration of your pool).</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>9a625629fc0a4222acfefa0409ec1c72</uuid><name>PHP-FPM: Start time</name><type>DEPENDENT</type><key>php-fpm.start_time</key><delay>0</delay><history>7d</history><units>unixtime</units><description>The time when this pool was started.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['start time']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags></item><item><uuid>093024c740b946a0bd6637ba9e3e0dad</uuid><name>PHP-FPM: Uptime</name><type>DEPENDENT</type><key>php-fpm.uptime</key><delay>0</delay><history>7d</history><units>s</units><description>How long has this pool been running.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.['start since']</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_status</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>b44815446b3b464f883f4d0e799b020e</uuid><expression>nodata(/PHP-FPM by HTTP/php-fpm.uptime,30m)=1</expression><name>PHP-FPM: Failed to fetch info data</name><event_name>PHP-FPM: Failed to fetch info data (or no data for 30m)</event_name><priority>INFO</priority><description>Zabbix has not received data for items for the last 30 minutes</description><manual_close>YES</manual_close><dependencies><dependency><name>PHP-FPM: Service is down</name><expression>last(/PHP-FPM by HTTP/php-fpm.ping)=0 or nodata(/PHP-FPM by HTTP/php-fpm.ping,3m)=1</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>9ed4047bdcd74e649814c5d004ba78c7</uuid><expression>last(/PHP-FPM by HTTP/php-fpm.uptime)&lt;10m</expression><name>PHP-FPM: Pool has been restarted</name><event_name>PHP-FPM: Pool has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>d49adb58e8bb4453911270e5dce1e03e</uuid><name>PHP-FPM: Version</name><type>DEPENDENT</type><key>php-fpm.version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><description>Current version PHP. Get from HTTP-Header &quot;X-Powered-By&quot; and may not work if you change default HTTP-headers.</description><preprocessing><step><type>REGEX</type><parameters><parameter>^[.\s\S]*X-Powered-By: PHP/([.\d]{1,})</parameter><parameter>\1</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>3h</parameter></parameters></step></preprocessing><master_item><key>php-fpm.get_ping</key></master_item><tags><tag><tag>component</tag><value>application</value></tag></tags><triggers><trigger><uuid>d6c891de92c34bdba80a2ba88f975271</uuid><expression>last(/PHP-FPM by HTTP/php-fpm.version,#1)&lt;&gt;last(/PHP-FPM by HTTP/php-fpm.version,#2) and length(last(/PHP-FPM by HTTP/php-fpm.version))&gt;0</expression><name>PHP-FPM: Version has changed</name><event_name>PHP-FPM: Version has changed (new version: {ITEM.VALUE})</event_name><priority>INFO</priority><description>PHP-FPM version has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item></items><tags><tag><tag>class</tag><value>application</value></tag><tag><tag>target</tag><value>php-fpm</value></tag></tags><macros><macro><macro>{$PHP_FPM.HOST}</macro><value>localhost</value><description>Hostname or IP of PHP-FPM status host or container.</description></macro><macro><macro>{$PHP_FPM.PING.PAGE}</macro><value>ping</value><description>The path of PHP-FPM ping page.</description></macro><macro><macro>{$PHP_FPM.PING.REPLY}</macro><value>pong</value><description>Expected reply to the ping.</description></macro><macro><macro>{$PHP_FPM.PORT}</macro><value>80</value><description>The port of PHP-FPM status host or container.</description></macro><macro><macro>{$PHP_FPM.QUEUE.WARN.MAX}</macro><value>80</value><description>The maximum PHP-FPM queue usage percent for trigger expression.</description></macro><macro><macro>{$PHP_FPM.SCHEME}</macro><value>http</value><description>Request scheme which may be http or https</description></macro><macro><macro>{$PHP_FPM.STATUS.PAGE}</macro><value>status</value><description>The path of PHP-FPM status page.</description></macro></macros><valuemaps><valuemap><uuid>8e8fa515c14c4ac181db791c2c68c518</uuid><name>Service state</name><mappings><mapping><value>0</value><newvalue>Down</newvalue></mapping><mapping><value>1</value><newvalue>Up</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><graphs><graph><uuid>6c69974487f34fea9850ac63fd45adbc</uuid><name>PHP-FPM: Process</name><graph_items><graph_item><color>1A7C11</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.processes_max_active</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.processes_idle</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.processes_total</key></item></graph_item><graph_item><sortorder>3</sortorder><color>A54F10</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.processes_active</key></item></graph_item></graph_items></graph><graph><uuid>250e7f6e07064675872b81a8881f4f31</uuid><name>PHP-FPM: Queue</name><graph_items><graph_item><color>1A7C11</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.listen_queue_len</key></item></graph_item><graph_item><sortorder>1</sortorder><color>2774A4</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.listen_queue</key></item></graph_item><graph_item><sortorder>2</sortorder><color>F63100</color><item><host>PHP-FPM by HTTP</host><key>php-fpm.listen_queue_max</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
