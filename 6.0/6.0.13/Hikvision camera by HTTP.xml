<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export><version>6.0</version><date>2023-02-11T16:14:51Z</date><groups><group><uuid>d37f71c7e3f7469bab645852a69a2018</uuid><name>Templates/Video surveillance</name></group></groups><templates><template><uuid>3fb4020df2984b0ab64dfd8355ff5c65</uuid><template>Hikvision camera by HTTP</template><name>Hikvision camera by HTTP</name><description>Template tooling version used: 0.41</description><groups><group><name>Templates/Video surveillance</name></group></groups><items><item><uuid>e889b3a7e6044f0284081f9d6427b416</uuid><name>Hikvision camera: Boot loader released date</name><type>DEPENDENT</type><key>hikvision_cam.boot_released_date</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.bootReleasedDate</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>61c6f0073e604a449d8f724d762cfb7f</uuid><name>Hikvision camera: Boot loader version</name><type>DEPENDENT</type><key>hikvision_cam.boot_version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE_APP_E</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.bootVersion</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>247a70ed0cc543d69183a6a793cd9978</uuid><name>Hikvision camera: CPU utilization</name><type>DEPENDENT</type><key>hikvision_cam.cpu.util</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>CPU utilization in %</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceStatus.CPUList.CPU.cpuUtilization</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_status</key></master_item><tags><tag><tag>component</tag><value>cpu</value></tag></tags><triggers><trigger><uuid>0ae4dbcc05544fb7b67183fcf3b9654b</uuid><expression>min(/Hikvision camera by HTTP/hikvision_cam.cpu.util,5m)&gt;{$CPU.UTIL.CRIT}</expression><name>Hikvision camera: High CPU utilization</name><event_name>Hikvision camera: High CPU utilization (over {$CPU.UTIL.CRIT}% for 5m)</event_name><opdata>Current utilization: {ITEM.LASTVALUE1}</opdata><priority>WARNING</priority><description>CPU utilization is too high. The system might be slow to respond.</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>7e65f407b515429caf415820dd633b0e</uuid><name>Hikvision camera: Current device time</name><type>DEPENDENT</type><key>hikvision_cam.current_device_time</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceStatus.currentDeviceTime</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step></preprocessing><master_item><key>hikvision_cam.get_status</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>42b0f3ae08cf4730a52ea2ddda6f5bae</uuid><name>Hikvision camera: Device description</name><type>DEPENDENT</type><key>hikvision_cam.device_description</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>NOTES</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.deviceDescription</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>4abc7dcef6ec4b97bd1350d2e93f58d4</uuid><name>Hikvision camera: Device ID</name><type>DEPENDENT</type><key>hikvision_cam.device_id</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.deviceID</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>f4e6f9d05fea4489a9eaa47effe66ceb</uuid><name>Hikvision camera: Device location</name><type>DEPENDENT</type><key>hikvision_cam.device_location</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>LOCATION</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.deviceLocation</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>278a04c86c22419886aa64fad8e05c9e</uuid><name>Hikvision camera: Device name</name><type>DEPENDENT</type><key>hikvision_cam.device_name</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>NAME</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.deviceName</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1d</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>84d86e688a31402a82798f9e2ff04ab8</uuid><name>Hikvision camera: Device type</name><type>DEPENDENT</type><key>hikvision_cam.device_type</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>TYPE</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.deviceType</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>66ee550f4838455e9500561d790a76d1</uuid><name>Hikvision camera: Encoder released date</name><type>DEPENDENT</type><key>hikvision_cam.encoder_released_date</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE_APP_D</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.encoderReleasedDate</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>4798d54b70ee445293c12b3a8038b8c8</uuid><name>Hikvision camera: Encoder version</name><type>DEPENDENT</type><key>hikvision_cam.encoder_version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE_APP_C</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.encoderVersion</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>ac6ee4d15c584709a7bdf2b89048aacc</uuid><name>Hikvision camera: Firmware released date</name><type>DEPENDENT</type><key>hikvision_cam.firmware_released_date</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE_APP_B</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.firmwareReleasedDate</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>eafe1a75a24c479cb5bf116be2272375</uuid><name>Hikvision camera: Firmware version</name><type>DEPENDENT</type><key>hikvision_cam.firmware_version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SOFTWARE_APP_A</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.firmwareVersion</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>3c0b5a0046894a54803cd984cda13fa2</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.firmware_version,#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.firmware_version,#2) and length(last(/Hikvision camera by HTTP/hikvision_cam.firmware_version))&gt;0</expression><name>Hikvision camera: Version has changed</name><event_name>Hikvision camera: Version has changed (new version: {ITEM.VALUE})</event_name><priority>INFO</priority><description>Hikvision camera version has changed. Ack to close.</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>0ddd3af82fb64b75821dc1fab96c16ab</uuid><name>Hikvision camera: Get device info</name><type>HTTP_AGENT</type><key>hikvision_cam.get_info</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><description>Used to get the device information</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step><step><type>XML_TO_JSON</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step></preprocessing><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/System/deviceInfo</url><status_codes>200,401</status_codes><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>d0fc2ebf4ae140b68546e2425321f797</uuid><name>Hikvision camera: Get device info: Login status</name><type>DEPENDENT</type><key>hikvision_cam.get_info.login_status</key><delay>0</delay><history>7d</history><valuemap><name>Login status</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);

if (&quot;html&quot; in data){
    if (data.html.head.title === &quot;Document Error: Unauthorized&quot;)
        {return 1}
    else if (data.html.head.title === &quot;Connection error&quot;)
        {return 2}
}
return 0;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>1ad3e3c9f60043a58f63addc8768c887</uuid><name>Hikvision camera: Get system status</name><type>HTTP_AGENT</type><key>hikvision_cam.get_status</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><description>It is used to get the status information of the device</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step><step><type>XML_TO_JSON</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step></preprocessing><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/System/status</url><status_codes>200,401</status_codes><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>ebca4ac32e2e4bfd8bf3cdae155a4ee6</uuid><name>Hikvision camera: Get system status: Login status</name><type>DEPENDENT</type><key>hikvision_cam.get_status.login_status</key><delay>0</delay><history>7d</history><valuemap><name>Login status</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);

if (&quot;html&quot; in data){
    if (data.html.head.title === &quot;Document Error: Unauthorized&quot;)
        {return 1}
    else if (data.html.head.title === &quot;Connection error&quot;)
        {return 2}
}
return 0;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_status</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>65f89830d9f041f9a1558936dfcffc5f</uuid><name>Hikvision camera: Get streaming channels</name><type>HTTP_AGENT</type><key>hikvision_cam.get_streaming</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><description>Used to get the properties of streaming channels for the device</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step><step><type>XML_TO_JSON</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step></preprocessing><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/Streaming/channels</url><status_codes>200,401</status_codes><tags><tag><tag>component</tag><value>raw</value></tag></tags></item><item><uuid>c90527e1a2a948b5a5f678ec0d981954</uuid><name>Hikvision camera: Get streaming channels: Login status</name><type>DEPENDENT</type><key>hikvision_cam.get_streaming.login_status</key><delay>0</delay><history>7d</history><valuemap><name>Login status</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);

if (&quot;html&quot; in data){
    if (data.html.head.title === &quot;Document Error: Unauthorized&quot;)
        {return 1}
    else if (data.html.head.title === &quot;Connection error&quot;)
        {return 2}
}
return 0;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>03aecf4021c2402bb415798ef339b914</uuid><name>Hikvision camera: Hardware version</name><type>DEPENDENT</type><key>hikvision_cam.hardware_version</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.hardwareVersion</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>da9ec53ecc6b4c25b6539666eb9f6544</uuid><name>Hikvision camera: MACaddress</name><type>DEPENDENT</type><key>hikvision_cam.mac_address</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>MACADDRESS_A</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.macAddress</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>network</value></tag></tags></item><item><uuid>d1d026c6240c493387374b756b04452f</uuid><name>Hikvision camera: Memory utilization</name><type>DEPENDENT</type><key>hikvision_cam.memory.usage</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>%</units><description>Memory utilization in %</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceStatus.MemoryList.Memory.memoryUsage</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_status</key></master_item><tags><tag><tag>component</tag><value>memory</value></tag></tags><triggers><trigger><uuid>62cfa0b87f234f1cb67b9b5b6b2fa8f2</uuid><expression>min(/Hikvision camera by HTTP/hikvision_cam.memory.usage,5m)&gt;{$MEMORY.UTIL.MAX}</expression><name>Hikvision camera: High memory utilization</name><event_name>Hikvision camera: High memory utilization (&gt;{$MEMORY.UTIL.MAX}% for 5m)</event_name><priority>AVERAGE</priority><description>The system is running out of free memory.</description><tags><tag><tag>scope</tag><value>performance</value></tag></tags></trigger></triggers></item><item><uuid>b295689d34934401b0eda407edaee426</uuid><name>Hikvision camera: Model</name><type>DEPENDENT</type><key>hikvision_cam.model</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>MODEL</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.model</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>b6715593c52a4255ae6a4f68c3de6b6d</uuid><name>Hikvision camera: Serial number</name><type>DEPENDENT</type><key>hikvision_cam.serial_number</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>SERIALNO_A</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.serialNumber</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>281999cbd6324aacbbb86b4945000c60</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.serial_number,#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.serial_number,#2) and length(last(/Hikvision camera by HTTP/hikvision_cam.serial_number))&gt;0</expression><name>Hikvision camera: Camera has been replaced</name><event_name>Hikvision camera: Camera has been replaced (new serial number received)</event_name><priority>INFO</priority><description>Camera serial number has changed. Ack to close</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item><item><uuid>72ffbe3d976b437ab5df06b32a5c4b12</uuid><name>Hikvision camera: Supported beep</name><type>DEPENDENT</type><key>hikvision_cam.support_beep</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.supportBeep</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>03d220eb782346269de6b0867ed3acd3</uuid><name>Hikvision camera: Supported video loss</name><type>DEPENDENT</type><key>hikvision_cam.support_video_loss</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.supportVideoLoss</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>d29814c630f94d5cabdc350d8b161b5b</uuid><name>Hikvision camera: System contact</name><type>DEPENDENT</type><key>hikvision_cam.system_contact</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><inventory_link>CONTACT</inventory_link><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.systemContact</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>8678cee9999b45f1975f9639c8c197af</uuid><name>Hikvision camera: Telecontrol ID</name><type>DEPENDENT</type><key>hikvision_cam.telecontrol_id</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceInfo.telecontrolID</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>24h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_info</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags></item><item><uuid>4e680a5e347948fe8118b58c2c62d55f</uuid><name>Hikvision camera: Uptime</name><type>DEPENDENT</type><key>hikvision_cam.uptime</key><delay>0</delay><history>7d</history><trends>0</trends><units>uptime</units><description>System uptime in 'N days, hh:mm:ss' format.</description><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.DeviceStatus.deviceUpTime</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step></preprocessing><master_item><key>hikvision_cam.get_status</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><triggers><trigger><uuid>f46b43fe9b354990929e7fdb80b792ec</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.uptime)&lt;10m</expression><name>Hikvision camera: has been restarted</name><event_name>Hikvision camera: has been restarted (uptime &lt; 10m)</event_name><priority>INFO</priority><description>Uptime is less than 10 minutes</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers></item></items><discovery_rules><discovery_rule><uuid>00647c38d30d44378bdcf573178063ec</uuid><name>PTZ discovery</name><type>HTTP_AGENT</type><key>hikvision_cam.ptz.discovery</key><delay>1d</delay><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><item_prototypes><item_prototype><uuid>bb3be316a5fc4b25bd15c903909b7746</uuid><name>Hikvision camera: Get PTZ info: Channel &quot;{#PTZ_CHANNEL_ID}&quot;: Login status</name><type>DEPENDENT</type><key>hikvision_cam.get_ptz.login_status[{#PTZ_CHANNEL_ID}]</key><delay>0</delay><history>7d</history><valuemap><name>Login status</name></valuemap><preprocessing><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);

if (&quot;html&quot; in data){
    if (data.html.head.title === &quot;Document Error: Unauthorized&quot;)
        {return 1}
    else if (data.html.head.title === &quot;Connection error&quot;)
        {return 2}
}
return 0;</parameter></parameters></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_ptz[{#PTZ_CHANNEL_ID}]</key></master_item><tags><tag><tag>component</tag><value>system</value></tag></tags><trigger_prototypes><trigger_prototype><uuid>7ce39ff8b5f14fcbb7b575f9c44a9efd</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_ptz.login_status[{#PTZ_CHANNEL_ID}])=1</expression><name>Hikvision camera: Authorisation error on get PTZ channels</name><priority>WARNING</priority><description>Check the correctness of the authorization data</description><manual_close>YES</manual_close><dependencies><dependency><name>Hikvision camera: Authorisation error</name><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_info.login_status)=1 or
last(/Hikvision camera by HTTP/hikvision_cam.get_streaming.login_status)=1 or
last(/Hikvision camera by HTTP/hikvision_cam.get_status.login_status)=1</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype><trigger_prototype><uuid>c702b7321b664f5d950b0d879bbd7371</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_ptz.login_status[{#PTZ_CHANNEL_ID}])=2</expression><name>Hikvision camera: Error receiving data on PTZ channels</name><priority>WARNING</priority><description>Check the availability of the HTTP port</description><manual_close>YES</manual_close><dependencies><dependency><name>Hikvision camera: Error receiving data</name><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_info.login_status)=2 or
last(/Hikvision camera by HTTP/hikvision_cam.get_streaming.login_status)=2 or
last(/Hikvision camera by HTTP/hikvision_cam.get_status.login_status)=2</expression></dependency></dependencies><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes></item_prototype><item_prototype><uuid>6799d99ad02743a1b294b80bbed52280</uuid><name>Hikvision camera: Get PTZ info</name><type>HTTP_AGENT</type><key>hikvision_cam.get_ptz[{#PTZ_CHANNEL_ID}]</key><history>0</history><trends>0</trends><value_type>TEXT</value_type><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><description>High precision positioning which is accurate to a bit after the decimal point</description><preprocessing><step><type>CHECK_NOT_SUPPORTED</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step><step><type>XML_TO_JSON</type><parameters><parameter/></parameters><error_handler>CUSTOM_VALUE</error_handler><error_handler_params>{&quot;html&quot;:{&quot;head&quot;:{&quot;title&quot;:&quot;Connection error&quot;}}}</error_handler_params></step></preprocessing><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/PTZCtrl/channels/{#PTZ_CHANNEL_ID}/status</url><status_codes>200,401</status_codes><tags><tag><tag>component</tag><value>raw</value></tag></tags></item_prototype><item_prototype><uuid>16225fb78f414308829d035cd32f8468</uuid><name>Channel &quot;{#PTZ_CHANNEL_ID}&quot;: Absolute zoom</name><type>DEPENDENT</type><key>hikvision_cam.ptz.absolute_zoom[{#PTZ_CHANNEL_ID}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>!x</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.PTZStatus.AbsoluteHigh.absoluteZoom</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>MULTIPLIER</type><parameters><parameter>0.1</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_ptz[{#PTZ_CHANNEL_ID}]</key></master_item><tags><tag><tag>component</tag><value>ptz</value></tag><tag><tag>ptz-id</tag><value>{#PTZ_CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>6282376b25a9462e84b748d011f2fbf6</uuid><name>Channel &quot;{#PTZ_CHANNEL_ID}&quot;: Azimuth</name><type>DEPENDENT</type><key>hikvision_cam.ptz.azimuth[{#PTZ_CHANNEL_ID}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>!°</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.PTZStatus.AbsoluteHigh.azimuth</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>MULTIPLIER</type><parameters><parameter>0.1</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_ptz[{#PTZ_CHANNEL_ID}]</key></master_item><tags><tag><tag>component</tag><value>ptz</value></tag><tag><tag>ptz-id</tag><value>{#PTZ_CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>da148a9826724869a58d286a07edc036</uuid><name>Channel &quot;{#PTZ_CHANNEL_ID}&quot;: Elevation</name><type>DEPENDENT</type><key>hikvision_cam.ptz.elevation[{#PTZ_CHANNEL_ID}]</key><delay>0</delay><history>7d</history><value_type>FLOAT</value_type><units>!°</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.PTZStatus.AbsoluteHigh.elevation</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>MULTIPLIER</type><parameters><parameter>0.1</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_ptz[{#PTZ_CHANNEL_ID}]</key></master_item><tags><tag><tag>component</tag><value>ptz</value></tag><tag><tag>ptz-id</tag><value>{#PTZ_CHANNEL_ID}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>dbf391b5e18b4e018d889e460b7acc74</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.ptz.absolute_zoom[{#PTZ_CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.ptz.absolute_zoom[{#PTZ_CHANNEL_ID}],#2) or 
last(/Hikvision camera by HTTP/hikvision_cam.ptz.azimuth[{#PTZ_CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.ptz.azimuth[{#PTZ_CHANNEL_ID}],#2) or 
last(/Hikvision camera by HTTP/hikvision_cam.ptz.elevation[{#PTZ_CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.ptz.elevation[{#PTZ_CHANNEL_ID}],#2)</expression><name>Channel &quot;{#PTZ_CHANNEL_ID}&quot;: PTZ position changed</name><priority>INFO</priority><description>The direction of the camera has changed</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/PTZCtrl/channels</url><status_codes>200,401</status_codes><preprocessing><step><type>XML_TO_JSON</type><parameters><parameter/></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);
var out = [];

if (&quot;PTZChannel&quot; in data.PTZChannelList) {
    out.push({
        &quot;{#PTZ_CHANNEL_ID}&quot;: data.PTZChannelList.PTZChannel.id
    })
}

return JSON.stringify(out);</parameter></parameters></step></preprocessing></discovery_rule><discovery_rule><uuid>0bf00b49acd448ddbd1f4fac7630c40e</uuid><name>Streaming channels discovery</name><type>HTTP_AGENT</type><key>hikvision_cam.streaming.discovery</key><delay>1d</delay><authtype>DIGEST</authtype><username>{$USER}</username><password>{$PASSWORD}</password><filter><evaltype>AND</evaltype><conditions><condition><macro>{#CHANNEL_ENABLED}</macro><value>true</value><formulaid>A</formulaid></condition></conditions></filter><item_prototypes><item_prototype><uuid>90ef1dd6e3d04ce8ab84731377c07ea6</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Constant bitRate</name><type>DEPENDENT</type><key>hikvision_cam.constant_bit_rate[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!kbit/s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.constantBitRate</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$.[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>b992569a9db346ac85886fe7a5e55074</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Fixed quality</name><type>DEPENDENT</type><key>hikvision_cam.fixed_quality[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>%</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.fixedQuality</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>7343f2206cfd4942976b5dca214a7558</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: GovLength</name><type>DEPENDENT</type><key>hikvision_cam.gov_length[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.GovLength</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>ef1df8955ab84efab5ae9be340715431</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: H264Profile</name><type>DEPENDENT</type><key>hikvision_cam.h264Profile[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.H264Profile</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>ce45290377cc402bacda95ea8a136946</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Key frame interval</name><type>DEPENDENT</type><key>hikvision_cam.key_frame_interval[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.keyFrameInterval</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>4d621b75e2ef432a9cab88b61718125d</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Frame rate (max)</name><type>DEPENDENT</type><key>hikvision_cam.max_frame_rate[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!fps</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.maxFrameRate</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>MULTIPLIER</type><parameters><parameter>0.01</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>12f1fadb9d364e6b96ab01b468c94891</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Smoothing</name><type>DEPENDENT</type><key>hikvision_cam.smoothing[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.smoothing</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>1854ab4fd6f14adf90c0ddb42712a4ef</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Snapshot image type</name><type>DEPENDENT</type><key>hikvision_cam.snap_shot_image_type[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.snapShotImageType</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>d1523faa362842ef9313ffc15a6d5e8c</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: VBR lower</name><type>DEPENDENT</type><key>hikvision_cam.vbr_lower_cap[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!kbit/s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.vbrLowerCap</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>725669dc6bfd4871a3133ab7fcd4c571</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: VBR upper</name><type>DEPENDENT</type><key>hikvision_cam.vbr_upper_cap[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!kbit/s</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.vbrUpperCap</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>96ef96886e9244f08cf245f4253839b2</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Video codec type</name><type>DEPENDENT</type><key>hikvision_cam.video_codec_type[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.videoCodecType</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>59e8f0440ec04306a0c79cc8c9a5c91f</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Video quality control type</name><type>DEPENDENT</type><key>hikvision_cam.video_quality_control_type[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.videoQualityControlType</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>18f5eed445154a42828cea423db9ebec</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Resolution height</name><type>DEPENDENT</type><key>hikvision_cam.video_resolution_height[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!px</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.videoResolutionHeight</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>13f343a9c3804846a31867e942602199</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Resolution width</name><type>DEPENDENT</type><key>hikvision_cam.video_resolution_width[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><units>!px</units><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.videoResolutionWidth</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype><item_prototype><uuid>2ccd4b38faf046b88a0983249ca0c4f6</uuid><name>Channel &quot;{#CHANNEL_ID}&quot;: Video scan type</name><type>DEPENDENT</type><key>hikvision_cam.video_scan_type[{#CHANNEL_ID}]</key><delay>0</delay><history>7d</history><trends>0</trends><value_type>CHAR</value_type><preprocessing><step><type>JSONPATH</type><parameters><parameter>$.StreamingChannelList.StreamingChannel[?(@.id=={#CHANNEL_ID})].Video.videoScanType</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>JSONPATH</type><parameters><parameter>$[0]</parameter></parameters><error_handler>DISCARD_VALUE</error_handler></step><step><type>DISCARD_UNCHANGED_HEARTBEAT</type><parameters><parameter>1h</parameter></parameters></step></preprocessing><master_item><key>hikvision_cam.get_streaming</key></master_item><tags><tag><tag>component</tag><value>stream</value></tag><tag><tag>stream-id</tag><value>{#CHANNEL_ID}</value></tag></tags></item_prototype></item_prototypes><trigger_prototypes><trigger_prototype><uuid>16cf4d23b3c8410586703efca81ebe52</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_height[{#CHANNEL_ID}])&lt;&gt;{$HIKVISION_STREAM_HEIGHT} or
last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_width[{#CHANNEL_ID}])&lt;&gt;{$HIKVISION_STREAM_WIDTH}</expression><name>Channel &quot;{#CHANNEL_ID}&quot;: Invalid video stream resolution parameters</name><priority>WARNING</priority><description>expected: {$HIKVISION_STREAM_WIDTH} px x {$HIKVISION_STREAM_HEIGHT} px
received: {ITEM.LASTVALUE2} x {ITEM.LASTVALUE1}</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype><trigger_prototype><uuid>4f2a512d8f95414495dec5670e5e9680</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.fixed_quality[{#CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.fixed_quality[{#CHANNEL_ID}],#2) or
last(/Hikvision camera by HTTP/hikvision_cam.constant_bit_rate[{#CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.constant_bit_rate[{#CHANNEL_ID}],#2) or
last(/Hikvision camera by HTTP/hikvision_cam.video_quality_control_type[{#CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.video_quality_control_type[{#CHANNEL_ID}],#2) or
last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_width[{#CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_width[{#CHANNEL_ID}],#2) or
last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_height[{#CHANNEL_ID}],#1)&lt;&gt;last(/Hikvision camera by HTTP/hikvision_cam.video_resolution_height[{#CHANNEL_ID}],#2)</expression><name>Channel &quot;{#CHANNEL_ID}&quot;: Parameters of video stream are changed</name><priority>INFO</priority><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger_prototype></trigger_prototypes><url>http://{HOST.CONN}:{$HIKVISION_ISAPI_PORT}/ISAPI/Streaming/channels</url><status_codes>200,401</status_codes><preprocessing><step><type>XML_TO_JSON</type><parameters><parameter/></parameters></step><step><type>JAVASCRIPT</type><parameters><parameter>var data = JSON.parse(value);
var out = [];

data.StreamingChannelList.StreamingChannel.forEach(function (field) {
    out.push({
        &quot;{#CHANNEL_ID}&quot;: field.id,
        &quot;{#CHANNEL_NAME}&quot;: field.channelName,
        &quot;{#CHANNEL_ENABLED}&quot;: field.enabled
    });
})

return JSON.stringify(out);</parameter></parameters></step></preprocessing><overrides><override><name>trigger disabled non main channels</name><step>1</step><filter><conditions><condition><macro>{#CHANNEL_ID}</macro><value>{$HIKVISION_MAIN_CHANNEL_ID}</value><operator>NOT_MATCHES_REGEX</operator><formulaid>A</formulaid></condition></conditions></filter><operations><operation><operationobject>TRIGGER_PROTOTYPE</operationobject><operator>LIKE</operator><value>Invalid video stream resolution parameters</value><status>ENABLED</status><discover>NO_DISCOVER</discover></operation></operations></override></overrides></discovery_rule></discovery_rules><tags><tag><tag>class</tag><value>device</value></tag><tag><tag>target</tag><value>cctv</value></tag><tag><tag>target</tag><value>hikvision</value></tag></tags><macros><macro><macro>{$CPU.UTIL.CRIT}</macro><value>90</value></macro><macro><macro>{$HIKVISION_ISAPI_PORT}</macro><value>80</value><description>ISAPI port on device</description></macro><macro><macro>{$HIKVISION_MAIN_CHANNEL_ID}</macro><value>101</value><description>Main video stream ID</description></macro><macro><macro>{$HIKVISION_STREAM_HEIGHT}</macro><value>1080</value><description>Main video stream image height</description></macro><macro><macro>{$HIKVISION_STREAM_WIDTH}</macro><value>1920</value><description>Main video stream image width</description></macro><macro><macro>{$MEMORY.UTIL.MAX}</macro><value>95</value></macro><macro><macro>{$PASSWORD}</macro><type>SECRET_TEXT</type></macro><macro><macro>{$USER}</macro><value>admin</value></macro></macros><valuemaps><valuemap><uuid>4c14241141504a9d852d83965c309f31</uuid><name>Login status</name><mappings><mapping><value>0</value><newvalue>OK</newvalue></mapping><mapping><value>1</value><newvalue>Unauthorized</newvalue></mapping><mapping><value>2</value><newvalue>Connection error</newvalue></mapping></mappings></valuemap></valuemaps></template></templates><triggers><trigger><uuid>2bd6d99edd0f4b2d8045e43e4586b637</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_info.login_status)=1 or
last(/Hikvision camera by HTTP/hikvision_cam.get_streaming.login_status)=1 or
last(/Hikvision camera by HTTP/hikvision_cam.get_status.login_status)=1</expression><name>Hikvision camera: Authorisation error</name><priority>WARNING</priority><description>Check the correctness of the authorization data</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger><trigger><uuid>58b5d210fe24434b9aaa365fba764742</uuid><expression>last(/Hikvision camera by HTTP/hikvision_cam.get_info.login_status)=2 or
last(/Hikvision camera by HTTP/hikvision_cam.get_streaming.login_status)=2 or
last(/Hikvision camera by HTTP/hikvision_cam.get_status.login_status)=2</expression><name>Hikvision camera: Error receiving data</name><priority>WARNING</priority><description>Check the availability of the HTTP port</description><manual_close>YES</manual_close><tags><tag><tag>scope</tag><value>notice</value></tag></tags></trigger></triggers><graphs><graph><uuid>30cfa75b2afb490f8448a63366577144</uuid><name>Hikvision camera: CPU utilization</name><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><drawtype>GRADIENT_LINE</drawtype><color>1A7C11</color><item><host>Hikvision camera by HTTP</host><key>hikvision_cam.cpu.util</key></item></graph_item></graph_items></graph><graph><uuid>0cd19b0f8f57435e8b3e1284574e4b79</uuid><name>Hikvision camera: Memory</name><ymin_type_1>FIXED</ymin_type_1><ymax_type_1>FIXED</ymax_type_1><graph_items><graph_item><color>1A7C11</color><item><host>Hikvision camera by HTTP</host><key>hikvision_cam.memory.usage</key></item></graph_item></graph_items></graph></graphs></zabbix_export>
